{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u0423\u0447\u0435\u0431\u043d\u0438\u043a \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u041c\u0414\u041a 11.01","text":"<p>\u041c\u0414\u041a 11.01 \u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438 \u0437\u0430\u0449\u0438\u0442\u044b \u0431\u0430\u0437 \u0434\u0430\u043d\u043d\u044b\u0445</p> <p>09.02.07 \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</p> <p>\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0451\u043c: 128 \u0447\u0430\u0441\u043e\u0432 \u2022   \u041b\u0435\u043a\u0446\u0438\u0438 \u2014 70 \u0447\u0430\u0441\u043e\u0432 \u2022   \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 \u2014 58 \u0447\u0430\u0441\u043e\u0432</p> <p>\u0426\u0435\u043b\u044c \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b: \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f, \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u0438 \u0437\u0430\u0449\u0438\u0442\u044b \u0431\u0430\u0437 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0421\u0423\u0411\u0414.</p>"},{"location":"Chapter_1/1.1-DBMS-architecture/","title":"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0421\u0423\u0411\u0414","text":"<p>\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435</p>"},{"location":"Chapter_1/1.2-data-types/","title":"\u0422\u0438\u043f\u044b \u0434\u0430\u043d\u043d\u044b\u0445","text":""},{"location":"Chapter_1/1.2-data-types/#_1","title":"\u0422\u0438\u043f\u044b \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/","title":"DDL-\u043a\u043e\u043c\u0430\u043d\u0434\u044b SQL","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041e\u0431\u044a\u0451\u043c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#1-ddl","title":"1. \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 DDL","text":"<p>DDL (Data Definition Language) \u2014 \u043f\u043e\u0434\u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e SQL, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u043e\u0435 \u0434\u043b\u044f:</p> <ul> <li>\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438\u0445 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b</li> <li>\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432</li> </ul> <p>DDL \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441\u043e \u0441\u0445\u0435\u043c\u043e\u0439, \u0430 \u043d\u0435 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#ddl-","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 DDL-\u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 CREATE \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 ALTER \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b DROP \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 TRUNCATE \u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b COMMENT \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#2-create","title":"2. CREATE \u2014 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0411\u0414","text":""},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#create-database","title":"CREATE DATABASE","text":"<pre><code>CREATE DATABASE college_db;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u043d\u043e\u0432\u0443\u044e \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445</p> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432\u043d\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#create-table","title":"CREATE TABLE","text":"<pre><code>CREATE TABLE students (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    birth_date DATE,\n    email TEXT UNIQUE\n);\n</code></pre> <p>\u0412 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>\u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u0442\u0438\u043f\u044b \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438</li> <li>\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#create-table-if-not-exists","title":"CREATE TABLE IF NOT EXISTS","text":"<pre><code>CREATE TABLE IF NOT EXISTS groups (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL UNIQUE\n);\n</code></pre> <p>\u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043e\u0448\u0438\u0431\u043a\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#3-ddl","title":"3. \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0432 DDL","text":"<p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u2014 \u0447\u0430\u0441\u0442\u044c DDL, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u0412\u0438\u0434\u044b \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439</p> <ul> <li>PRIMARY KEY</li> <li>FOREIGN KEY</li> <li>UNIQUE</li> <li>NOT NULL</li> <li>CHECK</li> <li>DEFAULT</li> </ul> <pre><code>salary NUMERIC CHECK (salary &gt; 0) DEFAULT 30000\n</code></pre> <p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e:</p> <ul> <li>\u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u0430</li> <li>\u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b</li> </ul>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#4-alter","title":"4. ALTER \u2014 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0430\u0431\u043b\u0438\u0446\u044b","text":""},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#_1","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u0430","text":"<pre><code>ALTER TABLE students\nADD COLUMN phone TEXT;\n</code></pre>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#_2","title":"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u0430","text":"<pre><code>ALTER TABLE students\nDROP COLUMN phone;\n</code></pre> <p>\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435\u043e\u0431\u0440\u0430\u0442\u0438\u043c\u0430 \u0431\u0435\u0437 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0439 \u043a\u043e\u043f\u0438\u0438</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#_3","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439","text":"<pre><code>ALTER TABLE students\nADD CONSTRAINT students_email_check\nCHECK (email LIKE '%@%');\n</code></pre> <p>\u0421\u0423\u0411\u0414 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0432\u0441\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#_4","title":"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439","text":"<pre><code>ALTER TABLE students\nDROP CONSTRAINT students_email_check;\n</code></pre>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#_5","title":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<pre><code>ALTER TABLE students\nALTER COLUMN phone TYPE VARCHAR(20);\n</code></pre> <p>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u0435\u0441\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#5-drop","title":"5. DROP \u2014 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432","text":""},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#drop-table","title":"DROP TABLE","text":"<pre><code>DROP TABLE students;\n</code></pre> <p>\u0423\u0434\u0430\u043b\u044f\u0435\u0442:</p> <ul> <li>\u0442\u0430\u0431\u043b\u0438\u0446\u0443</li> <li>\u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f</li> <li>\u0438\u043d\u0434\u0435\u043a\u0441\u044b</li> </ul>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#drop","title":"DROP \u0441 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438","text":"<pre><code>DROP TABLE students CASCADE;\n</code></pre> <p>\u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0432\u0441\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b</p> <p>\u041f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u043e\u043f\u0430\u0441\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#drop-restrict","title":"DROP RESTRICT (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e)","text":"<pre><code>DROP TABLE students RESTRICT;\n</code></pre> <p>\u0417\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#6-truncate","title":"6. TRUNCATE \u2014 \u043e\u0447\u0438\u0441\u0442\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b","text":"<pre><code>TRUNCATE TABLE students;\n</code></pre> <p>\u041e\u0442\u043b\u0438\u0447\u0438\u044f \u043e\u0442 DELETE:</p> DELETE TRUNCATE DML DDL \u041c\u043e\u0436\u043d\u043e \u043e\u0442\u043a\u0430\u0442\u0438\u0442\u044c \u041d\u0435\u043b\u044c\u0437\u044f \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u043e\u0441\u0442\u0440\u043e\u0447\u043d\u043e \u041c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u044b\u0439 \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 WHERE \u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0432\u0441\u0451 <p>TRUNCATE \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442 ON DELETE</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#7-comment","title":"7. COMMENT \u2014 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0445\u0435\u043c\u044b","text":"<pre><code>COMMENT ON TABLE students IS '\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u0434\u0436\u0430';\nCOMMENT ON COLUMN students.full_name IS '\u0424\u0418\u041e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430';\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u043f\u0440\u043e\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u043e\u0439 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435</p> <p>\u041f\u043e\u0432\u044b\u0448\u0430\u0435\u0442 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c \u0441\u0445\u0435\u043c\u044b \u0411\u0414</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#8-ddl","title":"8. \u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0438 DDL","text":"<p>\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c:</p> <ul> <li>\u043c\u043d\u043e\u0433\u0438\u0435 DDL-\u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f</li> <li>ROLLBACK \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c</li> </ul> <pre><code>BEGIN;\nCREATE TABLE test (id INT);\nROLLBACK; -- \u0432 PostgreSQL \u043d\u0435 \u043e\u0442\u043a\u0430\u0442\u0438\u0442 CREATE TABLE\n</code></pre> <p>\u042d\u0442\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0430\u0436\u043d\u043e \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f.</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#_6","title":"\u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u0435 DROP \u0431\u0435\u0437 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 \u041f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 ALTER \u0431\u0435\u0437 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0438\u043c\u0451\u043d \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u0421\u043b\u043e\u0436\u043d\u0430\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 TRUNCATE \u0432\u043c\u0435\u0441\u0442\u043e DELETE \u0411\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u0430\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0430"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#10-ddl-dml","title":"10. \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 DDL \u0438 DML","text":"\u041a\u0440\u0438\u0442\u0435\u0440\u0438\u0439 DDL DML \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0414\u0430\u043d\u043d\u044b\u0435 \u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e \u041f\u043e\u043b\u043d\u043e \u041f\u0440\u0438\u043c\u0435\u0440\u044b CREATE, ALTER SELECT, INSERT"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#no1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21161","text":"<p>\u0421\u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0411\u0414 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438:</p> <p>\u0423\u0447\u0451\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0438 \u0443\u0447\u0435\u0431\u043d\u044b\u0445 \u0433\u0440\u0443\u043f\u043f \u043a\u043e\u043b\u043b\u0435\u0434\u0436\u0430.</p> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f (\u0422\u041e\u041b\u042c\u041a\u041e DDL):</p> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>groups</li> <li>students</li> </ul> <p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043a\u043b\u044e\u0447\u0438</li> <li>\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b</li> <li>\u0424\u0418\u041e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430</li> <li>\u0441\u0432\u044f\u0437\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442 \u2192 \u0433\u0440\u0443\u043f\u043f\u0430 (FOREIGN KEY)</li> <li>\u0417\u0430\u0434\u0430\u0442\u044c \u043e\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u0432\u0441\u0435\u043c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c</li> </ul> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c COMMENT:</p> <ul> <li>\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c</li> <li>\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0442\u043e\u043b\u0431\u0446\u0430\u043c</li> </ul> <p>\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c INSERT, UPDATE, DELETE</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#no2","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21162","text":"<p>\u0414\u0430\u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430:</p> <pre><code>CREATE TABLE contracts (\n    id SERIAL,\n    number TEXT,\n    start_date DATE,\n    end_date DATE,\n    client_id INT\n);\n</code></pre> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:</p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447</p> <ul> <li>\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u043c</li> <li>\u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c NULL \u0432 start_date</li> <li>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 <code>end_date &gt; start_date</code></li> <li>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043d\u0435\u0448\u043d\u0438\u0439 \u043a\u043b\u044e\u0447 \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 clients</li> <li>\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 client_contracts</li> </ul> <p>\u0412\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 ALTER TABLE</p> <p>\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u043e\u043c\u0430\u043d\u0434 \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0435\u0433\u043e</p>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#no3","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21163","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 logs \u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0435\u0451 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</p> <p>\u0417\u0430\u0442\u0435\u043c:</p> <ul> <li>\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e DELETE</li> <li>\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443</li> <li>\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e TRUNCATE</li> <li>\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c ROLLBACK \u0432 \u043e\u0431\u043e\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445</li> </ul> <p>\u0412 \u043e\u0442\u0447\u0451\u0442\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c:</p> <ul> <li>\u043a\u0430\u043a\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043e\u0442\u043a\u0430\u0442\u0438\u043b\u0438\u0441\u044c</li> <li>\u043a\u0430\u043a\u0438\u0435 \u2014 \u043d\u0435\u0442</li> <li>\u043f\u043e\u0447\u0435\u043c\u0443 TRUNCATE \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439</li> </ul>"},{"location":"Chapter_1/1.3-DDL-SQL%20commands/#_7","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0412 \u0447\u0451\u043c \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 DDL-\u043a\u043e\u043c\u0430\u043d\u0434 \u043e\u0442 DML-\u043a\u043e\u043c\u0430\u043d\u0434?</li> <li>\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 <code>CREATE TABLE</code> \u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c <code>ROLLBACK</code>?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 <code>ALTER TABLE</code> \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 <code>DELETE</code>, <code>TRUNCATE</code> \u0438 <code>DROP TABLE</code>?</li> <li>\u0417\u0430\u0447\u0435\u043c \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c (<code>CONSTRAINT name</code>)?</li> <li>\u0427\u0435\u043c \u043e\u043f\u0430\u0441\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 <code>DROP ... CASCADE</code>?</li> <li>\u041c\u043e\u0436\u043d\u043e \u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0438\u043f \u0441\u0442\u043e\u043b\u0431\u0446\u0430 \u0447\u0435\u0440\u0435\u0437 <code>ALTER TABLE</code> \u0431\u0435\u0437 \u043f\u043e\u0442\u0435\u0440\u0438 \u0434\u0430\u043d\u043d\u044b\u0445?</li> <li>\u0417\u0430\u0447\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>COMMENT ON</code> \u0432 \u043f\u0440\u043e\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u043e\u0439 \u0411\u0414?</li> </ol>"},{"location":"Chapter_1/practic-cascading-operations/","title":"\u041a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":"<p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p> <p>\u0426\u0435\u043b\u044c: \u043d\u0430\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0438 \u043e\u0441\u043e\u0437\u043d\u0430\u043d\u043d\u043e \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e \u0441\u0441\u044b\u043b\u043e\u0447\u043d\u043e\u0439 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438.</p>"},{"location":"Chapter_1/practic-cascading-operations/#_2","title":"\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u043a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":"<p>\u041a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u2014 \u044d\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0435, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442 \u0441 \u0434\u043e\u0447\u0435\u0440\u043d\u0438\u043c\u0438 \u0441\u0442\u0440\u043e\u043a\u0430\u043c\u0438, \u0435\u0441\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043e\u043d\u0438 \u0441\u0441\u044b\u043b\u0430\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 FOREIGN KEY.</p> <p>\u041e\u043d\u0438 \u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u043a\u043b\u044e\u0447\u0430:</p> <pre><code>FOREIGN KEY (child_col)\nREFERENCES parent_table(id)\nON DELETE ...\nON UPDATE ...\n</code></pre>"},{"location":"Chapter_1/practic-cascading-operations/#_3","title":"\u0422\u0438\u043f\u044b \u043a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439","text":""},{"location":"Chapter_1/practic-cascading-operations/#restrict-no-action","title":"RESTRICT / NO ACTION (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e)","text":"<p>\u0421\u043c\u044b\u0441\u043b: \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438.</p> <pre><code>ON DELETE RESTRICT\n</code></pre> <ul> <li>\u0421\u0430\u043c\u044b\u0439 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u041f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043f\u043e\u0442\u0435\u0440\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438</li> </ul>"},{"location":"Chapter_1/practic-cascading-operations/#cascade","title":"CASCADE","text":"<p>\u0421\u043c\u044b\u0441\u043b: \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e \u043a \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u043c \u0441\u0442\u0440\u043e\u043a\u0430\u043c.</p> <pre><code>ON DELETE CASCADE\n</code></pre> <ul> <li>\u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0432\u0441\u0435 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438</li> <li>\u041c\u043e\u0436\u0435\u0442 \u0437\u0430\u0442\u0440\u043e\u043d\u0443\u0442\u044c \u043c\u043d\u043e\u0433\u043e \u0442\u0430\u0431\u043b\u0438\u0446</li> <li>\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u0441\u0442\u0440\u043e\u0433\u043e\u0433\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul> <p>\u041e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c: \u0446\u0435\u043f\u043d\u043e\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0435\u0437 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043e\u0442\u043a\u0430\u0442\u0430 \u0432\u043d\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</p>"},{"location":"Chapter_1/practic-cascading-operations/#set-null","title":"SET NULL","text":"<p>\u0421\u043c\u044b\u0441\u043b: \u0440\u0430\u0437\u0440\u044b\u0432\u0430\u0435\u0442 \u0441\u0432\u044f\u0437\u044c, \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044f \u0434\u0430\u043d\u043d\u044b\u0435.</p> <pre><code>ON DELETE SET NULL\n</code></pre> <ul> <li>\u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0441\u0432\u044f\u0437\u0435\u0439</li> <li>\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0442\u044c NULL</li> <li>\u0427\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul>"},{"location":"Chapter_1/practic-cascading-operations/#set-default","title":"SET DEFAULT","text":"<p>\u0421\u043c\u044b\u0441\u043b: \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.</p> <pre><code>ON DELETE SET DEFAULT\n</code></pre> <ul> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0434\u043a\u043e</li> <li>\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0433\u043e DEFAULT</li> <li>\u041c\u043e\u0436\u0435\u0442 \u0443\u0441\u043b\u043e\u0436\u043d\u044f\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443</li> </ul>"},{"location":"Chapter_1/practic-cascading-operations/#on-delete-vs-on-update","title":"ON DELETE vs ON UPDATE","text":"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ON DELETE \u041f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 ON UPDATE \u0422\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 PK \u043c\u043e\u0436\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f <p>\u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u0445 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435 \u043a\u043b\u044e\u0447\u0438 \u043f\u043e\u0447\u0442\u0438 \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u044e\u0442\u0441\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 ON UPDATE CASCADE \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0434\u043a\u043e.</p>"},{"location":"Chapter_1/practic-cascading-operations/#_4","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u0440\u0438\u043c\u0435\u0440","text":"<p>\u0421\u0445\u0435\u043c\u0430: \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u2192 \u043a\u0430\u0444\u0435\u0434\u0440\u0430 \u2192 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430</p> <pre><code>CREATE TABLE faculties (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL UNIQUE\n);\n</code></pre> <p>\u0414\u043e\u0447\u0435\u0440\u043d\u044f\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 (\u043a\u0430\u0444\u0435\u0434\u0440\u044b)</p> <pre><code>CREATE TABLE departments (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL,\n    faculty_id INT,\n    CONSTRAINT fk_departments_faculty\n        FOREIGN KEY (faculty_id)\n        REFERENCES faculties(id)\n        ON DELETE CASCADE\n);\n</code></pre> <p>\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 (\u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438)</p> <pre><code>CREATE TABLE teachers (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    department_id INT,\n    CONSTRAINT fk_teachers_department\n        FOREIGN KEY (department_id)\n        REFERENCES departments(id)\n        ON DELETE SET NULL\n);\n</code></pre> <p>\u042d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442</p> <pre><code>DELETE FROM faculties WHERE id = 1;\n</code></pre> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: - \u043a\u0430\u0444\u0435\u0434\u0440\u044b \u0443\u0434\u0430\u043b\u0435\u043d\u044b (CASCADE) - \u0443 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439 department_id = NULL</p>"},{"location":"Chapter_1/practic-cascading-operations/#_5","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":""},{"location":"Chapter_1/practic-cascading-operations/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0439 \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 3 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u0441\u0432\u044f\u0437\u0438 \u043c\u0435\u0436\u0434\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c\u0438 orders \u0438 order_items:</p> <ul> <li>RESTRICT</li> <li>CASCADE</li> <li>SET NULL</li> </ul> <p>\u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430:</p> <ul> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 DELETE</li> <li>\u043e\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f</li> <li>\u0441\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0432\u044b\u0432\u043e\u0434, \u043a\u0430\u043a\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul>"},{"location":"Chapter_1/practic-cascading-operations/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u041a\u0430\u0441\u043a\u0430\u0434\u043d\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435</p> <p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441 \u043d\u0435\u0447\u0438\u0441\u043b\u043e\u0432\u044b\u043c \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u043c \u043a\u043b\u044e\u0447\u043e\u043c (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, code TEXT PRIMARY KEY).</p> <p>\u0420\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435:</p> <ul> <li>ON UPDATE CASCADE</li> <li>\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a\u043b\u044e\u0447\u0430</li> <li>\u0430\u043d\u0430\u043b\u0438\u0437 \u0432\u043b\u0438\u044f\u043d\u0438\u044f \u043d\u0430 \u0434\u043e\u0447\u0435\u0440\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b</li> </ul> <p>\u041e\u0442\u0432\u0435\u0442\u044c\u0442\u0435: \u043f\u043e\u0447\u0435\u043c\u0443 \u044d\u0442\u043e \u043f\u043b\u043e\u0445\u0430\u044f \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430?</p>"},{"location":"Chapter_1/practic-cascading-operations/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</p> <p>\u0421\u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0445\u0435\u043c\u0443 \u0438\u0437 3 \u0442\u0430\u0431\u043b\u0438\u0446 \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b:</p> <ul> <li>\u043e\u0434\u043d\u043e DELETE \u0443\u0434\u0430\u043b\u044f\u043b\u043e \u0431\u043e\u043b\u0435\u0435 10 \u0441\u0442\u0440\u043e\u043a \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445</li> <li>\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u043b\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0437\u0433\u043b\u044f\u0434</li> </ul> <p>\u041e\u043f\u0438\u0448\u0438\u0442\u0435, \u043a\u0430\u043a \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0445 \u043b\u043e\u0432\u0443\u0448\u0435\u043a.</p>"},{"location":"Chapter_1/practic-cascading-operations/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u041f\u0435\u0440\u0435\u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</p> <p>\u0414\u0430\u043d\u0430 \u0441\u0432\u044f\u0437\u044c \u0441 ON DELETE CASCADE.</p> <p>\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u0435\u0451 \u043d\u0430:</p> <ul> <li>RESTRICT</li> <li>\u0437\u0430\u0442\u0435\u043c \u043d\u0430 SET NULL</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 ALTER TABLE \u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b</p>"},{"location":"Chapter_1/practic-cascading-operations/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u043e\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0435","text":"<p>\u0414\u0430\u043d\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c:</p> <p>\u0423\u0432\u043e\u043b\u044c\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0435\u0433\u043e \u043e\u0442\u0447\u0451\u0442\u044b \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b.</p> <p>\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u0435:</p> <ul> <li>\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0442\u0430\u0431\u043b\u0438\u0446</li> <li>\u0442\u0438\u043f \u043a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u043e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u044b\u0431\u043e\u0440\u0430</li> </ul>"},{"location":"Chapter_1/practic-creating-tables/","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446","text":""},{"location":"Chapter_1/practic-limitations-of-data-integrity/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 3","text":"<p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430 (90 \u043c\u0438\u043d)</p> <p>\u0426\u0435\u043b\u044c: \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0437\u0430\u0434\u0430\u043d\u0438\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u0426\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445 \u2014 \u044d\u0442\u043e \u043d\u0430\u0431\u043e\u0440 \u043f\u0440\u0430\u0432\u0438\u043b, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c, \u043d\u0435\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u0438 \u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0432\u0438\u0434\u044b \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439</p>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#primary-key","title":"PRIMARY KEY","text":"<p>\u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0438</p> <p>\u041d\u0435 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442 NULL</p> <p>\u0412 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u0438\u043d</p> <pre><code>id SERIAL PRIMARY KEY\n</code></pre>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#unique","title":"UNIQUE","text":"<p>\u0417\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439</p> <p>\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442 NULL (\u0432 PostgreSQL \u2014 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e NULL)</p> <pre><code>email TEXT UNIQUE\n</code></pre>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#not-null","title":"NOT NULL","text":"<p>\u0417\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 NULL</p> <pre><code>name TEXT NOT NULL\n</code></pre>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#check","title":"CHECK","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435</p> <pre><code>age INT CHECK (age &gt;= 18)\n</code></pre>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#foreign-key","title":"FOREIGN KEY","text":"<p>\u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0441\u0441\u044b\u043b\u043e\u0447\u043d\u0443\u044e \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c</p> <p>\u0421\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439</p> <pre><code>FOREIGN KEY (department_id)\nREFERENCES departments(id)\n</code></pre> <p>\u041a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</p> \u041e\u043f\u0446\u0438\u044f \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 ON DELETE CASCADE \u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 ON DELETE RESTRICT \u0417\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 ON DELETE SET NULL \u041e\u0431\u043d\u0443\u043b\u044f\u0435\u0442 \u0441\u0441\u044b\u043b\u043a\u0443"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#_1","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u0440\u0438\u043c\u0435\u0440","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b</p> <pre><code>CREATE TABLE departments (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL UNIQUE\n);\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u0447\u0435\u0440\u043d\u0435\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c\u0438</p> <pre><code>CREATE TABLE employees (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    email TEXT UNIQUE,\n    age INT CHECK (age &gt;= 18),\n    department_id INT,\n    CONSTRAINT fk_department\n        FOREIGN KEY (department_id)\n        REFERENCES departments(id)\n        ON DELETE SET NULL\n);\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439</p> <pre><code>INSERT INTO employees (full_name, age)\nVALUES ('\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d', 16);\n</code></pre> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \u043e\u0448\u0438\u0431\u043a\u0430 CHECK constraint failed</p>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":""},{"location":"Chapter_1/practic-limitations-of-data-integrity/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0432 \u043e\u0434\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435</p> <p>\u0421\u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 employees \u0441\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438:</p> <ul> <li>id \u2014 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447</li> <li>email (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d, \u0443\u043d\u0438\u043a\u0430\u043b\u0435\u043d, \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b @)</li> <li>salary (\u0431\u043e\u043b\u044c\u0448\u0435 0, \u043c\u0435\u043d\u044c\u0448\u0435 500 000)</li> <li>hire_date (\u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0434\u0430\u0442\u044b)</li> </ul> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0440\u0430\u0437\u043d\u044b\u0445 \u0442\u0438\u043f\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439</li> <li>\u0434\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u0430 \u0432\u0441\u0435\u043c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c</li> <li>\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c 2 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043e\u0448\u0438\u0431\u043e\u0447\u043d\u044b\u0445 INSERT \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0438</li> </ul>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0421\u043e\u0441\u0442\u0430\u0432\u043d\u043e\u0439 PRIMARY KEY + \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430</p> <p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 enrollments, \u043e\u0442\u0440\u0430\u0436\u0430\u044e\u0449\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u043d\u0430 \u043a\u0443\u0440\u0441\u044b:</p> \u041f\u043e\u043b\u0435 \u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0435 student_id \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 students(id) course_id \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 courses(id) enroll_date \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 status \u0442\u043e\u043b\u044c\u043a\u043e: 'active', 'completed', 'canceled' <p>\u0423\u0441\u043b\u043e\u0432\u0438\u044f:</p> <ul> <li>\u043e\u0434\u0438\u043d \u0441\u0442\u0443\u0434\u0435\u043d\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0430\u043d \u043d\u0430 \u043e\u0434\u0438\u043d \u043a\u0443\u0440\u0441 \u0434\u0432\u0430\u0436\u0434\u044b</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u043e\u0439 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447</li> <li>\u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u0435 CHECK \u0434\u043b\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430</li> </ul> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u0435, \u043f\u043e\u0447\u0435\u043c\u0443 \u0437\u0434\u0435\u0441\u044c \u043b\u0443\u0447\u0448\u0435 PRIMARY KEY, \u0430 \u043d\u0435 UNIQUE.</p>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0426\u0435\u043f\u043e\u0447\u043a\u0430 \u0441\u0441\u044b\u043b\u043e\u0447\u043d\u043e\u0439 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438</p> <p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0440\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b: - faculties - departments - teachers</p> <p>\u0421\u0432\u044f\u0437\u0438: \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u2192 \u043a\u0430\u0444\u0435\u0434\u0440\u044b \u2192 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438</p> <p>\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430:</p> <ul> <li>\u043a\u0430\u0444\u0435\u0434\u0440\u044b \u0443\u0434\u0430\u043b\u044f\u044e\u0442\u0441\u044f</li> <li>\u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f, \u043d\u043e \u0438\u0445 department_id \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f NULL</li> </ul> <p>\u0412\u0441\u0435 \u0432\u043d\u0435\u0448\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0446\u0435\u043f\u043e\u0447\u043a\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0439 \u0438 \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0439\u0442\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.</p>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f + \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b</p> <p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 contracts \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439.</p> <p>\u0417\u0430\u0442\u0435\u043c \u0447\u0435\u0440\u0435\u0437 ALTER TABLE:</p> <ul> <li>\u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 PRIMARY KEY</li> <li>\u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 CHECK \u043d\u0430 \u0441\u0440\u043e\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 (end_date &gt; start_date)</li> <li>\u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 UNIQUE \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430</li> <li>\u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 FOREIGN KEY \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 clients</li> </ul> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u0435:</p> <ul> <li>\u043f\u043e\u0447\u0435\u043c\u0443 \u0421\u0423\u0411\u0414 \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043a\u0430\u0437\u0430\u0442\u044c \u0432 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f</li> <li>\u0432 \u043a\u0430\u043a\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0435\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_1/practic-limitations-of-data-integrity/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0448\u0438\u0431\u043e\u043a</p> <pre><code>CREATE TABLE payments (\n    id SERIAL PRIMARY KEY,\n    user_id INT,\n    amount NUMERIC,\n    payment_date DATE,\n    status TEXT\n);\n</code></pre> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:</p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f:</p> <ul> <li>amount &gt; 0</li> <li>status \u0442\u043e\u043b\u044c\u043a\u043e 'new', 'paid', 'failed'</li> <li>user_id \u2014 \u0432\u043d\u0435\u0448\u043d\u0438\u0439 \u043a\u043b\u044e\u0447</li> </ul> <p>\u041d\u0430\u043c\u0435\u0440\u0435\u043d\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u0430\u0440\u0443\u0448\u0430\u044e\u0449\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f.</p> <p>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0430\u0445.</p> <p>\u0418\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u043e\u0448\u0438\u0431\u043a\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u043b\u0438.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/","title":"\u041b\u0435\u043a\u0446\u0438\u044f 2.1. SELECT, INSERT, UPDATE, DELETE","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041e\u0431\u044a\u0451\u043c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#1-sql","title":"1. SQL \u043a\u0430\u043a \u044f\u0437\u044b\u043a \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u043c\u0438","text":"<p>SQL (Structured Query Language) \u2014 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u044f\u0437\u044b\u043a \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0440\u0435\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u043c\u0438 \u0431\u0430\u0437\u0430\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u041a\u043b\u044e\u0447\u0435\u0432\u0430\u044f \u0438\u0434\u0435\u044f:</p> <p>\u041c\u044b \u043d\u0435 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c, \u043a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435, \u043c\u044b \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c, \u043a\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0443\u0436\u043d\u044b.</p> <p>\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b SELECT, INSERT, UPDATE, DELETE \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u0433\u0440\u0443\u043f\u043f\u0435 DML (Data Manipulation Language).</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#2-select","title":"2. SELECT \u2014 \u0432\u044b\u0431\u043e\u0440\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 SELECT \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446 \u0438 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0439.</p> <p>\u0412\u0430\u0436\u043d\u043e: SELECT \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_1","title":"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441","text":"<pre><code>SELECT column1, column2\nFROM table_name;\n</code></pre> <p>\u0438\u043b\u0438</p> <pre><code>SELECT *\nFROM table_name;\n</code></pre> <p>\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435:</p> <p>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 * \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0443\u0447\u0435\u0431\u043d\u044b\u0445 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u0445.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#where","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 (WHERE)","text":"<pre><code>SELECT *\nFROM employees\nWHERE salary &gt; 50000;\n</code></pre> <p>\u0423\u0441\u043b\u043e\u0432\u0438\u044f:</p> <ul> <li><code>=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></li> <li><code>AND</code>, <code>OR</code>, <code>NOT</code></li> <li><code>IN</code>, <code>BETWEEN</code>, <code>LIKE</code>, <code>IS NULL</code></li> </ul>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#order-by","title":"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 (ORDER BY)","text":"<pre><code>SELECT full_name, salary\nFROM employees\nORDER BY salary DESC;\n</code></pre> <p>\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_2","title":"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0441\u0442\u0440\u043e\u043a","text":"<pre><code>SELECT *\nFROM employees\nLIMIT 10 OFFSET 20;\n</code></pre>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#3-insert","title":"3. INSERT \u2014 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 INSERT \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043d\u043e\u0432\u044b\u0445 \u0441\u0442\u0440\u043e\u043a \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_3","title":"\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438","text":"<pre><code>INSERT INTO employees (full_name, salary)\nVALUES ('\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d', 60000);\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f DEFAULT</li> <li>\u043b\u0438\u0431\u043e \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0430 (NOT NULL)</li> </ul>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_4","title":"\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u0442\u0440\u043e\u043a","text":"<pre><code>INSERT INTO employees (full_name, salary)\nVALUES\n('\u041f\u0435\u0442\u0440\u043e\u0432 \u041f\u0451\u0442\u0440', 55000),\n('\u0421\u0438\u0434\u043e\u0440\u043e\u0432 \u0421\u0435\u0440\u0433\u0435\u0439', 70000);\n</code></pre>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#insert-select","title":"INSERT \u0441 SELECT","text":"<pre><code>INSERT INTO archive_employees (full_name, salary)\nSELECT full_name, salary\nFROM employees\nWHERE salary &lt; 40000;\n</code></pre> <p>\u0427\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#4-update","title":"4. UPDATE \u2014 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 UPDATE \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_5","title":"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441","text":"<pre><code>UPDATE employees\nSET salary = 65000\nWHERE id = 3;\n</code></pre> <p>\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435</p> <p>\u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430: UPDATE \u0431\u0435\u0437 WHERE</p> <pre><code>UPDATE employees\nSET salary = 0;\n</code></pre> <p>\u0418\u0437\u043c\u0435\u043d\u0438\u0442 \u0432\u0441\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_6","title":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432","text":"<pre><code>UPDATE employees\nSET\n    salary = salary * 1.1,\n    updated_at = CURRENT_DATE\nWHERE department_id = 2;\n</code></pre>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#update","title":"UPDATE \u0441 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c","text":"<pre><code>UPDATE employees\nSET salary = salary * 1.05\nWHERE department_id IN (\n    SELECT id\n    FROM departments\n    WHERE name = 'IT'\n);\n</code></pre>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#5-delete","title":"5. DELETE \u2014 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 DELETE \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_7","title":"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441","text":"<pre><code>DELETE FROM employees\nWHERE id = 5;\n</code></pre>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#delete-where","title":"DELETE \u0431\u0435\u0437 WHERE","text":"<pre><code>DELETE FROM employees;\n</code></pre> <p>\u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0432\u0441\u0435 \u0441\u0442\u0440\u043e\u043a\u0438, \u043d\u043e:</p> <ul> <li>\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f</li> <li>\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043a\u0430\u0442\u0438\u0442\u044c \u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</li> </ul>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#delete","title":"DELETE \u0438 \u043a\u0430\u0441\u043a\u0430\u0434\u044b","text":"<pre><code>DELETE FROM departments\nWHERE id = 1;\n</code></pre> <p>\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442: - <code>ON DELETE CASCADE</code> - <code>RESTRICT</code> - <code>SET NULL</code></p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_8","title":"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0430\u0441\u043f\u0435\u043a\u0442","text":"<p>\u0412\u0441\u0435 DML-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438:</p> <pre><code>BEGIN;\n\nUPDATE accounts SET balance = balance - 100 WHERE id = 1;\nUPDATE accounts SET balance = balance + 100 WHERE id = 2;\n\nROLLBACK; -- \u0438\u043b\u0438 COMMIT\n</code></pre> <p>\u0411\u0435\u0437 COMMIT \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f.</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_9","title":"\u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u0435 UPDATE \u0431\u0435\u0437 WHERE \u041c\u0430\u0441\u0441\u043e\u0432\u0430\u044f \u043f\u043e\u0440\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 DELETE \u0431\u0435\u0437 WHERE \u041f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u041d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0438\u043f\u043e\u0432 \u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u041e\u0448\u0438\u0431\u043a\u0430 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_10","title":"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432","text":"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0418\u0437\u043c\u0435\u043d\u044f\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 SELECT \u0427\u0442\u0435\u043d\u0438\u0435 \u041d\u0435\u0442 INSERT \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0414\u0430 UPDATE \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0414\u0430 DELETE \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0414\u0430"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_11","title":"\u0412\u044b\u0432\u043e\u0434\u044b","text":"<p><code>SELECT</code> \u2014 \u0441\u0430\u043c\u044b\u0439 \u0441\u043b\u043e\u0436\u043d\u044b\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438</p> <p><code>INSERT</code> \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438</p> <p><code>UPDATE</code> \u0438 <code>DELETE</code> \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0441\u0442\u0440\u043e\u0433\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f</p> <p>\u0412\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043e\u0441\u043e\u0437\u043d\u0430\u043d\u043d\u043e</p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#no1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21161","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 employees (\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0438\u0437 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0438 \u0438\u043b\u0438 \u0437\u0430\u0434\u0430\u0442\u044c \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e).</p> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c 5 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 SELECT:</p> <ul> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0435</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u0431\u0435\u0437 \u043e\u0442\u0434\u0435\u043b\u0430 (department_id IS NULL)</li> <li>\u041d\u0430\u0439\u0442\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432, \u043f\u0440\u0438\u043d\u044f\u0442\u044b\u0445 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0433\u043e\u0434</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0442\u043e\u043f-3 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043f\u043e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0435</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0438\u043c\u044f \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043e\u0434\u043d\u0443 \u0431\u0443\u043a\u0432\u0443 \u0438 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e</li> </ul>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#no2","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21162","text":"<p>\u0414\u0430\u043d\u044b \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>departments</li> <li>employees</li> </ul> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:</p> <ul> <li>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043e\u0442\u0434\u0435\u043b</li> <li>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043d\u0435\u0433\u043e \u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432</li> <li>\u041f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0432\u0441\u0435\u043c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c \u043e\u0442\u0434\u0435\u043b\u0430 \u043d\u0430 10%</li> <li>\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u043e\u0442\u0434\u0435\u043b</li> <li>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446 \u0434\u043e \u0438 \u043f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> </ul> <p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435:</p> <ul> <li>\u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432 \u043e\u0434\u043d\u043e\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</li> <li>\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0441 ROLLBACK \u0438 \u0441 COMMIT</li> </ul>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#no3","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21163","text":"<p>\u0414\u0430\u043d\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c:</p> <p>\u0423\u0432\u043e\u043b\u044c\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u044c \u043a \u043f\u043e\u0442\u0435\u0440\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438.</p> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:</p> <ul> <li>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 employees_archive</li> <li>\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0443\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0432\u043e\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430</li> <li>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0438\u0437 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b</li> <li>\u0423\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b \u0432 \u0430\u0440\u0445\u0438\u0432\u0435</li> </ul> <p>\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0441\u043a\u0430\u0434\u043d\u043e\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435</li> </ul>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_12","title":"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430:","text":"<p>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>INSERT INTO ... SELECT</code> \u0437\u0430\u0442\u0435\u043c <code>DELETE</code></p>"},{"location":"Chapter_2/2.1-SELECT-INSERT-UPDATE-DELETE/#_13","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0435\u043c \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0438\u0430\u043b\u044c\u043d\u043e \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f <code>SELECT</code> \u043e\u0442 <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> \u0441 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0421\u0423\u0411\u0414?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 <code>UPDATE</code> \u0438\u043b\u0438 <code>DELETE</code> \u0431\u0435\u0437 \u0443\u0441\u043b\u043e\u0432\u0438\u044f <code>WHERE</code> \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u043e\u0439?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 <code>DELETE FROM table;</code> \u0438 <code>DELETE FROM table WHERE condition;</code>?</li> <li>\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 <code>INSERT</code>, \u0435\u0441\u043b\u0438 \u043d\u0430\u0440\u0443\u0448\u0430\u0435\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438?</li> <li>\u0417\u0430\u0447\u0435\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c DML-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438?</li> </ol>"},{"location":"Chapter_2/2.2-JOIN/","title":"JOIN \u2014 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 SQL","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_2/2.2-JOIN/#1-join","title":"1. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u0435\u043d JOIN","text":"<p>\u0420\u0435\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0434\u0430\u043d\u043d\u044b\u0445, \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.</p> <p>\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u2014 JOIN.</p> <p>JOIN \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u0434\u0432\u0443\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u043f\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044e \u0441\u0432\u044f\u0437\u0438.</p>"},{"location":"Chapter_2/2.2-JOIN/#2","title":"2. \u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432","text":"<pre><code>CREATE TABLE departments (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL\n);\n\nCREATE TABLE employees (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    department_id INT REFERENCES departments(id)\n);\n</code></pre>"},{"location":"Chapter_2/2.2-JOIN/#3-join","title":"3. \u0412\u0438\u0434\u044b JOIN","text":""},{"location":"Chapter_2/2.2-JOIN/#inner-join","title":"INNER JOIN","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u0440\u043e\u043a\u0438, \u0434\u043b\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0432 \u043e\u0431\u0435\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.</p> <pre><code>SELECT e.full_name, d.name\nFROM employees e\nINNER JOIN departments d\n    ON e.department_id = d.id;\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u043d\u0435 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a \u043e\u0442\u0434\u0435\u043b\u0443 \u2014 \u043e\u043d \u043d\u0435 \u043f\u043e\u043f\u0430\u0434\u0451\u0442 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.</p>"},{"location":"Chapter_2/2.2-JOIN/#left-join-left-outer-join","title":"LEFT JOIN (LEFT OUTER JOIN)","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u043b\u0435\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b + \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u0441\u043f\u0440\u0430\u0432\u0430.</p> <pre><code>SELECT e.full_name, d.name\nFROM employees e\nLEFT JOIN departments d\n    ON e.department_id = d.id;\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u043e\u0442\u0434\u0435\u043b\u0430 \u043d\u0435\u0442 \u2014 <code>d.name = NULL</code>.</p>"},{"location":"Chapter_2/2.2-JOIN/#right-join","title":"RIGHT JOIN","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0438\u0437 \u043f\u0440\u0430\u0432\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p> <pre><code>SELECT e.full_name, d.name\nFROM employees e\nRIGHT JOIN departments d\n    ON e.department_id = d.id;\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0434\u043a\u043e \u2014 \u0447\u0430\u0449\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u0435\u043d\u044f\u044e\u0442 \u043c\u0435\u0441\u0442\u0430\u043c\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 LEFT JOIN.</p>"},{"location":"Chapter_2/2.2-JOIN/#full-join","title":"FULL JOIN","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442:</p> <ul> <li>\u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438</li> <li>\u043d\u0435\u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u043b\u0435\u0432\u0430</li> <li>\u043d\u0435\u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u043f\u0440\u0430\u0432\u0430</li> </ul> <pre><code>SELECT e.full_name, d.name\nFROM employees e\nFULL JOIN departments d\n    ON e.department_id = d.id;\n</code></pre>"},{"location":"Chapter_2/2.2-JOIN/#4-join","title":"4. \u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 JOIN","text":"\u0422\u0438\u043f JOIN \u0427\u0442\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 INNER \u0422\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u0435 LEFT \u0412\u0441\u0451 \u0441\u043b\u0435\u0432\u0430 + \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f RIGHT \u0412\u0441\u0451 \u0441\u043f\u0440\u0430\u0432\u0430 + \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f FULL \u0412\u0441\u0451"},{"location":"Chapter_2/2.2-JOIN/#on","title":"\u0423\u0441\u043b\u043e\u0432\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f (ON)","text":"<p>\u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0430\u0436\u043d\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442:</p> <pre><code>ON e.department_id = d.id\n</code></pre> <p>\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u0438 = \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435.</p>"},{"location":"Chapter_2/2.2-JOIN/#6-join","title":"6. JOIN \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446","text":"<pre><code>SELECT e.full_name, d.name, f.name\nFROM employees e\nJOIN departments d ON e.department_id = d.id\nJOIN faculties f ON d.faculty_id = f.id;\n</code></pre> <p>\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e.</p>"},{"location":"Chapter_2/2.2-JOIN/#7-join-where","title":"7. JOIN \u0438 WHERE \u2014 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u0430\u0437\u043d\u0438\u0446\u0430","text":"<pre><code>SELECT *\nFROM employees e\nLEFT JOIN departments d\n    ON e.department_id = d.id\nWHERE d.name = 'IT';\n</code></pre> <p>\u0422\u0430\u043a\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0435\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u0432 INNER JOIN.</p> <p>\u041f\u043e\u0447\u0435\u043c\u0443? \u041f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0441\u0442\u0440\u043e\u043a\u0438 \u0441 NULL \u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u0443\u044e\u0442\u0441\u044f \u0432 WHERE.</p> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442:</p> <pre><code>LEFT JOIN departments d\n    ON e.department_id = d.id\n    AND d.name = 'IT';\n</code></pre>"},{"location":"Chapter_2/2.2-JOIN/#8-join-cross-join","title":"8. JOIN \u0431\u0435\u0437 \u0443\u0441\u043b\u043e\u0432\u0438\u044f (CROSS JOIN)","text":"<pre><code>SELECT *\nFROM employees\nCROSS JOIN departments;\n</code></pre> <p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0434\u0435\u043a\u0430\u0440\u0442\u043e\u0432\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435.</p> <p>\u041e\u043f\u0430\u0441\u043d\u043e \u043f\u0440\u0438 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445.</p>"},{"location":"Chapter_2/2.2-JOIN/#9","title":"9. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u0435 \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 ON \u0414\u0435\u043a\u0430\u0440\u0442\u043e\u0432\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0432 WHERE \u0432\u043c\u0435\u0441\u0442\u043e ON \u041f\u043e\u0442\u0435\u0440\u044f \u0441\u0442\u0440\u043e\u043a \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a JOIN \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 SELECT * \u0418\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"},{"location":"Chapter_2/2.2-JOIN/#10-join","title":"10. \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c JOIN","text":"<p>JOIN \u043e\u043f\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u043d\u0430:</p> <ul> <li>\u0438\u043d\u0434\u0435\u043a\u0441\u044b</li> <li>\u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f (<code>EXPLAIN</code>)</li> <li>\u0440\u0430\u0437\u043c\u0435\u0440 \u0442\u0430\u0431\u043b\u0438\u0446</li> </ul> <p>\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u0430 \u043f\u043e \u0432\u043d\u0435\u0448\u043d\u0435\u043c\u0443 \u043a\u043b\u044e\u0447\u0443 \u0437\u0430\u043c\u0435\u0434\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441.</p>"},{"location":"Chapter_2/2.2-JOIN/#11","title":"11. \u0418\u0442\u043e\u0433\u0438","text":"<p>JOIN:</p> <ul> <li>\u0441\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f</li> <li>\u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</li> </ul>"},{"location":"Chapter_2/2.2-JOIN/#no1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21161","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>students (id, full_name, group_id)</li> <li>groups (id, name, curator)</li> <li>teachers (id, full_name)</li> </ul> <p>\u0421\u0432\u044f\u0436\u0438\u0442\u0435:</p> <ul> <li>students.group_id \u2192 groups.id</li> </ul> <p>\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b:</p> <ul> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u0433\u0440\u0443\u043f\u043f\u044b.</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0435\u0445, \u0443 \u043a\u043e\u0433\u043e \u043d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f\u044b.</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0433\u0440\u0443\u043f\u043f\u044b \u0431\u0435\u0437 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432.</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u0435.</li> <li>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0433\u0440\u0443\u043f\u043f\u044b, \u0433\u0434\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 2 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432.</li> </ul>"},{"location":"Chapter_2/2.2-JOIN/#no2","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21162","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>orders</li> <li>clients</li> </ul> <p>\u0421\u0432\u044f\u0437\u044c: \u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.</p> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435:</p> <ul> <li>\u0417\u0430\u043f\u0440\u043e\u0441 \u0441 INNER JOIN</li> <li>\u0417\u0430\u043f\u0440\u043e\u0441 \u0441 LEFT JOIN</li> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 WHERE</li> <li>\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u044d\u0442\u043e \u0436\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0432 ON</li> </ul> <p>\u041e\u0442\u0432\u0435\u0442\u044c\u0442\u0435:</p> <ul> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f?</li> <li>\u041a\u043e\u0433\u0434\u0430 LEFT JOIN \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0435\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u0432 INNER JOIN?</li> </ul>"},{"location":"Chapter_2/2.2-JOIN/#no3","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21163","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c:</p> <ul> <li>faculties</li> <li>departments</li> <li>teachers</li> <li>courses</li> </ul> <p>\u0421\u0432\u044f\u0437\u0438:</p> <p>\u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u2192 \u043a\u0430\u0444\u0435\u0434\u0440\u0430 \u2192 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c \u2192 \u043a\u0443\u0440\u0441</p> <p>\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441:</p> <p>\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a:</p> <ul> <li>\u043a\u0443\u0440\u0441</li> <li>\u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c</li> <li>\u043a\u0430\u0444\u0435\u0434\u0440\u0430</li> <li>\u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442</li> </ul> <p>\u041d\u0430\u0439\u0442\u0438 \u043a\u0443\u0440\u0441\u044b \u0431\u0435\u0437 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</p> <p>\u041d\u0430\u0439\u0442\u0438 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u044b \u0431\u0435\u0437 \u043a\u0430\u0444\u0435\u0434\u0440.</p> <p>\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 JOIN \u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435.</p>"},{"location":"Chapter_2/2.2-JOIN/#_1","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0412 \u0447\u0451\u043c \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 INNER JOIN \u0438 LEFT JOIN?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0432 WHERE \u043c\u043e\u0436\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 LEFT JOIN?</li> <li>\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442, \u0435\u0441\u043b\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c JOIN \u0431\u0435\u0437 \u0443\u0441\u043b\u043e\u0432\u0438\u044f ON?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 RIGHT JOIN \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0434\u043a\u043e?</li> <li>\u041a\u0430\u043a JOIN \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u0430?</li> <li>\u041c\u043e\u0436\u043d\u043e \u043b\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0431\u0435\u0437 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u043a\u043b\u044e\u0447\u0430?</li> </ol>"},{"location":"Chapter_2/2.3-aggregate-functions/","title":"\u0410\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 SQL","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#1","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u0410\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u2014 \u044d\u0442\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li> <p>\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043d\u0430\u0431\u043e\u0440 \u0441\u0442\u0440\u043e\u043a</p> </li> <li> <p>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0434\u043d\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435</p> </li> </ul> <p>\u0412 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439, \u0430\u0433\u0440\u0435\u0433\u0430\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430\u0434 \u0433\u0440\u0443\u043f\u043f\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445, \u0430 \u043d\u0435 \u043d\u0430\u0434 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#2","title":"2. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"\u0424\u0443\u043d\u043a\u0446\u0438\u044f \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 COUNT() \u041f\u043e\u0434\u0441\u0447\u0451\u0442 \u0441\u0442\u0440\u043e\u043a SUM() \u0421\u0443\u043c\u043c\u0430 AVG() \u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 MIN() \u041c\u0438\u043d\u0438\u043c\u0443\u043c MAX() \u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c"},{"location":"Chapter_2/2.3-aggregate-functions/#3","title":"3. \u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432","text":"<pre><code>CREATE TABLE employees (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    salary NUMERIC,\n    department_id INT\n);\n</code></pre>"},{"location":"Chapter_2/2.3-aggregate-functions/#4-count","title":"4. COUNT()","text":""},{"location":"Chapter_2/2.3-aggregate-functions/#count","title":"COUNT(*)","text":"<pre><code>SELECT COUNT(*)\nFROM employees;\n</code></pre> <p>\u0421\u0447\u0438\u0442\u0430\u0435\u0442 \u0432\u0441\u0435 \u0441\u0442\u0440\u043e\u043a\u0438.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#countcolumn","title":"COUNT(column)","text":"<pre><code>SELECT COUNT(department_id)\nFROM employees;\n</code></pre> <p>\u041d\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 NULL.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#countdistinct","title":"COUNT(DISTINCT)","text":"<pre><code>SELECT COUNT(DISTINCT department_id)\nFROM employees;\n</code></pre> <p>\u0421\u0447\u0438\u0442\u0430\u0435\u0442 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#5-sum","title":"5. SUM()","text":"<pre><code>SELECT SUM(salary)\nFROM employees;\n</code></pre> <p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0443\u043c\u043c\u0443 \u0432\u0441\u0435\u0445 \u0437\u0430\u0440\u043f\u043b\u0430\u0442.</p> <p>NULL \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#6-avg","title":"6. AVG()","text":"<pre><code>SELECT AVG(salary)\nFROM employees; \n</code></pre> <p>\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.</p> <p>\u0412 PostgreSQL \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0442\u0438\u043f numeric.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#7-min-max","title":"7. MIN() \u0438 MAX()","text":"<pre><code>SELECT MIN(salary), MAX(salary)\nFROM employees;\n</code></pre> <p>\u0420\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0441:</p> <ul> <li>\u0447\u0438\u0441\u043b\u0430\u043c\u0438</li> <li>\u0434\u0430\u0442\u0430\u043c\u0438</li> <li>\u0441\u0442\u0440\u043e\u043a\u0430\u043c\u0438 (\u043b\u0435\u043a\u0441\u0438\u043a\u043e\u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438)</li> </ul>"},{"location":"Chapter_2/2.3-aggregate-functions/#8-group-by","title":"8. GROUP BY \u2014 \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430","text":"<p>\u0410\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0441 <code>GROUP BY</code>.</p> <pre><code>SELECT department_id, COUNT(*)\nFROM employees\nGROUP BY department_id;\n</code></pre> <p>\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043e \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0432.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#9","title":"9. \u041b\u043e\u0433\u0438\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430","text":"<p>SQL \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435:</p> <ul> <li>FROM</li> <li>JOIN</li> <li>WHERE</li> <li>GROUP BY</li> <li>HAVING</li> <li>SELECT</li> <li>ORDER BY</li> </ul> <p>\u041f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u044d\u0442\u043e\u0433\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e \u0434\u043b\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0432.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#10-having","title":"10. HAVING \u2014 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0433\u0440\u0443\u043f\u043f","text":"<p><code>WHERE</code> \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0434\u043e \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438. <code>HAVING</code> \u2014 \u043f\u043e\u0441\u043b\u0435.</p> <pre><code>SELECT department_id, COUNT(*)\nFROM employees\nGROUP BY department_id\nHAVING COUNT(*) &gt; 3;\n</code></pre> <p>\u041e\u0442\u0431\u0438\u0440\u0430\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0433\u0440\u0443\u043f\u043f\u044b \u0441 \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c 3 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c\u0438.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#11","title":"11. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u0430 \u0431\u0435\u0437 GROUP BY \u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u043b\u043e\u0433\u0438\u043a\u0438 \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438 COUNT(column) \u0432\u043c\u0435\u0441\u0442\u043e COUNT(*) \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0434\u0441\u0447\u0451\u0442 WHERE \u0432\u043c\u0435\u0441\u0442\u043e HAVING \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0434\u043e \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438 \u041d\u0435\u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 NULL \u0418\u0441\u043a\u0430\u0436\u0435\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430"},{"location":"Chapter_2/2.3-aggregate-functions/#12","title":"12. \u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440","text":"<pre><code>SELECT \n    department_id,\n    COUNT(*) AS total_employees,\n    AVG(salary) AS avg_salary,\n    MAX(salary) AS max_salary\nFROM employees\nGROUP BY department_id\nHAVING AVG(salary) &gt; 50000\nORDER BY avg_salary DESC;\n</code></pre> <p>\u0417\u0434\u0435\u0441\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f:</p> <ul> <li>\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430</li> <li>\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0432</li> <li>\u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u0443</li> <li>\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430</li> </ul>"},{"location":"Chapter_2/2.3-aggregate-functions/#13-join","title":"13. \u0410\u0433\u0440\u0435\u0433\u0430\u0442\u044b \u0438 JOIN","text":"<pre><code>SELECT d.name, COUNT(e.id)\nFROM departments d\nLEFT JOIN employees e\n    ON e.department_id = d.id\nGROUP BY d.name;\n</code></pre> <p>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043f\u043e \u043e\u0442\u0434\u0435\u043b\u0430\u043c.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#14-null","title":"14. NULL \u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u044b","text":"\u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 NULL COUNT(*) \u0414\u0430 COUNT(column) \u041d\u0435\u0442 SUM \u041d\u0435\u0442 AVG \u041d\u0435\u0442 MIN / MAX \u041d\u0435\u0442"},{"location":"Chapter_2/2.3-aggregate-functions/#15","title":"15. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<ul> <li>\u0410\u0433\u0440\u0435\u0433\u0430\u0442\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043d\u0430\u0434 \u0433\u0440\u0443\u043f\u043f\u0430\u043c\u0438 \u0441\u0442\u0440\u043e\u043a</li> <li>\u041f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0441 <code>GROUP BY</code></li> <li><code>HAVING</code> \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u041e\u0448\u0438\u0431\u043a\u0438 \u0447\u0430\u0449\u0435 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435, \u0430 \u043d\u0435 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0435</li> </ul>"},{"location":"Chapter_2/2.3-aggregate-functions/#no1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21161","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 <code>sales</code>:</p> <pre><code>id SERIAL PRIMARY KEY,\nproduct_name TEXT,\ncategory TEXT,\nprice NUMERIC,\nquantity INT,\nsale_date DATE\n</code></pre> <p>\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b:</p> <ul> <li>\u041e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0434\u0430\u0436.</li> <li>\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436 (price * quantity).</li> <li>\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0446\u0435\u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0430.</li> <li>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430.</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439.</li> </ul>"},{"location":"Chapter_2/2.3-aggregate-functions/#no2","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21162","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0443 <code>sales</code>, \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b:</p> <ul> <li>\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c.</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0434\u0430\u0436 \u043f\u043e \u0434\u0430\u0442\u0430\u043c.</li> <li>\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438, \u0433\u0434\u0435 \u043e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436 \u0431\u043e\u043b\u044c\u0448\u0435 100 000.</li> <li>\u0414\u0430\u0442\u044b, \u043a\u043e\u0433\u0434\u0430 \u0431\u044b\u043b\u043e \u043f\u0440\u043e\u0434\u0430\u043d\u043e \u0431\u043e\u043b\u0435\u0435 10 \u0435\u0434\u0438\u043d\u0438\u0446 \u0442\u043e\u0432\u0430\u0440\u0430.</li> <li>\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u043e\u0439.</li> </ul> <p>\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c HAVING \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0432 \u0434\u0432\u0443\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445.</p>"},{"location":"Chapter_2/2.3-aggregate-functions/#no3","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u21163","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>clients</li> <li>orders</li> <li>order_items</li> </ul> <p>\u0421\u0432\u044f\u0437\u0438: - \u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 - \u0437\u0430\u043a\u0430\u0437 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0437\u0438\u0446\u0438\u0439</p> <p>\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b:</p> <ul> <li>\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.</li> <li>\u041a\u043b\u0438\u0435\u043d\u0442\u044b, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439.</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0443 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430.</li> <li>\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u0431\u0435\u0437 \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</li> <li>\u0422\u043e\u043f-3 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u043e \u0441\u0443\u043c\u043c\u0435 \u043f\u043e\u043a\u0443\u043f\u043e\u043a.</li> </ul> <p>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JOIN</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435</li> <li>\u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 COUNT(*) \u0438 COUNT(column)</li> </ul>"},{"location":"Chapter_2/2.3-aggregate-functions/#_1","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0438 \u0447\u0435\u043c \u043e\u043d\u0430 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u043e\u0431\u044b\u0447\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 <code>COUNT(*)</code> \u0438 <code>COUNT(column)</code>?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0432 <code>SELECT</code>, \u0435\u0441\u043b\u0438 \u043e\u043d \u043d\u0435 \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 <code>GROUP BY</code> \u0438 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u043c?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f <code>WHERE</code> \u043e\u0442 <code>HAVING</code>?</li> <li>\u041a\u0430\u043a \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0441 <code>NULL</code>?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 <code>LEFT JOIN</code> \u0438 <code>COUNT()</code> \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442?</li> <li>\u041c\u043e\u0436\u043d\u043e \u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435?</li> </ol>"},{"location":"Chapter_2/practic-analytical-samples/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u044f 5. \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0432\u044b\u0431\u043e\u0440\u043a\u0438 (GROUP BY, HAVING, \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b, \u0431\u0430\u0437\u043e\u0432\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430)","text":"<p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p> <p>\u0422\u0438\u043f: \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435</p> <p>\u0426\u0435\u043b\u044c: \u041d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0432\u044b\u0431\u043e\u0440\u043a\u0438; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c GROUP BY \u0438 HAVING; \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0435; \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 (\u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0432 \u0433\u0440\u0443\u043f\u043f\u0435 \u0438 \u0442.\u0434.); \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435. </p>"},{"location":"Chapter_2/practic-analytical-samples/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c","text":"<pre><code>CREATE TABLE clients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL\n);\n\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    client_id INT REFERENCES clients(id),\n    order_date DATE\n);\n\nCREATE TABLE order_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT REFERENCES orders(id),\n    product_name TEXT,\n    quantity INT,\n    price NUMERIC\n);\n</code></pre> <p>\u0422\u0430\u0431\u043b\u0438\u0446\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</p>"},{"location":"Chapter_2/practic-analytical-samples/#1","title":"\u042d\u0442\u0430\u043f 1. \u0411\u0430\u0437\u043e\u0432\u0430\u044f \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430","text":""},{"location":"Chapter_2/practic-analytical-samples/#1_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</p>"},{"location":"Chapter_2/practic-analytical-samples/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u043f\u0440\u043e\u0434\u0430\u0436.</p> <p>\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430:</p> <pre><code>SUM(quantity * price)\n</code></pre>"},{"location":"Chapter_2/practic-analytical-samples/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0441\u0443\u043c\u043c\u0443 \u043e\u0434\u043d\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430.</p>"},{"location":"Chapter_2/practic-analytical-samples/#2-group-by","title":"\u042d\u0442\u0430\u043f 2. GROUP BY","text":""},{"location":"Chapter_2/practic-analytical-samples/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.</p>"},{"location":"Chapter_2/practic-analytical-samples/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.</p>"},{"location":"Chapter_2/practic-analytical-samples/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 100 000.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c HAVING.</p>"},{"location":"Chapter_2/practic-analytical-samples/#3_1","title":"\u042d\u0442\u0430\u043f 3. \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0435","text":""},{"location":"Chapter_2/practic-analytical-samples/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0432\u0441\u0435\u043c \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441.</p>"},{"location":"Chapter_2/practic-analytical-samples/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u0437\u0430\u043a\u0430\u0437 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0443\u043c\u043c\u043e\u0439.</p>"},{"location":"Chapter_2/practic-analytical-samples/#9","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 9","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0441 \u043d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u043e\u0431\u0449\u0435\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u043e\u0439.</p>"},{"location":"Chapter_2/practic-analytical-samples/#4-join","title":"\u042d\u0442\u0430\u043f 4. \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u0441 JOIN","text":""},{"location":"Chapter_2/practic-analytical-samples/#10","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 10","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u0424\u0418\u041e \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443</li> <li>\u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c:</p> <p>1 JOIN</p> <p>2 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438</p>"},{"location":"Chapter_2/practic-analytical-samples/#5_1","title":"\u042d\u0442\u0430\u043f 5. \u0421\u043b\u043e\u0436\u043d\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0432\u044b\u0431\u043e\u0440\u043a\u0430","text":""},{"location":"Chapter_2/practic-analytical-samples/#11","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 11","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e, \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0441\u0443\u043c\u043c\u0435 \u043f\u043e\u043a\u0443\u043f\u043e\u043a.</p>"},{"location":"Chapter_2/practic-analytical-samples/#12","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 12","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u043b\u0438\u0441\u044c \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c \u0432 5 \u0437\u0430\u043a\u0430\u0437\u0430\u0445.</p>"},{"location":"Chapter_2/practic-analytical-samples/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f (\u043d\u0430 \u043e\u0446\u0435\u043d\u043a\u0443)","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0443\u043c\u043c\u043e\u0439 \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u041d\u0430\u0439\u0442\u0438 \u043c\u0435\u0441\u044f\u0446 \u0441 \u043d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u043e\u0439.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0431\u0435\u0437 \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u041d\u0430\u0439\u0442\u0438 \u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0431\u043e\u043b\u0435\u0435 \u0433\u043e\u0434\u0430 \u043d\u0430\u0437\u0430\u0434.</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 6. \u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0435 SELECT-\u0437\u0430\u043f\u0440\u043e\u0441\u044b","text":"<p>\u0422\u0438\u043f: \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p> <p>\u0426\u0435\u043b\u044c: \u041d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 SELECT-\u0437\u0430\u043f\u0440\u043e\u0441\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u044e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u0431\u043b\u0438\u0446; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438; \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b; \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0434\u043e \u0438 \u043f\u043e\u0441\u043b\u0435 \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438; \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 NULL.</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u0447\u0451\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</p> <pre><code>CREATE TABLE clients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    city TEXT\n);\n\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    client_id INT REFERENCES clients(id),\n    order_date DATE\n);\n\nCREATE TABLE order_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT REFERENCES orders(id),\n    product_name TEXT,\n    quantity INT,\n    price NUMERIC\n);\n</code></pre> <p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 10-20+ \u0441\u0442\u0440\u043e\u043a \u0434\u0430\u043d\u043d\u044b\u043c\u0438</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u0424\u0418\u041e \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> </ul> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:</p> <ul> <li>\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 JOIN</li> <li>GROUP BY</li> </ul>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432:</p> <ul> <li>\u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 100 000</li> <li>\u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0441\u0443\u043c\u043c\u0435</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c HAVING.</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0447\u044c\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0432\u0441\u0435\u043c \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 HAVING \u0438\u043b\u0438 WHERE.</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u0437\u0430\u043a\u0430\u0437 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0443\u043c\u043c\u043e\u0439.</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0437\u0430\u043a\u0430\u0437 \u0434\u043e\u0440\u043e\u0436\u0435 50 000.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c EXISTS.</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: <code>LEFT JOIN</code> + <code>IS NULL</code> \u0438\u043b\u0438 <code>NOT EXISTS</code></p> <p>\u0412 \u043e\u0442\u0447\u0451\u0442\u0435 \u0441\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0434\u0432\u0430 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435</p> <p>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7</p> <p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u0433\u043e\u0440\u043e\u0434</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a</li> </ul> <p>\u0423\u0441\u043b\u043e\u0432\u0438\u044f:</p> <ul> <li>\u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438</li> <li>\u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0441\u0443\u043c\u043c\u0435</li> </ul>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u0434\u0430\u0442\u0443 \u0435\u0433\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430</li> <li>\u0441\u0443\u043c\u043c\u0443 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430</li> </ul> <p>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u043b\u0438 JOIN \u0441 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#9","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 9","text":"<p>\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0434\u0432\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430:</p> <ul> <li>\u0441 LEFT JOIN</li> <li>\u0441 INNER JOIN</li> </ul> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u0435.</p>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#10","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 10","text":"<p>\u0418\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441</p> <pre><code>SELECT c.full_name, SUM(quantity * price)\nFROM clients c\nJOIN orders o ON o.client_id = c.id\nJOIN order_items oi ON oi.order_id = o.id\nWHERE SUM(quantity * price) &gt; 100000\nGROUP BY c.full_name;\n</code></pre>"},{"location":"Chapter_2/practic-complex-SELECT-queries/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0443\u043c\u043c\u043e\u0439 \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u041d\u0430\u0439\u0442\u0438 \u0433\u043e\u0440\u043e\u0434 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u043e\u0439.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u041d\u0430\u0439\u0442\u0438 \u0442\u043e\u0432\u0430\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u043d\u0451\u0441 \u043d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0443\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0437\u0430\u043a\u0430\u0437\u044b \u0431\u044b\u043b\u0438 \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u043c\u0435\u0441\u044f\u0446\u044b.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432, \u0447\u0435\u043c \u0441\u0440\u0435\u0434\u043d\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.</p>"},{"location":"Chapter_2/practic-queries-to-data/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 4. \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u0434\u0430\u043d\u043d\u044b\u043c (SELECT)","text":"<p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430 (90 \u043c\u0438\u043d\u0443\u0442)</p> <p>\u0422\u0438\u043f: \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435</p> <p>\u0426\u0435\u043b\u044c \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0432\u044b\u0431\u043e\u0440\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u043e\u0434\u043d\u043e\u0439 \u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446; \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 (WHERE); \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 (ORDER BY); \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0432\u044b\u0431\u043e\u0440\u043a\u0438 (LIMIT); \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 (IN, BETWEEN, LIKE, IS NULL); \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446 (JOIN)</p>"},{"location":"Chapter_2/practic-queries-to-data/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0411\u0414","text":"<pre><code>CREATE TABLE groups (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL UNIQUE\n);\n\nCREATE TABLE students (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    birth_date DATE,\n    group_id INT REFERENCES groups(id),\n    scholarship NUMERIC\n);\n\nCREATE TABLE teachers (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    department TEXT\n);\n</code></pre> <p>\u041f\u0435\u0440\u0435\u0434 \u043d\u0430\u0447\u0430\u043b\u043e\u043c \u0437\u0430\u043d\u044f\u0442\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 (10\u201320 \u0441\u0442\u0440\u043e\u043a).</p>"},{"location":"Chapter_2/practic-queries-to-data/#1","title":"\u042d\u0442\u0430\u043f 1. \u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u0432\u044b\u0431\u043e\u0440\u043a\u0438","text":""},{"location":"Chapter_2/practic-queries-to-data/#1_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432.</p>"},{"location":"Chapter_2/practic-queries-to-data/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u0424\u0418\u041e</li> <li>\u0434\u0430\u0442\u0443 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_2/practic-queries-to-data/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441 \u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u0435\u0439 \u0431\u043e\u043b\u044c\u0448\u0435 3000.</p>"},{"location":"Chapter_2/practic-queries-to-data/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0431\u0435\u0437 \u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u0438.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c IS NULL.</p>"},{"location":"Chapter_2/practic-queries-to-data/#2_1","title":"\u042d\u0442\u0430\u043f 2. \u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b","text":""},{"location":"Chapter_2/practic-queries-to-data/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432:</p> <ul> <li>\u0438\u0437 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u044b</li> <li>\u0441\u043e \u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u0435\u0439 \u0431\u043e\u043b\u044c\u0448\u0435 2500</li> </ul>"},{"location":"Chapter_2/practic-queries-to-data/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432, \u0440\u043e\u0434\u0438\u0432\u0448\u0438\u0445\u0441\u044f:</p> <ul> <li>\u043c\u0435\u0436\u0434\u0443 2004 \u0438 2006 \u0433\u043e\u0434\u0430\u043c\u0438.</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c BETWEEN.</li> </ul>"},{"location":"Chapter_2/practic-queries-to-data/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432:</p> <ul> <li>\u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u00ab\u0418\u00bb.</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c LIKE.</li> </ul>"},{"location":"Chapter_2/practic-queries-to-data/#3_1","title":"\u042d\u0442\u0430\u043f 3. \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435","text":""},{"location":"Chapter_2/practic-queries-to-data/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432:</p> <ul> <li>\u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u0438 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e.</li> </ul>"},{"location":"Chapter_2/practic-queries-to-data/#9","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 9","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 5 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441 \u0441\u0430\u043c\u043e\u0439 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u0435\u0439.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ORDER BY + LIMIT.</p>"},{"location":"Chapter_2/practic-queries-to-data/#10","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 10","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 3\u20137 \u0437\u0430\u043f\u0438\u0441\u0438 (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c OFFSET).</p>"},{"location":"Chapter_2/practic-queries-to-data/#4-join","title":"\u042d\u0442\u0430\u043f 4. JOIN (\u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435)","text":""},{"location":"Chapter_2/practic-queries-to-data/#11","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 11","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u0424\u0418\u041e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430</li> <li>\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JOIN.</p>"},{"location":"Chapter_2/practic-queries-to-data/#12","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 12","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0435\u0445, \u0443 \u043a\u043e\u0433\u043e \u043d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f\u044b.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c LEFT JOIN.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 INNER \u0438 LEFT JOIN.</p>"},{"location":"Chapter_2/practic-queries-to-data/#5_1","title":"\u042d\u0442\u0430\u043f 5. \u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441","text":""},{"location":"Chapter_2/practic-queries-to-data/#13","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 13","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u0424\u0418\u041e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430</li> <li>\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b</li> <li>\u0432\u043e\u0437\u0440\u0430\u0441\u0442 (\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c)</li> <li>\u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u044e</li> </ul> <p>\u0423\u0441\u043b\u043e\u0432\u0438\u044f:</p> <ul> <li>\u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u044f \u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0435</li> <li>\u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0443</li> </ul>"},{"location":"Chapter_2/practic-queries-to-data/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u041d\u0430\u0439\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u0435\u0439.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u041d\u0430\u0439\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441\u0442\u0430\u0440\u0448\u0435 20 \u043b\u0435\u0442.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u041d\u0430\u0439\u0442\u0438 \u0433\u0440\u0443\u043f\u043f\u044b \u0431\u0435\u0437 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u041d\u0430\u0439\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432, \u0447\u044c\u0451 \u0438\u043c\u044f \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c \u0438\u0437 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u041d\u0430\u0439\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0442\u0438\u043f\u0435\u043d\u0434\u0438\u044f \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0433\u0440\u0443\u043f\u043f\u0435.</p>"},{"location":"Chapter_3/3.1-subqueries/","title":"\u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b","text":""},{"location":"Chapter_3/3.1-subqueries/#1","title":"1. \u041f\u043e\u043d\u044f\u0442\u0438\u0435 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u0430","text":"<p>\u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u2014 \u044d\u0442\u043e \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0439 SELECT, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0434\u0440\u0443\u0433\u043e\u0433\u043e SQL-\u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430.</p> <p>\u041e\u043d \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0449\u0451\u043d \u0432:</p> <ul> <li><code>WHERE</code></li> <li><code>SELECT</code></li> <li><code>FROM</code></li> <li><code>HAVING</code></li> <li><code>INSERT</code></li> <li><code>UPDATE</code></li> <li><code>DELETE</code></li> </ul> <p>\u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u0447\u043d\u043e\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435.</p>"},{"location":"Chapter_3/3.1-subqueries/#2","title":"2. \u041a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432","text":""},{"location":"Chapter_3/3.1-subqueries/#_2","title":"\u041f\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445 \u0441\u0442\u0440\u043e\u043a","text":"\u0422\u0438\u043f \u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u0421\u043a\u0430\u043b\u044f\u0440\u043d\u044b\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0434\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u0440\u043e\u043a \u0422\u0430\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430"},{"location":"Chapter_3/3.1-subqueries/#_3","title":"\u041f\u043e \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430","text":"\u0422\u0438\u043f \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u041a\u043e\u0440\u0440\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430"},{"location":"Chapter_3/3.1-subqueries/#3","title":"3. \u0421\u043a\u0430\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u043e\u0434\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.</p> <pre><code>SELECT full_name, salary\nFROM employees\nWHERE salary &gt; (\n    SELECT AVG(salary)\n    FROM employees\n);\n</code></pre> <p>\u041b\u043e\u0433\u0438\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f:</p> <ul> <li> <p>\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0440\u0435\u0434\u043d\u044f\u044f \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430.</p> </li> <li> <p>\u0417\u0430\u0442\u0435\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432\u043d\u0435\u0448\u043d\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.</p> </li> </ul> <p>\u0415\u0441\u043b\u0438 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u2014 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0430.</p>"},{"location":"Chapter_3/3.1-subqueries/#4","title":"4. \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0441 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b:</p> <ul> <li>IN</li> <li>ANY</li> <li>ALL</li> </ul>"},{"location":"Chapter_3/3.1-subqueries/#in","title":"IN","text":"<pre><code>SELECT full_name\nFROM employees\nWHERE department_id IN (\n    SELECT id\n    FROM departments\n    WHERE name = 'IT'\n);\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u043d\u043e\u0441\u0442\u044c \u043a \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439.</p>"},{"location":"Chapter_3/3.1-subqueries/#any-all","title":"ANY / ALL","text":"<pre><code>WHERE salary &gt; ALL (subquery)\n</code></pre> <p><code>ALL</code> \u2014 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439</p> <p><code>ANY</code> \u2014 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0445\u043e\u0442\u044f \u0431\u044b \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f</p>"},{"location":"Chapter_3/3.1-subqueries/#5-exists","title":"5. EXISTS","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438.</p> <pre><code>SELECT full_name\nFROM clients c\nWHERE EXISTS (\n    SELECT 1\n    FROM orders o\n    WHERE o.client_id = c.id\n);\n</code></pre> <p>\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438:</p> <ul> <li>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 TRUE \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438.</li> <li>\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.</li> <li>\u0427\u0430\u0441\u0442\u043e \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0435\u0435 <code>IN</code>.</li> </ul>"},{"location":"Chapter_3/3.1-subqueries/#6","title":"6. \u041a\u043e\u0440\u0440\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b","text":"<p>\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e.</p> <pre><code>SELECT c.full_name,\n       (SELECT COUNT(*)\n        FROM orders o\n        WHERE o.client_id = c.id) AS order_count\nFROM clients c;\n</code></pre> <p>\u041c\u0435\u0445\u0430\u043d\u0438\u0437\u043c:</p> <ul> <li>\u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 clients \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441</li> </ul> <p>\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u044c \u043a \u0443\u0445\u0443\u0434\u0448\u0435\u043d\u0438\u044e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438.</p>"},{"location":"Chapter_3/3.1-subqueries/#7-from","title":"7. \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 FROM (\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430)","text":"<pre><code>SELECT department_id, avg_salary\nFROM (\n    SELECT department_id, AVG(salary) AS avg_salary\n    FROM employees\n    GROUP BY department_id\n) t\nWHERE avg_salary &gt; 50000;\n</code></pre> <p>\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438:</p> <ul> <li>\u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442</li> <li>\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c (<code>AS t</code>)</li> </ul>"},{"location":"Chapter_3/3.1-subqueries/#8-select","title":"8. \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 SELECT","text":"<pre><code>SELECT full_name,\n       (SELECT AVG(salary)\n        FROM employees) AS avg_salary\nFROM employees;\n</code></pre> <p>\u0412\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438 \u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0435\u0433\u043e \u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435.</p>"},{"location":"Chapter_3/3.1-subqueries/#9-dml","title":"9. \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432 DML","text":""},{"location":"Chapter_3/3.1-subqueries/#insert","title":"\u0412 INSERT","text":"<pre><code>INSERT INTO archive_employees\nSELECT *\nFROM employees\nWHERE salary &lt; 30000;\n</code></pre>"},{"location":"Chapter_3/3.1-subqueries/#update","title":"\u0412 UPDATE","text":"<pre><code>UPDATE employees\nSET salary = salary * 1.1\nWHERE department_id IN (\n    SELECT id\n    FROM departments\n    WHERE name = 'IT'\n);\n</code></pre>"},{"location":"Chapter_3/3.1-subqueries/#10-vs-join","title":"10. \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 vs JOIN","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u043b\u0443\u0447\u0448\u0435 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441:</p> <ul> <li> <p>\u043f\u0440\u0438 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0438 \u0441 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u043c</p> </li> <li> <p>\u043f\u0440\u0438 \u043b\u043e\u0433\u0438\u043a\u0435 \u00ab\u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e\u00bb</p> </li> <li> <p>\u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f</p> </li> </ul> <p>\u041a\u043e\u0433\u0434\u0430 \u043b\u0443\u0447\u0448\u0435 JOIN:</p> <ul> <li> <p>\u043f\u0440\u0438 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446</p> </li> <li> <p>\u043f\u0440\u0438 \u0432\u044b\u0432\u043e\u0434\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446</p> </li> <li> <p>\u043f\u0440\u0438 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0435</p> </li> </ul> <p>\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 PostgreSQL \u0447\u0430\u0441\u0442\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 JOIN.</p>"},{"location":"Chapter_3/3.1-subqueries/#11","title":"11. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0441\u043a\u0430\u043b\u044f\u0440\u043d\u044b\u0439 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u0430 \u0431\u0435\u0437 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u043b\u043e\u0433\u0438\u043a\u0438 \u041f\u0443\u0442\u0430\u043d\u0438\u0446\u0430 EXISTS \u0438 IN \u0420\u0430\u0437\u043b\u0438\u0447\u0438\u0435 \u0432 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435 \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u041a\u043e\u0440\u0440\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441"},{"location":"Chapter_3/3.1-subqueries/#12","title":"12. \u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f","text":"<p>\u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438:</p> <ul> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 (\u0435\u0441\u043b\u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439)</li> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432\u043d\u0435\u0448\u043d\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441</li> <li>\u041f\u0440\u0438 \u043a\u043e\u0440\u0440\u0435\u043b\u044f\u0446\u0438\u0438 \u2014 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u043e</li> </ul>"},{"location":"Chapter_3/3.1-subqueries/#13","title":"13. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b:</p> <ul> <li>\u0440\u0430\u0441\u0448\u0438\u0440\u044f\u044e\u0442 \u0432\u044b\u0440\u0430\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c SQL</li> <li>\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b</li> <li>\u0431\u044b\u0432\u0430\u044e\u0442 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u043c\u0438 \u0438 \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u043c\u0438</li> <li>\u043c\u043e\u0433\u0443\u0442 \u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</li> <li>\u0447\u0430\u0441\u0442\u043e \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u043d\u044b \u0447\u0435\u0440\u0435\u0437 JOIN</li> </ul>"},{"location":"Chapter_3/3.1-subqueries/#_4","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u0441 \u043c\u043e\u0434\u0435\u043b\u044c\u044e:</p> <ul> <li>clients</li> <li>orders</li> <li>order_items</li> </ul>"},{"location":"Chapter_3/3.1-subqueries/#1_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1.","text":"<ul> <li>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0432\u0441\u0435\u043c \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c.</li> <li>\u041d\u0430\u0439\u0442\u0438 \u0437\u0430\u043a\u0430\u0437 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0443\u043c\u043c\u043e\u0439.</li> <li>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0447\u0435\u0439 \u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a \u0432\u044b\u0448\u0435 \u043e\u0431\u0449\u0435\u0433\u043e \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e \u0447\u0435\u043a\u0430.</li> </ul> <p>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 WHERE \u0438\u043b\u0438 HAVING.</p>"},{"location":"Chapter_3/3.1-subqueries/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2.","text":"<ul> <li>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0438\u0437 \u0433\u043e\u0440\u043e\u0434\u043e\u0432, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b \u0431\u043e\u043b\u0435\u0435 100 000.</li> <li>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0447\u044c\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0443 \u0432\u0441\u0435\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0438\u0437 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430 (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ALL).</li> <li>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u0434\u043e\u0440\u043e\u0436\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430 \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ANY).</li> </ul> <p>\u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 ANY \u0438 ALL.</p>"},{"location":"Chapter_3/3.1-subqueries/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3.","text":"<ul> <li>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b.</li> <li>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</li> <li>\u041f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u043e\u0431\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0447\u0435\u0440\u0435\u0437 LEFT JOIN.</li> </ul> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0438 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c.</p>"},{"location":"Chapter_3/3.1-subqueries/#4_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4.","text":"<p>\u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 (\u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 SELECT)</li> </ul> <p>\u041f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 \u0447\u0435\u0440\u0435\u0437 JOIN + GROUP BY.</p> <p>\u0412\u043e\u043f\u0440\u043e\u0441: \u043a\u0430\u043a\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0447\u0438\u0442\u0430\u0431\u0435\u043b\u044c\u043d\u044b\u0439, \u043a\u0430\u043a\u043e\u0439 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u0435\u0435 \u0438 \u043f\u043e\u0447\u0435\u043c\u0443?</p>"},{"location":"Chapter_3/3.1-subqueries/#_5","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0438 \u0432 \u043a\u0430\u043a\u0438\u0445 \u0447\u0430\u0441\u0442\u044f\u0445 SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 \u0441\u043a\u0430\u043b\u044f\u0440\u043d\u044b\u043c \u0438 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f IN \u043e\u0442 EXISTS?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u043a\u043e\u0440\u0440\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 ANY \u0438 ALL?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0447\u0430\u0441\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 JOIN?</li> <li>\u0412 \u043a\u0430\u043a\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441?</li> </ol>"},{"location":"Chapter_3/3.2-CTE/","title":"CTE (Common Table Expressions) \u2014 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f WITH","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_3/3.2-CTE/#1-cte","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 CTE","text":"<p>CTE (Common Table Expression) \u2014 \u044d\u0442\u043e \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u043c\u044b\u0439 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 WITH.</p> <p>CTE \u2014 \u044d\u0442\u043e \u00ab\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0432\u043d\u0443\u0442\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u00bb, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_3/3.2-CTE/#cte","title":"\u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u0435\u043d CTE","text":"<p>CTE \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0443\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u044f \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u0438 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> <li>\u0440\u0430\u0437\u0431\u0438\u0435\u043d\u0438\u044f \u043b\u043e\u0433\u0438\u043a\u0438 \u043d\u0430 \u044d\u0442\u0430\u043f\u044b</li> <li>\u0437\u0430\u043c\u0435\u043d\u044b \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> <li>\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430</li> <li>\u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> </ul>"},{"location":"Chapter_3/3.2-CTE/#3","title":"3. \u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441","text":"<pre><code>WITH cte_name AS (\n    SELECT ...\n)\nSELECT *\nFROM cte_name;\n</code></pre>"},{"location":"Chapter_3/3.2-CTE/#4","title":"4. \u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u044b\u0448\u0435 100 000.</p> <p>\u0411\u0435\u0437 CTE:</p> <pre><code>SELECT c.full_name, SUM(oi.quantity * oi.price)\nFROM clients c\nJOIN orders o ON o.client_id = c.id\nJOIN order_items oi ON oi.order_id = o.id\nGROUP BY c.full_name\nHAVING SUM(oi.quantity * oi.price) &gt; 100000;\n</code></pre> <p>\u0421 CTE:</p> <pre><code>WITH client_totals AS (\n    SELECT c.id, c.full_name,\n           SUM(oi.quantity * oi.price) AS total\n    FROM clients c\n    JOIN orders o ON o.client_id = c.id\n    JOIN order_items oi ON oi.order_id = o.id\n    GROUP BY c.id, c.full_name\n)\nSELECT *\nFROM client_totals\nWHERE total &gt; 100000;\n</code></pre> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e \u2014 \u043b\u043e\u0433\u0438\u043a\u0430 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0430 \u043d\u0430 \u044d\u0442\u0430\u043f\u044b.</p>"},{"location":"Chapter_3/3.2-CTE/#5-cte","title":"5. \u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e CTE","text":"<p>\u041c\u043e\u0436\u043d\u043e \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439:</p> <pre><code>WITH\norder_totals AS (\n    SELECT order_id,\n           SUM(quantity * price) AS total\n    FROM order_items\n    GROUP BY order_id\n),\nclient_totals AS (\n    SELECT o.client_id,\n           SUM(ot.total) AS total\n    FROM orders o\n    JOIN order_totals ot ON ot.order_id = o.id\n    GROUP BY o.client_id\n)\nSELECT *\nFROM client_totals;\n</code></pre> <p>CTE \u043c\u043e\u0433\u0443\u0442 \u0441\u0441\u044b\u043b\u0430\u0442\u044c\u0441\u044f \u0434\u0440\u0443\u0433 \u043d\u0430 \u0434\u0440\u0443\u0433\u0430.</p>"},{"location":"Chapter_3/3.2-CTE/#6-cte-vs","title":"6. CTE vs \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441","text":"CTE \u041f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0423\u043b\u0443\u0447\u0448\u0430\u0435\u0442 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c \u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u043c \u0438 \u0441\u043b\u043e\u0436\u043d\u044b\u043c \u041b\u043e\u0433\u0438\u043a\u0430 \u043f\u043e \u044d\u0442\u0430\u043f\u0430\u043c \u0412\u0441\u0451 \u0432 \u043e\u0434\u043d\u043e\u043c \u0431\u043b\u043e\u043a\u0435 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u041d\u0435\u0442 \u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u044b\u043c \u041d\u0435\u0442 <p>\u0412 PostgreSQL \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u0447\u0430\u0441\u0442\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 CTE \u043a\u0430\u043a \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441.</p>"},{"location":"Chapter_3/3.2-CTE/#cte-update-delete","title":"CTE \u0432 UPDATE \u0438 DELETE","text":""},{"location":"Chapter_3/3.2-CTE/#update","title":"\u0412 UPDATE","text":"<pre><code>WITH high_value_clients AS (\n    SELECT id\n    FROM clients\n    WHERE city = '\u041c\u043e\u0441\u043a\u0432\u0430'\n)\nUPDATE clients\nSET status = 'VIP'\nWHERE id IN (\n    SELECT id FROM high_value_clients\n);\n</code></pre> <p>\u0412 DELETE</p> <pre><code>WITH old_orders AS (\n    SELECT id\n    FROM orders\n    WHERE order_date &lt; '2020-01-01'\n)\nDELETE FROM orders\nWHERE id IN (\n    SELECT id FROM old_orders\n);\n</code></pre>"},{"location":"Chapter_3/3.2-CTE/#8-cte","title":"8. \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u044b\u0439 CTE","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0438\u0435\u0440\u0430\u0440\u0445\u0438\u0439</li> <li>\u0434\u0435\u0440\u0435\u0432\u044c\u0435\u0432</li> <li>\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440</li> <li>\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439</li> </ul> <p>\u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441:</p> <pre><code>WITH RECURSIVE cte_name AS (\n    -- \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\n    SELECT ...\n    UNION ALL\n    -- \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u044c\n    SELECT ...\n    FROM table\n    JOIN cte_name ON ...\n)\nSELECT * FROM cte_name;\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440: \u0438\u0435\u0440\u0430\u0440\u0445\u0438\u044f \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432</p> <pre><code>WITH RECURSIVE subordinates AS (\n    SELECT id, full_name, manager_id\n    FROM employees\n    WHERE manager_id IS NULL\n\n    UNION ALL\n\n    SELECT e.id, e.full_name, e.manager_id\n    FROM employees e\n    JOIN subordinates s ON e.manager_id = s.id\n)\nSELECT * FROM subordinates;\n</code></pre> <p>\u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043e \u0442\u0435\u0445 \u043f\u043e\u0440, \u043f\u043e\u043a\u0430 \u0435\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438.</p>"},{"location":"Chapter_3/3.2-CTE/#9-cte","title":"9. \u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f CTE","text":"<ol> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f CTE</li> <li>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430</li> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441</li> </ol> <p>\u0412 \u0441\u0442\u0430\u0440\u044b\u0445 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 PostgreSQL CTE \u0432\u0441\u0435\u0433\u0434\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043b\u0441\u044f (\u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c).</p>"},{"location":"Chapter_3/3.2-CTE/#10","title":"10. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u044b \u0417\u0430\u0431\u044b\u0442\u044b\u0439 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u044f \u0431\u0435\u0437 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0411\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0446\u0438\u043a\u043b \u041b\u0438\u0448\u043d\u0435\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 CTE \u0421\u043d\u0438\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u041d\u0435\u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438 CTE \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435"},{"location":"Chapter_3/3.2-CTE/#11-cte","title":"11. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c CTE","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 CTE, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u0437\u0430\u043f\u0440\u043e\u0441 \u0442\u0440\u0443\u0434\u043d\u043e \u0447\u0438\u0442\u0430\u0442\u044c</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043c\u043d\u043e\u0433\u043e\u044d\u0442\u0430\u043f\u043d\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430</li> <li>\u043d\u0443\u0436\u043d\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u044f</li> </ul> <p>\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 CTE, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441</li> <li>\u043d\u0435\u0442 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f</li> <li>\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u0430</li> </ul>"},{"location":"Chapter_3/3.2-CTE/#12","title":"12. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>CTE:</p> <ul> <li>\u0434\u0435\u043b\u0430\u0435\u0442 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0447\u0438\u0442\u0430\u0435\u043c\u044b\u043c\u0438</li> <li>\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u0443\u0435\u0442 SQL</li> <li>\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043c\u043d\u043e\u0433\u043e\u044d\u0442\u0430\u043f\u043d\u0443\u044e \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0443</li> <li>\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b</li> <li>\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u043e\u0449\u043d\u044b\u043c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u043c \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e SQL</li> </ul>"},{"location":"Chapter_3/3.2-CTE/#_1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u0441 \u043c\u043e\u0434\u0435\u043b\u044c\u044e:</p> <ul> <li>clients</li> <li>orders</li> <li>order_items</li> <li>employees (id, full_name, manager_id)</li> </ul>"},{"location":"Chapter_3/3.2-CTE/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c CTE, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.</p> <p>\u0418\u0437 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u0432\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432:</p> <ul> <li>\u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0431\u043e\u043b\u044c\u0448\u0435 100 000</li> <li>\u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0441\u0443\u043c\u043c\u044b</li> </ul> <p>\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0433\u0440\u0435\u0433\u0430\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0432\u043e \u0432\u043d\u0435\u0448\u043d\u0435\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435.</p>"},{"location":"Chapter_3/3.2-CTE/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c CTE order_totals (\u0441\u0443\u043c\u043c\u0430 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0443).</p> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c CTE client_totals (\u0441\u0443\u043c\u043c\u0430 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 order_totals).</p> <p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432:</p> <ul> <li>\u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e.</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 CTE.</p>"},{"location":"Chapter_3/3.2-CTE/#3-cte-update","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. CTE \u0432 UPDATE","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c CTE, \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0449\u0438\u0439 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0441\u0443\u043c\u043c\u043e\u0439 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439.</p> <p>\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u0445 \u0441\u0442\u0430\u0442\u0443\u0441 \u043d\u0430 'VIP'.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u043f\u043e\u0447\u0435\u043c\u0443 CTE \u0443\u0434\u043e\u0431\u043d\u0435\u0435 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435.</p> <p>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u044b\u0439 CTE</p> <pre><code>employees (id, full_name, manager_id)\n</code></pre> <ol> <li> <p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u043f\u043e\u0434\u0447\u0438\u043d\u0451\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f.</p> </li> <li> <p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u044e \u0438\u0435\u0440\u0430\u0440\u0445\u0438\u044e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438.</p> </li> </ol> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>WITH RECURSIVE</code>.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c:</p> <ul> <li>\u0447\u0442\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0431\u0430\u0437\u043e\u0432\u043e\u0439 \u0447\u0430\u0441\u0442\u044c\u044e</li> <li>\u0447\u0442\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u044c\u044e</li> <li>\u043a\u0430\u043a \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435 \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0438</li> </ul>"},{"location":"Chapter_3/3.2-CTE/#_2","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 CTE \u0438 \u0447\u0435\u043c \u043e\u043d \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u0430?</li> <li>\u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 CTE \u0443\u043b\u0443\u0447\u0448\u0430\u0435\u0442 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u0430?</li> <li>\u041c\u043e\u0436\u043d\u043e \u043b\u0438 \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e CTE \u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 \u043e\u0431\u044b\u0447\u043d\u044b\u043c CTE \u0438 \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u044b\u043c?</li> <li>\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 <code>WITH RECURSIVE</code>?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 CTE \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c?</li> <li>\u0412 \u043a\u0430\u043a\u0438\u0445 DML-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0445 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c CTE?</li> <li>\u0412 \u043a\u0430\u043a\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u0440\u043e\u0441 \u0441 CTE?</li> </ol>"},{"location":"Chapter_3/3.3-presentations/","title":"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f (VIEW) \u0432 SQL","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_3/3.3-presentations/#1-view","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (VIEW)","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (VIEW) \u2014 \u044d\u0442\u043e \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430, \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 SELECT-\u0437\u0430\u043f\u0440\u043e\u0441\u0430.</p> <p>VIEW \u043d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442 \u0434\u0430\u043d\u043d\u044b\u0435, \u0430 \u0445\u0440\u0430\u043d\u0438\u0442 SQL-\u0437\u0430\u043f\u0440\u043e\u0441.</p> <p>\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043a \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u0421\u0423\u0411\u0414 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441.</p>"},{"location":"Chapter_3/3.3-presentations/#2","title":"2. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f","text":"<p>VIEW \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0443\u043f\u0440\u043e\u0449\u0435\u043d\u0438\u044f \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> <li>\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043b\u043e\u0433\u0438\u043a\u0438</li> <li>\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c</li> <li>\u0430\u0431\u0441\u0442\u0440\u0430\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0411\u0414</li> <li>\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u043b\u043e\u044f \u043b\u043e\u0433\u0438\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0411\u0414</li> </ul>"},{"location":"Chapter_3/3.3-presentations/#3-view","title":"3. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f VIEW","text":"<pre><code>CREATE VIEW view_name AS\nSELECT ...\nFROM ...\nWHERE ...;\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>CREATE VIEW client_totals AS\nSELECT c.id,\n       c.full_name,\n       SUM(oi.quantity * oi.price) AS total\nFROM clients c\nJOIN orders o ON o.client_id = c.id\nJOIN order_items oi ON oi.order_id = o.id\nGROUP BY c.id, c.full_name;\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u043d\u043e:</p> <pre><code>SELECT *\nFROM client_totals\nWHERE total &gt; 100000;\n</code></pre>"},{"location":"Chapter_3/3.3-presentations/#4-view","title":"4. \u041b\u043e\u0433\u0438\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b VIEW","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f:</p> <pre><code>SELECT * FROM client_totals;\n</code></pre> <p>\u0421\u0423\u0411\u0414 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 SELECT, \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0432 VIEW.</p> <p>VIEW \u2014 \u044d\u0442\u043e \u00ab\u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0439 SELECT\u00bb</p>"},{"location":"Chapter_3/3.3-presentations/#5","title":"5. \u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f","text":"<p>\u0412 PostgreSQL \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u044b\u043c, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043e\u0434\u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430</li> <li>\u043d\u0435\u0442 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0432</li> <li>\u043d\u0435\u0442 GROUP BY</li> <li>\u043d\u0435\u0442 DISTINCT</li> <li>\u043d\u0435\u0442 JOIN</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e VIEW:</p> <pre><code>CREATE VIEW active_clients AS\nSELECT *\nFROM clients\nWHERE status = 'active';\n</code></pre> <p>\u041c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>UPDATE active_clients\nSET city = '\u041c\u043e\u0441\u043a\u0432\u0430'\nWHERE id = 5;\n</code></pre>"},{"location":"Chapter_3/3.3-presentations/#6-view","title":"6. \u041a\u043e\u0433\u0434\u0430 VIEW \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c","text":"<p>\u0415\u0441\u043b\u0438 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>JOIN</li> <li>\u0430\u0433\u0440\u0435\u0433\u0430\u0442\u044b</li> <li>GROUP BY</li> <li>HAVING</li> <li>\u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441\u044b</li> </ul> <p>\u0442\u043e \u043e\u043d\u043e \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_3/3.3-presentations/#7-view-vs-cte","title":"7. VIEW vs CTE","text":"VIEW CTE \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0432 \u0411\u0414 \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043e\u0434\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0412\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u044d\u0442\u0430\u043f\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u041c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u041d\u0435\u0442"},{"location":"Chapter_3/3.3-presentations/#8-view","title":"8. VIEW \u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u041c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f:</p> <pre><code>GRANT SELECT ON client_totals TO analyst;\n</code></pre> <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044e, \u043d\u043e \u043d\u0435 \u043a \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c.</p> <p>\u042d\u0442\u043e \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445.</p>"},{"location":"Chapter_3/3.3-presentations/#9-materialized-view","title":"9. MATERIALIZED VIEW","text":"<p>\u0412 PostgreSQL \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435:</p> <pre><code>CREATE MATERIALIZED VIEW sales_summary AS\nSELECT ...\n</code></pre> <p>\u041e\u0442\u043b\u0438\u0447\u0438\u0435:</p> VIEW MATERIALIZED VIEW \u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0412\u0441\u0435\u0433\u0434\u0430 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b \u0411\u044b\u0441\u0442\u0440\u0435\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0411\u044b\u0441\u0442\u0440\u0435\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 <p>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435:</p> <pre><code>REFRESH MATERIALIZED VIEW sales_summary;\n</code></pre>"},{"location":"Chapter_3/3.3-presentations/#10-view","title":"10. \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 VIEW","text":"<p>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435</p> <pre><code>CREATE OR REPLACE VIEW view_name AS\nSELECT ...\n</code></pre> <p>\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435</p> <pre><code>DROP VIEW view_name;\n</code></pre>"},{"location":"Chapter_3/3.3-presentations/#11","title":"11. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 VIEW \u2014 \u043d\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u041f\u043e\u043f\u044b\u0442\u043a\u0430 UPDATE \u0441\u043b\u043e\u0436\u043d\u043e\u0433\u043e VIEW \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0421\u043b\u043e\u0436\u043d\u044b\u0439 SELECT \u0417\u043b\u043e\u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 VIEW \u0423\u0441\u043b\u043e\u0436\u043d\u0435\u043d\u0438\u0435 \u0441\u0445\u0435\u043c\u044b"},{"location":"Chapter_3/3.3-presentations/#12-view","title":"12. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c VIEW","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u0441\u043b\u043e\u0436\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u043e</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u043e\u0451\u0432</li> <li>\u043d\u0443\u0436\u043d\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f</li> <li>\u043d\u0443\u0436\u043d\u043e \u0441\u043a\u0440\u044b\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0411\u0414</li> </ul> <p>\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0440\u0430\u0437</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</li> <li>\u043b\u043e\u0433\u0438\u043a\u0430 \u0447\u0430\u0441\u0442\u043e \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f</li> </ul>"},{"location":"Chapter_3/3.3-presentations/#13","title":"13. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0430\u0441\u043f\u0435\u043a\u0442","text":"<p>\u0412 \u043f\u0440\u043e\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u043e\u0439 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 VIEW \u0447\u0430\u0441\u0442\u043e:</p> <ul> <li>\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044e\u0442 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u043b\u043e\u0439</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f BI-\u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438</li> <li>\u0441\u043b\u0443\u0436\u0430\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c \u043c\u0435\u0436\u0434\u0443 \u0411\u0414 \u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c</li> </ul>"},{"location":"Chapter_3/3.3-presentations/#14","title":"14. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f:</p> <ul> <li>\u0443\u043f\u0440\u043e\u0449\u0430\u044e\u0442 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 SELECT</li> <li>\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u043b\u043e\u0439 \u0411\u0414</li> <li>\u043f\u043e\u043c\u043e\u0433\u0430\u044e\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c</li> <li>\u043d\u0435 \u0445\u0440\u0430\u043d\u044f\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 (\u043a\u0440\u043e\u043c\u0435 materialized view)</li> <li>\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432\u0430\u0436\u043d\u044b\u043c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u043c \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b</li> </ul>"},{"location":"Chapter_3/3.3-presentations/#_1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c:</p> <ul> <li>clients</li> <li>orders</li> <li>order_items</li> </ul>"},{"location":"Chapter_3/3.3-presentations/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 client_totals, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>id \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u0424\u0418\u041e</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> </ul> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441: \u0432\u044b\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0441\u0443\u043c\u043c\u043e\u0439 \u0431\u043e\u043b\u0435\u0435 100 000.</p> <p>\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0432\u043e \u0432\u043d\u0435\u0448\u043d\u0435\u043c SELECT.</p>"},{"location":"Chapter_3/3.3-presentations/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 client_public_info, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>id</li> <li>\u0424\u0418\u041e</li> <li>\u0433\u043e\u0440\u043e\u0434</li> </ul> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u0435 \u043f\u043e\u0447\u0435\u043c\u0443 \u044d\u0442\u043e \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0435\u0435, \u0447\u0435\u043c \u0434\u0430\u0432\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0435 clients.</p> <p>\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c, \u043a\u0430\u043a\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u044b \u043d\u0435\u043b\u044c\u0437\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435.</p>"},{"location":"Chapter_3/3.3-presentations/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 active_clients \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u043c 'active'.</p> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435:</p> <ul> <li>UPDATE \u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430.</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c \u043b\u0438 \u0438\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u043f\u043e\u0447\u0435\u043c\u0443 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u043e\u0435.</p>"},{"location":"Chapter_3/3.3-presentations/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c MATERIALIZED VIEW sales_summary, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0441\u0443\u043c\u043c\u0443 \u043f\u0440\u043e\u0434\u0430\u0436 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c.</p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f \u043b\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 materialized view.</p> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c REFRESH MATERIALIZED VIEW.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 VIEW \u0438 MATERIALIZED VIEW.</p>"},{"location":"Chapter_3/3.3-presentations/#_2","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0445\u0440\u0430\u043d\u0438\u0442 \u043b\u0438 \u043e\u043d\u043e \u0434\u0430\u043d\u043d\u044b\u0435?</li> <li>\u0412 \u0447\u0451\u043c \u043e\u0442\u043b\u0438\u0447\u0438\u0435 VIEW \u043e\u0442 CTE?</li> <li>\u041a\u043e\u0433\u0434\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u043d\u0435\u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u044b\u043c?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f VIEW \u043e\u0442 MATERIALIZED VIEW?</li> <li>\u041a\u0430\u043a \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c?</li> <li>\u041c\u043e\u0436\u043d\u043e \u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 VIEW \u043c\u043e\u0436\u0435\u0442 \u0443\u0445\u0443\u0434\u0448\u0438\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c?</li> <li>\u0412 \u043a\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043b\u0443\u0447\u0448\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c CTE \u0432\u043c\u0435\u0441\u0442\u043e VIEW?</li> </ol>"},{"location":"Chapter_3/practic-VIEWS-and-reports/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 8. VIEW \u0438 \u043e\u0442\u0447\u0451\u0442\u044b","text":""},{"location":"Chapter_3/practic-VIEWS-and-reports/#8-view","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 8. VIEW \u0438 \u043e\u0442\u0447\u0451\u0442\u044b","text":"<p>\u0426\u0435\u043b\u044c: \u043d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438; \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043e\u0442\u0447\u0451\u0442\u043d\u044b\u0435 VIEW \u043f\u043e\u0432\u0435\u0440\u0445 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c VIEW \u043a\u0430\u043a \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u043b\u043e\u0439; \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c VIEW \u0438 MATERIALIZED VIEW; \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u043e\u0442\u0447\u0451\u0442\u0430 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0411\u0414</p>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c","text":"<p>\u041c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u043e\u0434\u0430\u0436</p> <pre><code>clients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    city TEXT\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    client_id INT REFERENCES clients(id),\n    order_date DATE\n);\n\norder_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT REFERENCES orders(id),\n    product_name TEXT,\n    quantity INT,\n    price NUMERIC\n);\n</code></pre>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 client_sales_report, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>id \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u0424\u0418\u041e</li> <li>\u0433\u043e\u0440\u043e\u0434</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u043f\u0440\u043e\u0434\u0430\u0436</li> <li>\u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a</li> </ul> <p>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f:</p> <ul> <li>\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 JOIN</li> <li>GROUP BY</li> <li>\u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438</li> <li>\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u044b \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432</li> </ul>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f client_sales_report, \u0432\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0441\u0443\u043c\u043c\u043e\u0439 \u043f\u0440\u043e\u0434\u0430\u0436 \u0431\u043e\u043b\u0435\u0435 100 000</li> <li>\u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0441\u0443\u043c\u043c\u044b</li> </ul> <p>\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.</p>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 monthly_sales_report, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435:</p> <ul> <li>\u043c\u0435\u0441\u044f\u0446</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443</li> <li>\u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <pre><code>DATE_TRUNC('month', order_date)\n</code></pre>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u041d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 monthly_sales_report \u0432\u044b\u0432\u0435\u0441\u0442\u0438 \u043c\u0435\u0441\u044f\u0446 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u043e\u0439</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u043b\u0438 CTE.</p>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 city_sales_report, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>\u0433\u043e\u0440\u043e\u0434</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443</li> <li>\u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> </ul>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u0442\u0447\u0451\u0442 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u044e \u0433\u043e\u0440\u043e\u0434\u0430 \u0432 \u043e\u0431\u0449\u0435\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u0435 (%)</p> <p>\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c CTE \u0432\u043d\u0443\u0442\u0440\u0438 VIEW.</p>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c MATERIALIZED VIEW product_sales_summary, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>\u0442\u043e\u0432\u0430\u0440</li> <li>\u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0434\u0430\u0436</li> <li>\u043e\u0431\u0449\u0443\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443</li> </ul>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f \u043b\u0438 \u043e\u0442\u0447\u0451\u0442.</p> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>REFRESH MATERIALIZED VIEW product_sales_summary;\n</code></pre> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u0432 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0438.</p>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#9","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 9","text":"<p>\u0421\u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u043e\u0442\u0447\u0451\u0442\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0411\u0414:</p> <ul> <li>\u043e\u0434\u0438\u043d VIEW \u2014 \u0434\u0435\u0442\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043e\u0442\u0447\u0451\u0442</li> <li>\u043e\u0434\u0438\u043d VIEW \u2014 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043e\u0442\u0447\u0451\u0442</li> <li>\u043e\u0434\u0438\u043d MATERIALIZED VIEW \u2014 \u0438\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430</li> </ul> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c:</p> <ul> <li>\u0437\u0430\u0447\u0435\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u0442\u044c \u0443\u0440\u043e\u0432\u043d\u0438</li> <li>\u043a\u0430\u043a\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c BI-\u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b</li> </ul>"},{"location":"Chapter_3/practic-VIEWS-and-reports/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f (\u043e\u0446\u0435\u043d\u043a\u0430)","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0447\u0451\u0442 \u043f\u043e \u0442\u043e\u0432\u0430\u0440\u0430\u043c \u0441 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u043e\u0439 \u043f\u043e \u043f\u0440\u0438\u0431\u044b\u043b\u0438.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0447\u0451\u0442 \u043f\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c \u0431\u0435\u0437 \u0437\u0430\u043a\u0430\u0437\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0447\u0451\u0442 \u043f\u043e \u0433\u043e\u0440\u043e\u0434\u0430\u043c \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0433\u043e\u0434.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u0421\u043e\u0437\u0434\u0430\u0442\u044c VIEW \u0441 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043f\u043e \u0441\u0443\u043c\u043c\u0435 (\u0431\u0435\u0437 \u043e\u043a\u043e\u043d\u043d\u044b\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439).</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0447\u0451\u0442 \u00ab\u0422\u043e\u043f-5 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432\u00bb.</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 7. \u0421\u043b\u043e\u0436\u043d\u044b\u0435 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b","text":"<p>\u0426\u0435\u043b\u044c: \u043d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043c\u043d\u043e\u0433\u043e\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u044b\u0435 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 SELECT-\u0437\u0430\u043f\u0440\u043e\u0441\u044b; \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c JOIN + GROUP BY + HAVING; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c CTE \u0434\u043b\u044f \u0434\u0435\u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u043b\u043e\u0433\u0438\u043a\u0438; \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 (\u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0432 \u0433\u0440\u0443\u043f\u043f\u0435); \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430\u043c</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c","text":"<p>\u041c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u043e\u0434\u0430\u0436</p> <pre><code>clients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    city TEXT\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    client_id INT REFERENCES clients(id),\n    order_date DATE\n);\n\norder_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT REFERENCES orders(id),\n    product_name TEXT,\n    quantity INT,\n    price NUMERIC\n);\n</code></pre> <p>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443</li> <li>\u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a</li> </ul> <p>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f:</p> <ul> <li>\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 JOIN</li> <li>GROUP BY</li> <li>\u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438</li> </ul>"},{"location":"Chapter_3/practic-complex-analytical-queries/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0432\u0441\u0435\u043c \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u043b\u0438 CTE</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u043c\u0435\u0441\u044f\u0446</li> <li>\u043e\u0431\u0449\u0443\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <pre><code>DATE_TRUNC('month', order_date)\n</code></pre>"},{"location":"Chapter_3/practic-complex-analytical-queries/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043c\u0435\u0441\u044f\u0446 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u043e\u0439</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u043b\u0438 CTE.</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0447\u044c\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043e \u0438\u0445 \u0433\u043e\u0440\u043e\u0434\u0443</p> <p>\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430:</p> <p>CTE \u0441 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0433\u043e\u0440\u043e\u0434\u0443, \u0437\u0430\u0442\u0435\u043c \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u044e\u0442\u0441\u044f \u0447\u0430\u0449\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043f\u043e \u0432\u0441\u0435\u043c \u0442\u043e\u0432\u0430\u0440\u0430\u043c</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#7_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 3 \u043c\u0435\u0441\u044f\u0446\u0430</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c EXISTS.</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435 \u0431\u044b\u043b\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0433\u043e\u0434</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c NOT EXISTS \u0438\u043b\u0438 LEFT JOIN + IS NULL</p> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044b.</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#9","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 9","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438: - \u0433\u043e\u0440\u043e\u0434 - \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 - \u043e\u0431\u0449\u0443\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443 - \u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a - \u0434\u043e\u043b\u044e \u0433\u043e\u0440\u043e\u0434\u0430 \u0432 \u043e\u0431\u0449\u0435\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u0435 (%)</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: CTE \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0443\u0440\u043e\u0432\u043d\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#10","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 10","text":"<p>\u0412\u044b\u0432\u0435\u0441\u0442\u0438:</p> <ul> <li>\u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u0434\u0430\u0442\u0443 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430</li> <li>\u0441\u0443\u043c\u043c\u0443 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430</li> <li>\u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> </ul> <p>\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: CTE, \u043f\u043e\u0434\u0437\u0430\u043f\u0440\u043e\u0441, JOIN</p>"},{"location":"Chapter_3/practic-complex-analytical-queries/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0441 \u043d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0438\u043c \u0441\u0440\u0435\u0434\u043d\u0438\u043c \u0447\u0435\u043a\u043e\u043c.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u041d\u0430\u0439\u0442\u0438 \u0433\u043e\u0440\u043e\u0434 \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u044b\u0440\u0443\u0447\u043a\u043e\u0439.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u041d\u0430\u0439\u0442\u0438 \u0442\u043e\u0432\u0430\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u043d\u0451\u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u044b\u0440\u0443\u0447\u043a\u0443.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0441\u0434\u0435\u043b\u0430\u0432\u0448\u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u044b \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u043c\u0435\u0441\u044f\u0446\u044b.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u041d\u0430\u0439\u0442\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e.</p>"},{"location":"Chapter_4/4.1-stored-functions/","title":"\u0425\u0440\u0430\u043d\u0438\u043c\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 PostgreSQL","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_4/4.1-stored-functions/#1","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043c\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f","text":"<p>\u0425\u0440\u0430\u043d\u0438\u043c\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f (Stored Function) \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0439:</p> <ul> <li>\u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432 \u0411\u0414</li> <li>\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b</li> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 SQL-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435</li> </ul> <p>\u0424\u0443\u043d\u043a\u0446\u0438\u044f \u2014 \u044d\u0442\u043e \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0447\u0430\u0441\u0442\u044c \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u044c \u0421\u0423\u0411\u0414.</p> <p>\u0425\u0440\u0430\u043d\u0438\u043c\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0438\u043d\u043a\u0430\u043f\u0441\u0443\u043b\u044f\u0446\u0438\u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438</li> <li>\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u0434\u0430</li> <li>\u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c</li> <li>\u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</li> </ul>"},{"location":"Chapter_4/4.1-stored-functions/#2","title":"2. \u041e\u0431\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441","text":"<p>\u0412 PostgreSQL \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 <code>CREATE FUNCTION</code>.</p> <pre><code>CREATE FUNCTION function_name(parameter_list)\nRETURNS return_type\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    -- \u0442\u0435\u043b\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u0438\nEND;\n$$;\n</code></pre>"},{"location":"Chapter_4/4.1-stored-functions/#3","title":"3. \u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f","text":"<p>\u041f\u0440\u0438\u043c\u0435\u0440: \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443.</p> <pre><code>CREATE FUNCTION avg_salary()\nRETURNS NUMERIC\nLANGUAGE SQL\nAS $$\n    SELECT AVG(salary) FROM employees;\n$$;\n</code></pre> <p>\u0412\u044b\u0437\u043e\u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438:</p> <pre><code>SELECT avg_salary();\n</code></pre> <p>\u042d\u0442\u043e SQL-\u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0431\u0435\u0437 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u043d\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u0438.</p>"},{"location":"Chapter_4/4.1-stored-functions/#4","title":"4. \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438","text":"<pre><code>CREATE FUNCTION get_client_total(client_id INT)\nRETURNS NUMERIC\nLANGUAGE SQL\nAS $$\n    SELECT SUM(oi.quantity * oi.price)\n    FROM orders o\n    JOIN order_items oi ON oi.order_id = o.id\n    WHERE o.client_id = get_client_total.client_id;\n$$;\n</code></pre> <p>\u0412\u044b\u0437\u043e\u0432: </p> <pre><code>SELECT get_client_total(5);\n</code></pre>"},{"location":"Chapter_4/4.1-stored-functions/#5-plpgsql","title":"5. PL/pgSQL \u2014 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u043d\u044b\u0439 \u044f\u0437\u044b\u043a","text":"<p>PostgreSQL \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u043d\u044b\u0439 \u044f\u0437\u044b\u043a plpgsql.</p> <p>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435</li> <li>\u0443\u0441\u043b\u043e\u0432\u0438\u044f (IF)</li> <li>\u0446\u0438\u043a\u043b\u044b (LOOP)</li> <li>\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043e\u0448\u0438\u0431\u043e\u043a</li> </ul>"},{"location":"Chapter_4/4.1-stored-functions/#6-plpgsql","title":"6. \u041f\u0440\u0438\u043c\u0435\u0440 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043d\u0430 PL/pgSQL","text":"<pre><code>CREATE FUNCTION increase_salary(emp_id INT, percent NUMERIC)\nRETURNS VOID\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    UPDATE employees\n    SET salary = salary * (1 + percent / 100)\n    WHERE id = emp_id;\nEND;\n$$;\n</code></pre> <pre><code>SELECT increase_salary(3, 10);\n</code></pre>"},{"location":"Chapter_4/4.1-stored-functions/#7","title":"7. \u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435","text":"<p>\u0412 PL/pgSQL \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435:</p> <pre><code>DECLARE\n    total NUMERIC;\nBEGIN\n    SELECT SUM(salary) INTO total\n    FROM employees;\n\n    RETURN total;\nEND;\n</code></pre>"},{"location":"Chapter_4/4.1-stored-functions/#8","title":"8. \u0423\u0441\u043b\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438","text":"<pre><code>IF total &gt; 100000 THEN\n    RETURN 'VIP';\nELSE\n    RETURN 'Standard';\nEND IF;\n</code></pre>"},{"location":"Chapter_4/4.1-stored-functions/#9","title":"9. \u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u0442\u0440\u043e\u043a","text":"<pre><code>CREATE FUNCTION get_high_salary_employees(min_salary NUMERIC)\nRETURNS TABLE(id INT, full_name TEXT, salary NUMERIC)\nLANGUAGE SQL\nAS $$\n    SELECT id, full_name, salary\n    FROM employees\n    WHERE salary &gt; min_salary;\n$$;\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:</p> <pre><code>SELECT * FROM get_high_salary_employees(70000);\n</code></pre>"},{"location":"Chapter_4/4.1-stored-functions/#10-function-procedure","title":"10. \u0420\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 FUNCTION \u0438 PROCEDURE","text":"FUNCTION PROCEDURE \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u041c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 SELECT \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 CALL \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u041d\u0435\u0442 <p>\u0412 PostgreSQL \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b \u043f\u043e\u044f\u0432\u0438\u043b\u0438\u0441\u044c \u0441 \u0432\u0435\u0440\u0441\u0438\u0438 11.</p>"},{"location":"Chapter_4/4.1-stored-functions/#11","title":"11. \u041f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u041c\u043e\u0436\u043d\u043e \u0434\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0442\u043e\u043b\u044c\u043a\u043e \u043a \u0444\u0443\u043d\u043a\u0446\u0438\u0438:</p> <pre><code>GRANT EXECUTE ON FUNCTION get_client_total(INT) TO analyst;\n</code></pre> <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043d\u0435 \u0438\u043c\u0435\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c.</p>"},{"location":"Chapter_4/4.1-stored-functions/#12","title":"12. \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0424\u0443\u043d\u043a\u0446\u0438\u0438:</p> <ul> <li>\u0443\u043c\u0435\u043d\u044c\u0448\u0430\u044e\u0442 \u0441\u0435\u0442\u0435\u0432\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a</li> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435</li> <li>\u043c\u043e\u0433\u0443\u0442 \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f</li> </ul> <p>\u041d\u043e:</p> <ul> <li>\u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u0432\u043d\u0443\u0442\u0440\u0438 \u0411\u0414 \u0443\u0441\u043b\u043e\u0436\u043d\u044f\u0435\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443</li> <li>\u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u0443\u0445\u0443\u0434\u0448\u0430\u0442\u044c \u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_4/4.1-stored-functions/#14","title":"14. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0417\u0430\u0431\u044b\u0442\u044b\u0439 RETURN \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u041d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0438\u043f\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f SELECT \u0431\u0435\u0437 INTO \u041e\u0448\u0438\u0431\u043a\u0430 \u0432 PL/pgSQL \u041b\u043e\u0433\u0438\u043a\u0430, \u0434\u0443\u0431\u043b\u0438\u0440\u0443\u044e\u0449\u0430\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"},{"location":"Chapter_4/4.1-stored-functions/#15","title":"15. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0445\u0440\u0430\u043d\u0438\u043c\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u043b\u043e\u0433\u0438\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u0430</li> <li>\u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u043d\u0443\u0436\u043d\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u0441\u0442\u044c \u0440\u0430\u0441\u0447\u0451\u0442\u043e\u0432</li> </ul> <p>\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u043b\u043e\u0433\u0438\u043a\u0430 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u0430 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u043a\u043e\u0434 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0432\u044b\u0441\u043e\u043a\u0430\u044f \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u0443\u0435\u043c\u043e\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_4/4.1-stored-functions/#16","title":"16. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u0425\u0440\u0430\u043d\u0438\u043c\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438:</p> <ul> <li>\u043f\u0435\u0440\u0435\u043d\u043e\u0441\u044f\u0442 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0443 \u0432 \u0411\u0414</li> <li>\u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430</li> <li>\u043f\u043e\u0432\u044b\u0448\u0430\u044e\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</li> <li>\u043c\u043e\u0433\u0443\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0441\u043a\u0430\u043b\u044f\u0440\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b</li> <li>\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043e\u0441\u043d\u043e\u0432\u043e\u0439 \u0434\u043b\u044f \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u0432</li> </ul>"},{"location":"Chapter_4/4.1-stored-functions/#_1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u0422\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>clients</li> <li>orders</li> <li>order_items</li> <li>employees</li> </ul>"},{"location":"Chapter_4/4.1-stored-functions/#1_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_avg_salary()</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432</li> <li>\u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432</li> </ul> <p>\u0422\u0438\u043f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u2014 NUMERIC.</p>"},{"location":"Chapter_4/4.1-stored-functions/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2.","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_client_total(p_client_id INT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u0435\u0441\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435\u0442 \u2014 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 0</li> </ul> <p>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0439 NULL.</p>"},{"location":"Chapter_4/4.1-stored-functions/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_client_status(p_client_id INT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0435\u0441\u043b\u0438 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 &gt; 100 000 \u2192 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 'VIP'</li> <li>\u0435\u0441\u043b\u0438 \u0441\u0443\u043c\u043c\u0430 &gt; 50 000 \u2192 'Regular'</li> <li>\u0438\u043d\u0430\u0447\u0435 \u2192 'New'</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0438 IF / ELSIF</p> <p>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0424\u0443\u043d\u043a\u0446\u0438\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0443</p> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_high_value_clients(min_total NUMERIC)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <p>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u0443:</p> <ul> <li>id \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u0424\u0418\u041e</li> <li>\u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> </ul> <p>\u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0441\u0443\u043c\u043c\u043e\u0439 \u0432\u044b\u0448\u0435 <code>min_total</code>.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c RETURNS TABLE.</p>"},{"location":"Chapter_4/4.1-stored-functions/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>increase_salary_by_department(p_department TEXT, p_percent NUMERIC)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0434\u0435\u043b\u0430</li> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u043a</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>UPDATE</li> <li>RETURNING</li> <li>\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u0447\u0451\u0442\u0430</li> </ul>"},{"location":"Chapter_4/4.1-stored-functions/#_2","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043c\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0438 \u0433\u0434\u0435 \u043e\u043d\u0430 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b \u0432 PostgreSQL?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 LANGUAGE SQL \u0438 LANGUAGE plpgsql?</li> <li>\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442, \u0435\u0441\u043b\u0438 \u0442\u0438\u043f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u043c\u0443 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443?</li> <li>\u041a\u0430\u043a \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u0440\u043e\u043a \u0438\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u0438?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0432 PL/pgSQL \u0438 \u043a\u0430\u043a \u043e\u043d\u0430 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f?</li> <li>\u041a\u043e\u0433\u0434\u0430 \u043f\u0435\u0440\u0435\u043d\u043e\u0441 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438 \u0432 \u0411\u0414 \u043e\u043f\u0440\u0430\u0432\u0434\u0430\u043d, \u0430 \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u0442?</li> </ol>"},{"location":"Chapter_4/4.2-PL-pgSQL/","title":"PL/pgSQL","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#1-plpgsql","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 PL/pgSQL","text":"<p>PL/pgSQL \u2014 \u044d\u0442\u043e \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u043d\u044b\u0439 \u044f\u0437\u044b\u043a PostgreSQL, \u043a\u043e\u0442\u043e\u0440\u044b\u0439:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u0432</li> <li>\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0438\u0441\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c\u0438, \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 \u0438 \u0446\u0438\u043a\u043b\u0430\u043c\u0438</li> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0411\u0414</li> </ul> <p>\u0415\u0441\u043b\u0438 \u043e\u0431\u044b\u0447\u043d\u044b\u0439 SQL \u2014 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u044f\u0437\u044b\u043a, \u0442\u043e PL/pgSQL \u2014 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u043d\u044b\u0439.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438</li> <li>\u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439</li> <li>\u043c\u043d\u043e\u0433\u043e\u0448\u0430\u0433\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#2-plpgsql","title":"2. \u041e\u0431\u0449\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043d\u0430 PL/pgSQL","text":"<pre><code>CREATE FUNCTION function_name(parameters)\nRETURNS return_type\nLANGUAGE plpgsql\nAS $$\nDECLARE\n    -- \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\nBEGIN\n    -- \u0442\u0435\u043b\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u0438\nEND;\n$$;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#3-plpgsql","title":"3. \u0411\u043b\u043e\u043a\u0438 PL/pgSQL","text":""},{"location":"Chapter_4/4.2-PL-pgSQL/#declare","title":"DECLARE","text":"<p>\u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445:</p> <pre><code>DECLARE\n    total NUMERIC;\n    emp_count INT := 0;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#begin-end","title":"BEGIN ... END","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0431\u043b\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f:</p> <pre><code>BEGIN\n    -- \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\nEND;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#4","title":"4. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c\u0438","text":""},{"location":"Chapter_4/4.2-PL-pgSQL/#_1","title":"\u041f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>total := 1000;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#select-into","title":"SELECT INTO","text":"<pre><code>SELECT SUM(salary)\nINTO total\nFROM employees;\n</code></pre> <p>\u0412 PL/pgSQL \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c INTO \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e.</p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#5","title":"5. \u0423\u0441\u043b\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438","text":""},{"location":"Chapter_4/4.2-PL-pgSQL/#if","title":"IF","text":"<pre><code>IF total &gt; 100000 THEN\n    RETURN 'VIP';\nELSIF total &gt; 50000 THEN\n    RETURN 'Regular';\nELSE\n    RETURN 'New';\nEND IF;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#6","title":"6. \u0426\u0438\u043a\u043b\u044b","text":""},{"location":"Chapter_4/4.2-PL-pgSQL/#loop","title":"LOOP","text":"<pre><code>LOOP\n    -- \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\n    EXIT WHEN condition;\nEND LOOP;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#while","title":"WHILE","text":"<pre><code>WHILE total &lt; 100000 LOOP\n    total := total + 1000;\nEND LOOP;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#for","title":"FOR","text":"<pre><code>FOR emp_record IN\n    SELECT * FROM employees\nLOOP\n    RAISE NOTICE 'Employee: %', emp_record.full_name;\nEND LOOP;\n</code></pre> <p>\u0427\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0430\u0431\u043e\u0440\u0430 \u0441\u0442\u0440\u043e\u043a.</p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#7","title":"7. \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a","text":"<pre><code>BEGIN\n    -- \u043a\u043e\u0434\nEXCEPTION\n    WHEN division_by_zero THEN\n        RAISE NOTICE '\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u043d\u043e\u043b\u044c';\nEND;\n</code></pre> <p>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#8","title":"8. \u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439","text":""},{"location":"Chapter_4/4.2-PL-pgSQL/#return","title":"RETURN","text":"<pre><code>RETURN total;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#returns-table","title":"RETURNS TABLE","text":"<pre><code>CREATE FUNCTION get_employees()\nRETURNS TABLE(id INT, full_name TEXT)\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    RETURN QUERY\n    SELECT id, full_name\n    FROM employees;\nEND;\n$$;\n</code></pre>"},{"location":"Chapter_4/4.2-PL-pgSQL/#9-raise","title":"9. RAISE","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439:</p> <pre><code>RAISE NOTICE '\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: %', total;\n</code></pre> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b:</p> <ul> <li>NOTICE</li> <li>WARNING</li> <li>EXCEPTION</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#10-sql-plpgsql-","title":"10. \u041e\u0442\u043b\u0438\u0447\u0438\u0435 SQL-\u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043e\u0442 PL/pgSQL-\u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"SQL PL/pgSQL \u041e\u0434\u0438\u043d SELECT \u041c\u043d\u043e\u0433\u043e\u0448\u0430\u0433\u043e\u0432\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u041d\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0415\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u041d\u0435\u0442 \u0446\u0438\u043a\u043b\u043e\u0432 \u0415\u0441\u0442\u044c \u0446\u0438\u043a\u043b\u044b \u041f\u0440\u043e\u0449\u0435 \u041c\u043e\u0449\u043d\u0435\u0435"},{"location":"Chapter_4/4.2-PL-pgSQL/#11-plpgsql","title":"11. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c PL/pgSQL","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u043e\u0436\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430</li> <li>\u0435\u0441\u0442\u044c \u0432\u0435\u0442\u0432\u043b\u0435\u043d\u0438\u044f</li> <li>\u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e SQL-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u043d\u0443\u0436\u043d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a</li> </ul> <p>\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u043c\u043e\u0436\u043d\u043e \u0440\u0435\u0448\u0438\u0442\u044c \u043e\u0434\u043d\u043e\u0439 SQL-\u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439</li> <li>\u043b\u043e\u0433\u0438\u043a\u0430 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#12","title":"12. \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<p>PL/pgSQL:</p> <ul> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435</li> <li>\u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u0441\u0435\u0442\u0435\u0432\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a</li> <li>\u043c\u043e\u0436\u0435\u0442 \u0443\u0441\u043a\u043e\u0440\u044f\u0442\u044c \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> </ul> <p>\u041d\u043e:</p> <ul> <li>\u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u0443\u0441\u043b\u043e\u0436\u043d\u044f\u0435\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443</li> <li>\u043d\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044e SQL</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#13","title":"13. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 SELECT \u0431\u0435\u0437 INTO \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 RETURN \u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0442\u0438\u043f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u041d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0438\u043f\u043e\u0432 \u0418\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0435 \u0446\u0438\u043a\u043b\u044b \u041f\u043e\u0442\u0435\u0440\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438"},{"location":"Chapter_4/4.2-PL-pgSQL/#14","title":"14. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0430\u0441\u043f\u0435\u043a\u0442","text":"<p>PL/pgSQL:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430\u0445</li> <li>\u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442 \u0441\u043b\u043e\u0439 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0411\u0414</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0430\u043a\u043a\u0443\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#15","title":"15. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>PL/pgSQL:</p> <ul> <li>\u0440\u0430\u0441\u0448\u0438\u0440\u044f\u0435\u0442 SQL \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u043d\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u043e\u0439</li> <li>\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438</li> <li>\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435, \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0446\u0438\u043a\u043b\u044b</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430\u0445 \u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445</li> <li>\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u043e\u0449\u043d\u044b\u043c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u0438</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#_2","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u0422\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>employees (id, full_name, salary, department)</li> <li>clients</li> <li>orders</li> <li>order_items</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1.","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_department_total_salary(p_department TEXT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u0440\u043f\u043b\u0430\u0442 \u043f\u043e \u043e\u0442\u0434\u0435\u043b\u0443</li> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 0, \u0435\u0441\u043b\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043d\u0435\u0442</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e <code>SELECT INTO</code> \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 <code>NULL</code></p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. \u0423\u0441\u043b\u043e\u0432\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_employee_level(p_salary NUMERIC)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442:</p> <ul> <li>'Junior' \u2014 \u0435\u0441\u043b\u0438 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430 &lt; 50 000</li> <li>'Middle' \u2014 \u0435\u0441\u043b\u0438 50 000\u2013100 000</li> <li>'Senior' \u2014 \u0435\u0441\u043b\u0438 &gt; 100 000</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c IF / ELSIF / ELSE.</p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3.","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>increase_salary_for_department(p_department TEXT, p_percent NUMERIC)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u043f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c \u043e\u0442\u0434\u0435\u043b\u0430</li> <li>\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443</li> <li>\u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0447\u0435\u0440\u0435\u0437 RAISE NOTICE \u0438\u043c\u044f \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: <code>FOR record IN SELECT</code>, <code>UPDATE</code>, \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e-\u0441\u0447\u0451\u0442\u0447\u0438\u043a</p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#4_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4.","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e: <code>safe_divide(a NUMERIC, b NUMERIC)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0434\u0435\u043b\u0435\u043d\u0438\u0435</li> <li>\u0435\u0441\u043b\u0438 b = 0, \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443</li> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 NULL (\u043a\u043e\u0433\u0434\u0430 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e)</li> <li>\u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 RAISE NOTICE</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u043b\u043e\u043a EXCEPTION.</p>"},{"location":"Chapter_4/4.2-PL-pgSQL/#5_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>assign_client_status(p_client_id INT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0412\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441 (VIP, Regular, New)</li> <li>\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0435 status \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 clients</li> <li>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435</li> <li>SELECT INTO</li> <li>IF</li> <li>UPDATE</li> <li>RETURN</li> </ul>"},{"location":"Chapter_4/4.2-PL-pgSQL/#_3","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 PL/pgSQL \u0438 \u0447\u0435\u043c \u043e\u043d \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e SQL?</li> <li>\u0418\u0437 \u043a\u0430\u043a\u0438\u0445 \u0431\u043b\u043e\u043a\u043e\u0432 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043d\u0430 PL/pgSQL?</li> <li>\u0417\u0430\u0447\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f DECLARE?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0432 PL/pgSQL \u043d\u0435\u043b\u044c\u0437\u044f \u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e SELECT \u0431\u0435\u0437 INTO?</li> <li>\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0446\u0438\u043a\u043b FOR record IN SELECT?</li> <li>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0431\u043b\u043e\u043a EXCEPTION?</li> <li>\u0412 \u0447\u0451\u043c \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0446\u0438\u043a\u043b\u043e\u0432 \u0432 \u0411\u0414?</li> <li>\u041a\u043e\u0433\u0434\u0430 \u043b\u043e\u0433\u0438\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0411\u0414, \u0430 \u043a\u043e\u0433\u0434\u0430 \u2014 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438?</li> </ol>"},{"location":"Chapter_4/4.3-triggers/","title":"\u0422\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u0432 PostgreSQL","text":"<p>\u0422\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u0438\u044f: \u043b\u0435\u043a\u0446\u0438\u044f</p> <p>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: 2 \u0430\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0447\u0430\u0441\u0430</p>"},{"location":"Chapter_4/4.3-triggers/#1","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440","text":"<p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440 (Trigger) \u2014 \u044d\u0442\u043e \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0440\u0438 \u043d\u0430\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.</p> <p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442:</p> <ul> <li>\u043f\u0440\u0438 INSERT</li> <li>\u043f\u0440\u0438 UPDATE</li> <li>\u043f\u0440\u0438 DELETE</li> <li>\u043f\u0440\u0438 TRUNCATE</li> </ul>"},{"location":"Chapter_4/4.3-triggers/#2","title":"2. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b","text":"<p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b</li> <li>\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0436\u0443\u0440\u043d\u0430\u043b\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> <li>\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0451\u0442\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439</li> <li>\u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0439 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438</li> </ul> <p>\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e: \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438, \u0431\u0435\u0437 \u044f\u0432\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</p>"},{"location":"Chapter_4/4.3-triggers/#3","title":"3. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430","text":"<p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 \u0434\u0432\u0443\u0445 \u0447\u0430\u0441\u0442\u0435\u0439:</p> <ul> <li>\u0424\u0443\u043d\u043a\u0446\u0438\u044f (trigger function) \u2014 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043b\u043e\u0433\u0438\u043a\u0443</li> <li>\u0421\u0430\u043c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u2014 \u043f\u0440\u0438\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043a \u0441\u043e\u0431\u044b\u0442\u0438\u044e</li> </ul>"},{"location":"Chapter_4/4.3-triggers/#4-","title":"4. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438-\u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430","text":"<pre><code>CREATE FUNCTION function_name()\nRETURNS TRIGGER\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    -- \u043b\u043e\u0433\u0438\u043a\u0430\n    RETURN NEW;\nEND;\n$$;\n</code></pre> <p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:</p> <ul> <li>NEW \u2014 \u043d\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430</li> <li>OLD \u2014 \u0441\u0442\u0430\u0440\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430</li> <li>NULL \u2014 \u043e\u0442\u043c\u0435\u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> </ul>"},{"location":"Chapter_4/4.3-triggers/#5","title":"5. \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430","text":"<pre><code>CREATE TRIGGER trigger_name\nBEFORE INSERT ON table_name\nFOR EACH ROW\nEXECUTE FUNCTION function_name();\n</code></pre>"},{"location":"Chapter_4/4.3-triggers/#6-before-after","title":"6. BEFORE \u0438 AFTER","text":"\u0422\u0438\u043f \u041a\u043e\u0433\u0434\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f BEFORE \u0414\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 AFTER \u041f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f <ul> <li>BEFORE \u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>AFTER \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_4/4.3-triggers/#7-for-each-row-vs-for-each-statement","title":"7. FOR EACH ROW vs FOR EACH STATEMENT","text":"\u0422\u0438\u043f \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c FOR EACH ROW \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 FOR EACH STATEMENT \u041e\u0434\u0438\u043d \u0440\u0430\u0437 \u0434\u043b\u044f \u0432\u0441\u0435\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"},{"location":"Chapter_4/4.3-triggers/#8-new-old","title":"8. NEW \u0438 OLD","text":"<p>\u041f\u0440\u0438:</p> <ul> <li>INSERT \u2192 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d NEW</li> <li>UPDATE \u2192 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b NEW \u0438 OLD</li> <li>DELETE \u2192 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d OLD</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>RAISE NOTICE '\u0421\u0442\u0430\u0440\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: %, \u041d\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: %', OLD.salary, NEW.salary;\n</code></pre>"},{"location":"Chapter_4/4.3-triggers/#9-1","title":"9. \u041f\u0440\u0438\u043c\u0435\u0440 1: \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0434\u0430\u0442\u044b","text":"<pre><code>CREATE FUNCTION set_created_at()\nRETURNS TRIGGER\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    NEW.created_at := CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$;\n\nCREATE TRIGGER trg_set_created_at\nBEFORE INSERT ON orders\nFOR EACH ROW\nEXECUTE FUNCTION set_created_at();\n</code></pre>"},{"location":"Chapter_4/4.3-triggers/#10-2-","title":"10. \u041f\u0440\u0438\u043c\u0435\u0440 2: \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438","text":"<p>\u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u0435 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b:</p> <pre><code>CREATE FUNCTION prevent_salary_decrease()\nRETURNS TRIGGER\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    IF NEW.salary &lt; OLD.salary THEN\n        RAISE EXCEPTION '\u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0442\u044c \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443';\n    END IF;\n\n    RETURN NEW;\nEND;\n$$;\n</code></pre>"},{"location":"Chapter_4/4.3-triggers/#11-3","title":"11. \u041f\u0440\u0438\u043c\u0435\u0440 3: \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":"<pre><code>CREATE TABLE salary_log (\n    employee_id INT,\n    old_salary NUMERIC,\n    new_salary NUMERIC,\n    changed_at TIMESTAMP\n);\n</code></pre> <p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440:</p> <pre><code>CREATE FUNCTION log_salary_change()\nRETURNS TRIGGER\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    INSERT INTO salary_log\n    VALUES (OLD.id, OLD.salary, NEW.salary, CURRENT_TIMESTAMP);\n\n    RETURN NEW;\nEND;\n$$;\n</code></pre>"},{"location":"Chapter_4/4.3-triggers/#12","title":"12. \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430","text":"<pre><code>DROP TRIGGER trigger_name ON table_name;\n</code></pre>"},{"location":"Chapter_4/4.3-triggers/#13-when","title":"13. WHEN (\u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430)","text":"<p>\u041c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435:</p> <pre><code>CREATE TRIGGER trg_salary_update\nAFTER UPDATE ON employees\nFOR EACH ROW\nWHEN (OLD.salary IS DISTINCT FROM NEW.salary)\nEXECUTE FUNCTION log_salary_change();\n</code></pre> <p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b.</p>"},{"location":"Chapter_4/4.3-triggers/#14","title":"14. \u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f","text":"<p>\u041f\u0440\u0438 INSERT:</p> <ul> <li>BEFORE-\u0442\u0440\u0438\u0433\u0433\u0435\u0440</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439</li> <li>\u0412\u0441\u0442\u0430\u0432\u043a\u0430</li> <li>AFTER-\u0442\u0440\u0438\u0433\u0433\u0435\u0440</li> </ul>"},{"location":"Chapter_4/4.3-triggers/#15","title":"15. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0417\u0430\u0431\u044b\u0442\u044b\u0439 RETURN NEW \u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 OLD \u0432 INSERT \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0411\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u044f \u0422\u0440\u0438\u0433\u0433\u0435\u0440 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442 \u0442\u0443 \u0436\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u041b\u043e\u0433\u0438\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u043e\u0436\u043d\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c CHECK \u0418\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c"},{"location":"Chapter_4/4.3-triggers/#16","title":"16. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u043f\u0440\u0438 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445</li> <li>\u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438</li> <li>\u043f\u0440\u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0438 \u0441\u043b\u043e\u0436\u043d\u043e\u0439 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438</li> </ul> <p>\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u0435\u0441\u043b\u0438 \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u043e\u0439\u0442\u0438\u0441\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c\u0438</li> <li>\u0435\u0441\u043b\u0438 \u043b\u043e\u0433\u0438\u043a\u0430 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e</li> <li> <p>\u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c</p> </li> <li> <p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438 \u0440\u0438\u0441\u043a\u0438</p> </li> </ul> <p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440\u044b:</p> <ul> <li>\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u044e\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443</li> <li>\u0443\u0441\u043b\u043e\u0436\u043d\u044f\u044e\u0442 \u043e\u0442\u043b\u0430\u0434\u043a\u0443</li> <li>\u043c\u043e\u0433\u0443\u0442 \u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443</li> </ul> <p>\u0412\u0430\u0436\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b.</p> <ol> <li>\u0412\u044b\u0432\u043e\u0434\u044b</li> </ol> <p>\u0422\u0440\u0438\u0433\u0433\u0435\u0440\u044b:</p> <ul> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0440\u0435\u0430\u043a\u0446\u0438\u044e \u043d\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f</li> <li>\u0442\u0435\u0441\u043d\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u044b \u0441 PL/pgSQL</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438 \u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f</li> <li>\u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_4/4.3-triggers/#_1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":""},{"location":"Chapter_4/4.3-triggers/#1_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1.","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0438\u0439 <code>created_at</code> \u043f\u0440\u0438 \u0432\u0441\u0442\u0430\u0432\u043a\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c BEFORE INSERT.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0447\u0442\u043e \u0434\u0430\u0442\u0430 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</p>"},{"location":"Chapter_4/4.3-triggers/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2.","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u0435 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b, \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u2014 \u0432\u044b\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0442\u044c RAISE EXCEPTION</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c OLD \u0438 NEW.</p>"},{"location":"Chapter_4/4.3-triggers/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 <code>salary_log</code> \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435 WHEN, \u0447\u0442\u043e\u0431\u044b \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u043b\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b.</p>"},{"location":"Chapter_4/4.3-triggers/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0435\u0441\u043b\u0438 <code>total_amount &gt; 100000</code> \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u0442\u0430\u0442\u0443\u0441 'VIP'</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c UPDATE \u0432\u043d\u0443\u0442\u0440\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_4/4.3-triggers/#5_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 <code>employee_archive</code> \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435, \u0435\u0441\u043b\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442 \u043e\u0442\u0434\u0435\u043b\u043e\u043c</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>OLD</li> <li>\u0443\u0441\u043b\u043e\u0432\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443</li> <li>RAISE EXCEPTION</li> </ul>"},{"location":"Chapter_4/4.3-triggers/#_2","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0438 \u0438\u0437 \u043a\u0430\u043a\u0438\u0445 \u0434\u0432\u0443\u0445 \u0447\u0430\u0441\u0442\u0435\u0439 \u043e\u043d \u0441\u043e\u0441\u0442\u043e\u0438\u0442?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 BEFORE \u0438 AFTER \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u043c?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f FOR EACH ROW \u043e\u0442 FOR EACH STATEMENT?</li> <li>\u041a\u043e\u0433\u0434\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b NEW \u0438 OLD?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u043c\u043e\u0433\u0443\u0442 \u0443\u0441\u043b\u043e\u0436\u043d\u044f\u0442\u044c \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0411\u0414?</li> <li>\u0412 \u043a\u0430\u043a\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b, \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f, \u0441\u0430\u043c\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0438\u043d\u043e\u0433\u0434\u0430 \u043b\u0443\u0447\u0448\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c CHECK, \u0430 \u043d\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440?</li> <li>\u0427\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u0443\u044e \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u044e \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430?</li> </ol>"},{"location":"Chapter_4/practic-business-logic-triggers/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 11. \u0422\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438","text":"<p>\u0426\u0435\u043b\u044c: \u043d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432: \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0447\u0435\u0440\u0435\u0437 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b; \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>AFTER</code> \u0438 <code>BEFORE</code> \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u043e\u0441\u043e\u0437\u043d\u0430\u043d\u043d\u043e; \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u0440\u0438\u0441\u043a\u0438 \u0441\u043a\u0440\u044b\u0442\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u0438; \u0438\u0437\u0431\u0435\u0433\u0430\u0442\u044c \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0438 \u0438 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c","text":"<p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436:</p> <pre><code>clients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    city TEXT,\n    status TEXT\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    client_id INT REFERENCES clients(id),\n    order_date DATE,\n    total_amount NUMERIC\n);\n\norder_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT REFERENCES orders(id),\n    product_name TEXT,\n    quantity INT,\n    price NUMERIC\n);\n</code></pre>"},{"location":"Chapter_4/practic-business-logic-triggers/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 <code>order_items</code>, \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c orders.total_amount</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>AFTER INSERT OR UPDATE OR DELETE</li> <li>\u0430\u0433\u0440\u0435\u0433\u0430\u0442 SUM(quantity * price)</li> </ul>"},{"location":"Chapter_4/practic-business-logic-triggers/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430 \u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0435\u0441\u043b\u0438 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 100 000, \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c status = 'VIP'</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c AFTER INSERT ON orders.</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443:</p> <ul> <li>\u0435\u0441\u043b\u0438 \u0441\u0443\u043c\u043c\u0430 &lt; 50 000 \u2192 'New'</li> <li>50 000\u2013100 000 \u2192 'Regular'</li> </ul> <p>\u0412\u0441\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u043c 'Blocked'</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c BEFORE INSERT.</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430, \u0435\u0441\u043b\u0438 \u043e\u043d \u0441\u0442\u0430\u0440\u0448\u0435 30 \u0434\u043d\u0435\u0439</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u0442.</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u0440\u0430\u0441\u0447\u0451\u0442 \u0441\u0442\u0430\u0442\u0443\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430</p> <p>\u0423\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u043b\u043e\u0433\u0438\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0432 \u043e\u0431\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b.</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 <code>client_status_log</code></p> <pre><code>client_status_log (\n    client_id INT,\n    old_status TEXT,\n    new_status TEXT,\n    changed_at TIMESTAMP\n);\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c AFTER UPDATE \u0441 \u0443\u0441\u043b\u043e\u0432\u0438\u0435\u043c WHEN.</p>"},{"location":"Chapter_4/practic-business-logic-triggers/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442\u044c \u0431\u043e\u043d\u0443\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u043f\u0440\u0438 \u0437\u0430\u043a\u0430\u0437\u0435 &gt; 200 000.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u0431\u0435\u0437 \u0442\u043e\u0432\u0430\u0440\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u041f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0441\u0442\u0430\u0442\u0443\u0441 'Inactive', \u0435\u0441\u043b\u0438 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0431\u043e\u043b\u0435\u0435 \u0433\u043e\u0434\u0430.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432 \u043c\u0435\u0441\u044f\u0446.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u0435\u0440\u0435\u0441\u0447\u0451\u0442 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e \u0447\u0435\u043a\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.</p>"},{"location":"Chapter_4/practic-data-control-triggers/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 10. \u0422\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u0426\u0435\u043b\u044c: \u043d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u0430\u043d\u043d\u044b\u0445; \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u043e\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f (CHECK, FOREIGN KEY); \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c NEW \u0438 OLD; \u0432\u044b\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (RAISE EXCEPTION); \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</p>"},{"location":"Chapter_4/practic-data-control-triggers/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u0430\u043d\u043d\u044b\u0445","text":"<pre><code>employees (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    salary NUMERIC,\n    department TEXT,\n    hire_date DATE\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    client_id INT,\n    order_date DATE,\n    total_amount NUMERIC\n);\n</code></pre>"},{"location":"Chapter_4/practic-data-control-triggers/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u043c\u0435\u043d\u044c\u0448\u0435 30 000, \u043f\u0440\u0438 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u2014 RAISE EXCEPTION</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c BEFORE INSERT OR UPDATE.</p>"},{"location":"Chapter_4/practic-data-control-triggers/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0451\u043c\u0430 \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0434\u0430\u0442\u044b</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 INSERT.</p>"},{"location":"Chapter_4/practic-data-control-triggers/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0442\u044c \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>IF NEW.salary &lt; OLD.salary THEN</code></p>"},{"location":"Chapter_4/practic-data-control-triggers/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u043c\u0435\u043d\u044f\u0442\u044c \u043e\u0442\u0434\u0435\u043b \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043f\u043e\u0441\u043b\u0435 6 \u043c\u0435\u0441\u044f\u0446\u0435\u0432 \u0440\u0430\u0431\u043e\u0442\u044b</p> <p>\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430:</p> <p>\u0441\u0440\u0430\u0432\u043d\u0438\u0442\u044c <code>hire_date</code> \u0441 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0434\u0430\u0442\u043e\u0439</p> <p>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>AGE()</code> \u0438\u043b\u0438 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430</p>"},{"location":"Chapter_4/practic-data-control-triggers/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b <code>orders</code> \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u0441 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0443\u043c\u043c\u043e\u0439 \u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u0441 \u0434\u0430\u0442\u043e\u0439 \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c</p>"},{"location":"Chapter_4/practic-data-control-triggers/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0431\u043e\u043b\u0435\u0435 10 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432 \u0434\u0435\u043d\u044c</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: <code>SELECT COUNT(*)</code> \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0432\u043d\u0443\u0442\u0440\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438</p>"},{"location":"Chapter_4/practic-data-control-triggers/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u041c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b \u0447\u0442\u043e\u0431\u044b \u043e\u043d \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430 \u0440\u0435\u0430\u043b\u044c\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>WHEN (OLD.salary IS DISTINCT FROM NEW.salary)</code></p>"},{"location":"Chapter_4/practic-data-control-triggers/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1: \u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 hire_date \u043f\u043e\u0441\u043b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2: \u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0441 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u043e\u0439 \u0432\u044b\u0448\u0435 200 000.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3: \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u043f\u043e \u043e\u0442\u0434\u0435\u043b\u0443.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4: \u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u0431\u0435\u0437 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5: \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 1 000 000.</p>"},{"location":"Chapter_4/practic-functions-with-parameters/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 9. \u0424\u0443\u043d\u043a\u0446\u0438\u0438 \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438","text":"<p>\u0426\u0435\u043b\u044c: \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0432\u044b\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0441 \u0432\u0445\u043e\u0434\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0432 SQL \u0438 PL/pgSQL; \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0442\u0438\u043f\u0430\u043c\u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430; \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 NULL; \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0442\u0430\u0431\u043b\u0438\u0446 \u0438\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u0439</p>"},{"location":"Chapter_4/practic-functions-with-parameters/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u0430\u043d\u043d\u044b\u0445","text":"<pre><code>employees (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    salary NUMERIC,\n    department TEXT\n);\n\nclients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    city TEXT,\n    status TEXT\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    client_id INT REFERENCES clients(id),\n    order_date DATE,\n    total_amount NUMERIC\n);\n</code></pre>"},{"location":"Chapter_4/practic-functions-with-parameters/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1.","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_employee_salary(p_id INT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043f\u043e id</li> <li>\u0435\u0441\u043b\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u2014 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 NULL</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c LANGUAGE SQL.</p>"},{"location":"Chapter_4/practic-functions-with-parameters/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_department_avg_salary(p_department TEXT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u043e\u0442\u0434\u0435\u043b\u0430, \u0435\u0441\u043b\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043d\u0435\u0442 \u2014 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 0</p> <p>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c NULL.</p>"},{"location":"Chapter_4/practic-functions-with-parameters/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_client_total(p_client_id INT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u0435\u0441\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435\u0442 \u2014 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 0</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e</li> <li>SELECT INTO</li> <li>RETURN</li> </ul>"},{"location":"Chapter_4/practic-functions-with-parameters/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e get_client_level(p_client_id INT)</p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0435\u0441\u043b\u0438 \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 &gt; 100 000 \u2192 'VIP'</li> <li>\u0435\u0441\u043b\u0438 &gt; 50 000 \u2192 'Regular' \u0438\u043d\u0430\u0447\u0435 \u2192 'New'</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c IF / ELSIF.</p>"},{"location":"Chapter_4/practic-functions-with-parameters/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>increase_salary(p_department TEXT, p_percent NUMERIC)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0434\u0435\u043b\u0430</li> <li>\u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u043a</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>UPDATE</code>; <code>GET DIAGNOSTICS</code> \u0438\u043b\u0438 <code>RETURNING</code></p>"},{"location":"Chapter_4/practic-functions-with-parameters/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_orders_by_period(p_date_from DATE, p_date_to DATE)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>RETURNS TABLE</li> <li>RETURN QUERY</li> </ul>"},{"location":"Chapter_4/practic-functions-with-parameters/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>safe_update_salary(p_id INT, p_new_salary NUMERIC)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0443 \u043c\u0435\u043d\u044c\u0448\u0435 30 000 \u043f\u0440\u0438 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u2014 \u0432\u044b\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442 EXCEPTION</p>"},{"location":"Chapter_4/practic-functions-with-parameters/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>assign_client_status(p_client_id INT)</code></p> <p>\u041a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0412\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> <li>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441</li> <li>\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 clients</li> <li>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: - \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 - SELECT INTO - UPDATE - IF - RETURN</p>"},{"location":"Chapter_4/practic-functions-with-parameters/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0440\u0430\u0441\u0447\u0451\u0442\u0430 \u0433\u043e\u0434\u043e\u0432\u043e\u0439 \u043f\u0440\u0435\u043c\u0438\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430. \u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u0424\u0443\u043d\u043a\u0446\u0438\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043e\u0442\u0434\u0435\u043b\u0430 \u0441 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u043e\u0439 \u0432\u044b\u0448\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e. \u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u0424\u0443\u043d\u043a\u0446\u0438\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0437\u0430 \u0433\u043e\u0434. \u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0433\u043e\u0440\u043e\u0434\u0430. \u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u0424\u0443\u043d\u043a\u0446\u0438\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/","title":"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0438 ACID","text":"<p>\u0422\u0438\u043f: \u043b\u0435\u043a\u0446\u0438\u044f</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#1","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u2014 \u044d\u0442\u043e \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u0430\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0441 \u0411\u0414, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0435\u0434\u0438\u043d\u043e\u0435 \u0446\u0435\u043b\u043e\u0435.</p> <p>\u0413\u043b\u0430\u0432\u043d\u044b\u0439 \u043f\u0440\u0438\u043d\u0446\u0438\u043f: \u043b\u0438\u0431\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u043b\u0438\u0431\u043e \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0438 \u043e\u0434\u043d\u0430.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#2","title":"2. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442:</p> <ul> <li>\u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c \u0441\u0438\u0441\u0442\u0435\u043c\u044b</li> <li>\u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> <li>\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u0438 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#3","title":"3. \u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438","text":""},{"location":"Chapter_5/5.1-transactions-and-ACID/#begin","title":"BEGIN","text":"<pre><code>BEGIN;\n</code></pre> <p>\u041d\u0430\u0447\u0430\u043b\u043e \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#commit","title":"COMMIT","text":"<pre><code>COMMIT;\n</code></pre> <p>\u0424\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#rollback","title":"ROLLBACK","text":"<p>ROLLBACK;</p> <p>\u041e\u0442\u043c\u0435\u043d\u044f\u0435\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#savepoint","title":"SAVEPOINT","text":"<pre><code>SAVEPOINT sp1;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0442\u043e\u0447\u043a\u0443 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043e\u0442\u043a\u0430\u0442\u0430.</p> <pre><code>ROLLBACK TO sp1;\n</code></pre>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#4","title":"4. \u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<p>\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u0434\u0435\u043d\u0435\u0433 \u043c\u0435\u0436\u0434\u0443 \u0441\u0447\u0435\u0442\u0430\u043c\u0438:</p> <pre><code>BEGIN;\n\nUPDATE accounts\nSET balance = balance - 1000\nWHERE id = 1;\n\nUPDATE accounts\nSET balance = balance + 1000\nWHERE id = 2;\n\nCOMMIT;\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0432\u0442\u043e\u0440\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439 \u2192 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f ROLLBACK.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#5-acid","title":"5. \u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430 ACID","text":"<p>ACID \u2014 \u0447\u0435\u0442\u044b\u0440\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439:</p> \u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 Atomicity \u0410\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u044c Consistency \u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c Isolation \u0418\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c Durability \u041d\u0430\u0434\u0451\u0436\u043d\u043e\u0441\u0442\u044c"},{"location":"Chapter_5/5.1-transactions-and-ACID/#6-atomicity","title":"6. Atomicity (\u0410\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u044c)","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0438\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0432\u0441\u0435.</p> <p>\u0415\u0441\u043b\u0438 \u043e\u0434\u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439 \u2014 \u0432\u0441\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u043e\u0442\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#7-consistency","title":"7. Consistency (\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c)","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0411\u0414 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u0432 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438.</p> <p>\u042d\u0442\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f:</p> <ul> <li>\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c\u0438</li> <li>\u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0430\u043c\u0438</li> <li>\u0432\u043d\u0435\u0448\u043d\u0438\u043c\u0438 \u043a\u043b\u044e\u0447\u0430\u043c\u0438</li> <li>\u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u043e\u0439</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#8-isolation","title":"8. Isolation (\u0418\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c)","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u043c\u0435\u0448\u0430\u0442\u044c \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0443.</p> <p>\u041e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u044c \u043a:</p> <ul> <li>\u0433\u0440\u044f\u0437\u043d\u043e\u043c\u0443 \u0447\u0442\u0435\u043d\u0438\u044e</li> <li>\u043d\u0435\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u043c\u0443 \u0447\u0442\u0435\u043d\u0438\u044e</li> <li>\u0444\u0430\u043d\u0442\u043e\u043c\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u043a\u0430\u043c</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#9","title":"9. \u0423\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438","text":"<p>\u0412 PostgreSQL \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f:</p> <ul> <li>Read Committed (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e)</li> <li>Repeatable Read</li> <li>Serializable</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#read-committed","title":"Read Committed","text":"<p>\u0412\u0438\u0434\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</p> <p>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u043d\u0435\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u044b\u0435 \u0447\u0442\u0435\u043d\u0438\u044f</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#repeatable-read","title":"Repeatable Read","text":"<ul> <li>\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 \u0434\u0430\u0451\u0442 \u0442\u0435 \u0436\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u041d\u0435\u0442 \u043d\u0435\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u0433\u043e \u0447\u0442\u0435\u043d\u0438\u044f</li> <li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u0444\u0430\u043d\u0442\u043e\u043c\u044b (\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e)</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#serializable","title":"Serializable","text":"<ul> <li>\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</li> <li>\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043a\u0430\u043a \u043f\u0440\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438</li> <li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#10-durability","title":"10. Durability (\u041d\u0430\u0434\u0451\u0436\u043d\u043e\u0441\u0442\u044c)","text":"<p>\u041f\u043e\u0441\u043b\u0435 COMMIT \u0434\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0434\u0430\u0436\u0435 \u043f\u0440\u0438 \u0441\u0431\u043e\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b.</p> <p>\u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f:</p> <ul> <li>\u0436\u0443\u0440\u043d\u0430\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c (WAL)</li> <li>\u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u043e\u043c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#11","title":"11. \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u0413\u0440\u044f\u0437\u043d\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 - \u0447\u0442\u0435\u043d\u0438\u0435 \u043d\u0435\u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u041d\u0435\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 - \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 SELECT \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0430\u0437\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.</p> <p>\u0424\u0430\u043d\u0442\u043e\u043c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 - \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 SELECT \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#12","title":"12. \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<pre><code>UPDATE employees SET salary = 100000;\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u043d\u0435\u0442 BEGIN, \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442\u0441\u044f.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#13","title":"13. \u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b","text":"<ul> <li>\u0422\u0440\u0438\u0433\u0433\u0435\u0440\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</li> <li>\u0415\u0441\u043b\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443 \u2014 \u0432\u0441\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u043e\u0442\u043a\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#14","title":"14. \u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u0424\u0443\u043d\u043a\u0446\u0438\u0438:</p> <ul> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</li> <li>\u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c COMMIT (\u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u0445)</li> </ul> <p>\u041f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b (CALL) \u043c\u043e\u0433\u0443\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0435\u0439.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#15","title":"15. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 UPDATE \u0431\u0435\u0437 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u041f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u041d\u0435\u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 \u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 dirty read PostgreSQL \u043d\u0435 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 ROLLBACK \u041f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445"},{"location":"Chapter_5/5.1-transactions-and-ACID/#16","title":"16. \u041a\u043e\u0433\u0434\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<ul> <li>\u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> <li>\u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f</li> <li>\u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446</li> <li>\u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0441 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0448\u0430\u0433\u0430\u043c\u0438</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#17","title":"17. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0430\u0441\u043f\u0435\u043a\u0442","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438:</p> <ul> <li>\u043e\u0441\u043d\u043e\u0432\u0430 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b \u0434\u043b\u044f \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c</li> <li>\u0442\u0435\u0441\u043d\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u044b \u0441 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e</li> </ul> <p>\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u043c\u043e\u0436\u0435\u0442:</p> <ul> <li>\u0441\u043d\u0438\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</li> <li>\u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438</li> <li>\u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 (deadlocks)</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#18","title":"18. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438:</p> <ul> <li>\u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u044e\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u0435\u0434\u0438\u043d\u043e\u0435 \u0446\u0435\u043b\u043e\u0435</li> <li>\u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 ACID</li> <li>\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 BEGIN / COMMIT / ROLLBACK</li> <li>\u0437\u0430\u0449\u0438\u0449\u0430\u044e\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0438 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435</li> <li>\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u043c \u043d\u0430\u0434\u0451\u0436\u043d\u043e\u0441\u0442\u0438 \u0411\u0414</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#_1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438</p> <pre><code>accounts (id SERIAL PRIMARY KEY, owner TEXT, balance NUMERIC);\norders (id SERIAL PRIMARY KEY, client_id INT, total_amount NUMERIC);\nemployees (id SERIAL PRIMARY KEY, salary NUMERIC);\n</code></pre>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#1-atomicity","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. \u0410\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u044c (Atomicity)","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u043c\u0435\u0436\u0434\u0443 \u0441\u0447\u0435\u0442\u0430\u043c\u0438:</p> <ul> <li>\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430</li> <li>\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u0434\u0440\u0443\u0433\u043e\u0433\u043e</li> <li>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</li> </ul> <p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e</li> <li>\u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439</li> <li>\u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0441 ROLLBACK</li> </ul> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u043a\u0430\u043a \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u044c.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#2-savepoint","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. SAVEPOINT","text":"<ol> <li>\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e</li> <li>\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432</li> <li>\u0421\u043e\u0437\u0434\u0430\u0442\u044c SAVEPOINT</li> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u0448\u0438\u0431\u043e\u0447\u043d\u0443\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e</li> <li>\u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a SAVEPOINT</li> </ol> <p>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 ROLLBACK \u0438 ROLLBACK TO.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#3-consistency","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. Consistency","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f:</p> <ul> <li>\u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u0430\u043a\u0430\u0437</li> <li>\u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430</li> <li>\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0447\u0442\u043e \u0441\u0443\u043c\u043c\u0430 \u043d\u0435 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f</li> </ul> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u043a\u0430\u043a\u0438\u0435 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u044b \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c:</p> <ul> <li>\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f</li> <li>\u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b</li> <li>\u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f</li> </ul>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#4_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0418\u0437\u043e\u043b\u044f\u0446\u0438\u044f (\u0430\u043d\u0430\u043b\u0438\u0437)","text":"<p>\u0421\u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e \u0432 \u0434\u0432\u0443\u0445 \u0441\u0435\u0441\u0441\u0438\u044f\u0445:</p> <ul> <li>\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0435\u0441\u0441\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0431\u0430\u043b\u0430\u043d\u0441</li> <li>\u0412\u0442\u043e\u0440\u0430\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 SELECT</li> </ul> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0440\u0438 \u0443\u0440\u043e\u0432\u043d\u0435:</p> <ul> <li>READ COMMITTED</li> <li>REPEATABLE READ</li> </ul> <p>\u041e\u043f\u0438\u0441\u0430\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f \u0432 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0438.</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c:</p> <ul> <li>\u0434\u0432\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u044f\u044e\u0442 \u043e\u0434\u0438\u043d \u0438 \u0442\u043e\u0442 \u0436\u0435 \u043d\u0430\u0431\u043e\u0440 \u0441\u0442\u0440\u043e\u043a</li> <li>\u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430</li> </ul> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c:</p> <p>\u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 deadlock</p> <p>\u043a\u0430\u043a PostgreSQL \u0435\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442</p>"},{"location":"Chapter_5/5.1-transactions-and-ACID/#_2","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0438 \u0437\u0430\u0447\u0435\u043c \u043e\u043d\u0430 \u043d\u0443\u0436\u043d\u0430?</li> <li>\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u0443\u0439\u0442\u0435 ACID \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u0435 \u043a\u0430\u0436\u0434\u043e\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e.</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f COMMIT \u043e\u0442 ROLLBACK?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 SAVEPOINT \u0438 \u043a\u043e\u0433\u0434\u0430 \u043e\u043d \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f?</li> <li>\u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442?</li> <li>\u041a\u0430\u043a\u0438\u0435 \u0443\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 PostgreSQL?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 PostgreSQL \u043d\u0435 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442 Dirty Read?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 deadlock \u0438 \u043a\u0430\u043a \u043e\u043d \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c COMMIT?</li> <li>\u0412 \u043a\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e?</li> </ol>"},{"location":"Chapter_5/5.2-Isolation-levels/","title":"\u0423\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439","text":""},{"location":"Chapter_5/5.2-Isolation-levels/#1","title":"1. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b \u0443\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438","text":"<p>\u0412 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e.</p> <p>\u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u0445 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435\u043c, \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u044e\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b:</p> <ul> <li>\u0447\u0442\u0435\u043d\u0438\u0435 \u043d\u0435\u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0436\u0434\u0443 \u0447\u0442\u0435\u043d\u0438\u044f\u043c\u0438</li> <li>\u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u00ab\u0444\u0430\u043d\u0442\u043e\u043c\u043d\u044b\u0445\u00bb \u0441\u0442\u0440\u043e\u043a</li> </ul> <p>\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442, \u043d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0432\u0438\u0434\u044f\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0430.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#2","title":"2. \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":""},{"location":"Chapter_5/5.2-Isolation-levels/#_2","title":"\u0413\u0440\u044f\u0437\u043d\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0447\u0438\u0442\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u0440\u0443\u0433\u0430\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0435\u0449\u0451 \u043d\u0435 \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043b\u0430.</p> <p>\u0412 PostgreSQL \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e (\u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f).</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#22","title":"2.2 \u041d\u0435\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435","text":"<p>\u041e\u0434\u043d\u0430 \u0438 \u0442\u0430 \u0436\u0435 \u0441\u0442\u0440\u043e\u043a\u0430 \u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0434\u0432\u0430\u0436\u0434\u044b, \u043d\u043e \u043c\u0435\u0436\u0434\u0443 \u0447\u0442\u0435\u043d\u0438\u044f\u043c\u0438 \u0431\u044b\u043b\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0435\u0439.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#23","title":"2.3 \u0424\u0430\u043d\u0442\u043e\u043c\u043d\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435","text":"<p>\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 SELECT \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0440\u0430\u043d\u044c\u0448\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#3-sql-standard","title":"3. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0443\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 (SQL Standard)","text":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0413\u0440\u044f\u0437\u043d\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 \u041d\u0435\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 \u0424\u0430\u043d\u0442\u043e\u043c\u043d\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 Read Uncommitted \u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d Read Committed \u041d\u0435\u0442 \u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d Repeatable Read \u041d\u0435\u0442 \u041d\u0435\u0442 \u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d Serializable \u041d\u0435\u0442 \u041d\u0435\u0442 \u041d\u0435\u0442"},{"location":"Chapter_5/5.2-Isolation-levels/#4-postgresql","title":"4. \u0423\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0432 PostgreSQL","text":"<p>PostgreSQL \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442:</p> <ul> <li>Read Committed (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e)</li> <li>Repeatable Read</li> <li>Serializable</li> </ul> <p>Read Uncommitted \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u0430\u043a Read Committed.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#5-read-committed","title":"5. Read Committed","text":"<p>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.</p> <pre><code>SET TRANSACTION ISOLATION LEVEL READ COMMITTED;\n</code></pre>"},{"location":"Chapter_5/5.2-Isolation-levels/#_3","title":"\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435:","text":"<ul> <li>\u041a\u0430\u0436\u0434\u043e\u0435 <code>SELECT</code> \u0432\u0438\u0434\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u041c\u0435\u0436\u0434\u0443 \u0434\u0432\u0443\u043c\u044f <code>SELECT</code> \u0432\u043d\u0443\u0442\u0440\u0438 \u043e\u0434\u043d\u043e\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c\u0441\u044f</li> </ul> <p>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b:</p> <ul> <li>\u043d\u0435\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u044b\u0435 \u0447\u0442\u0435\u043d\u0438\u044f</li> <li>\u0444\u0430\u043d\u0442\u043e\u043c\u044b</li> </ul>"},{"location":"Chapter_5/5.2-Isolation-levels/#_4","title":"\u041f\u0440\u0438\u043c\u0435\u0440","text":"<p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f A:</p> <pre><code>BEGIN;\nSELECT balance FROM accounts WHERE id = 1;\n</code></pre> <p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f B:</p> <pre><code>UPDATE accounts SET balance = 5000 WHERE id = 1;\nCOMMIT;\n</code></pre> <p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f A \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442 SELECT \u2192 \u0443\u0432\u0438\u0434\u0438\u0442 \u043d\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#6-repeatable-read","title":"6. Repeatable Read","text":"<pre><code>SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n</code></pre>"},{"location":"Chapter_5/5.2-Isolation-levels/#_5","title":"\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435:","text":"<ul> <li>\u0412\u0441\u0435 <code>SELECT</code> \u0432\u043d\u0443\u0442\u0440\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0432\u0438\u0434\u044f\u0442 \u0441\u043d\u0438\u043c\u043e\u043a \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u043c\u043e\u043c\u0435\u043d\u0442 <code>BEGIN</code></li> <li>\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 \u0434\u0430\u0451\u0442 \u0442\u043e\u0442 \u0436\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442</li> </ul> <p>Non-repeatable read \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d.</p> <p>Phantom read \u0432 PostgreSQL \u0442\u0430\u043a\u0436\u0435 \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u044f MVCC.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#snapshot-isolation","title":"Snapshot Isolation","text":"<p>PostgreSQL \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c MVCC (Multi-Version Concurrency Control).</p> <p>\u041a\u0430\u0436\u0434\u0430\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0432\u0438\u0434\u0438\u0442 \u0441\u0432\u043e\u044e \u00ab\u0432\u0435\u0440\u0441\u0438\u044e\u00bb \u0434\u0430\u043d\u043d\u044b\u0445.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#7-serializable","title":"7. Serializable","text":"<pre><code>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;\n</code></pre> <p>\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435:</p> <ul> <li>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0442\u0430\u043a, \u043a\u0430\u043a \u0431\u0443\u0434\u0442\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e</li> <li>\u0415\u0441\u043b\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442 \u2014 \u043e\u0434\u043d\u0430 \u0438\u0437 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439</li> </ul> <p>\u041e\u0448\u0438\u0431\u043a\u0430:</p> <pre><code>ERROR: could not serialize access due to concurrent update\n</code></pre> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#8-mvcc-postgresql","title":"8. MVCC \u2014 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c PostgreSQL","text":"<p>PostgreSQL \u043d\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 \u0447\u0442\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u0437\u0430\u043f\u0438\u0441\u0438.</p> <p>\u041a\u0430\u0436\u0434\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0438\u043c\u0435\u0435\u0442:</p> <ul> <li>xmin \u2014 \u043a\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u043b</li> <li>xmax \u2014 \u043a\u0442\u043e \u0443\u0434\u0430\u043b\u0438\u043b</li> </ul> <p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0432\u0438\u0434\u044f\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u00ab\u0441\u0432\u043e\u0438\u00bb \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 \u0441\u0442\u0440\u043e\u043a.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#9","title":"9. \u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f","text":"<p>\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430:</p> <ul> <li>\u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a</li> <li>\u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u043e\u0432</li> <li>\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</li> </ul> <p>\u0427\u0435\u043c \u0432\u044b\u0448\u0435 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u2192 \u0442\u0435\u043c:</p> <ul> <li>\u0432\u044b\u0448\u0435 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</li> <li>\u043d\u0438\u0436\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</li> </ul>"},{"location":"Chapter_5/5.2-Isolation-levels/#10","title":"10. \u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0443\u0440\u043e\u0432\u043d\u0435\u0439","text":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0420\u0438\u0441\u043a \u043e\u0448\u0438\u0431\u043e\u043a Read Committed \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0412\u044b\u0441\u043e\u043a\u0430\u044f \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 Repeatable Read \u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u041a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u044b Serializable \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u041d\u0438\u0436\u0435 \u041e\u0448\u0438\u0431\u043a\u0438 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438"},{"location":"Chapter_5/5.2-Isolation-levels/#11","title":"11. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0436\u0434\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c","text":"<p>Read Committed:</p> <ul> <li>\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 CRUD-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> <li>\u043e\u0442\u0447\u0451\u0442\u043d\u043e\u0441\u0442\u044c</li> <li>\u043d\u0435 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0435 \u0440\u0430\u0441\u0447\u0451\u0442\u044b</li> </ul> <p>Repeatable Read:</p> <ul> <li>\u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430</li> <li>\u0440\u0430\u0441\u0447\u0451\u0442 \u0431\u0430\u043b\u0430\u043d\u0441\u043e\u0432</li> <li>\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u0442\u0440\u0435\u0431\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul> <p>Serializable:</p> <ul> <li>\u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u044b\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b</li> <li>\u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b</li> <li>\u0440\u0430\u0441\u0447\u0451\u0442\u044b \u0441 \u0436\u0451\u0441\u0442\u043a\u043e\u0439 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c\u044e</li> </ul>"},{"location":"Chapter_5/5.2-Isolation-levels/#12","title":"12. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 Dirty Read PostgreSQL \u0435\u0433\u043e \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u041d\u0435\u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 snapshot \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u041e\u0448\u0438\u0431\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u041f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u0431\u0435\u0437 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u041f\u0430\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438"},{"location":"Chapter_5/5.2-Isolation-levels/#13","title":"13. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434","text":"<p>\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u2014 \u044d\u0442\u043e \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441\u0441 \u043c\u0435\u0436\u0434\u0443:</p> <ul> <li>\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c\u044e</li> <li>\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0441\u0442\u044c\u044e</li> <li>\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e</li> </ul> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0442\u0438\u043f\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u044b.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#14","title":"14. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u0423\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438:</p> <ul> <li>\u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439</li> <li>\u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u0435 MVCC</li> <li>\u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u043e\u0441\u043e\u0437\u043d\u0430\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0431\u043e\u0440\u0430</li> </ul>"},{"location":"Chapter_5/5.2-Isolation-levels/#_6","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c:</p> <pre><code>accounts (\n    id SERIAL PRIMARY KEY,\n    owner TEXT,\n    balance NUMERIC\n);\n</code></pre> <p>\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#1-read-committed","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. Read Committed","text":"<p>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0434\u0432\u0435 \u0441\u0435\u0441\u0441\u0438\u0438 (A \u0438 B).</p> <p>\u0421\u0435\u0441\u0441\u0438\u044f A:</p> <pre><code>BEGIN;\nSET TRANSACTION ISOLATION LEVEL READ COMMITTED;\nSELECT balance FROM accounts WHERE id = 1;\n</code></pre> <p>\u0421\u0435\u0441\u0441\u0438\u044f B:</p> <pre><code>UPDATE accounts SET balance = 9999 WHERE id = 1;\nCOMMIT;\n</code></pre> <p>\u0421\u0435\u0441\u0441\u0438\u044f A:</p> <ul> <li>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c SELECT.</li> </ul> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u0447\u0435\u043c\u0443?</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#2-repeatable-read","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. Repeatable Read","text":"<p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442, \u043d\u043e \u0441 \u0443\u0440\u043e\u0432\u043d\u0435\u043c:</p> <pre><code>SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n</code></pre> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435? \u043f\u043e\u0447\u0435\u043c\u0443 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f?</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#3-serializable","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. Serializable","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u0432\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u044e\u0442 \u0431\u0430\u043b\u0430\u043d\u0441 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430 \u0437\u0430\u0442\u0435\u043c \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c:</p> <pre><code>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;\n</code></pre> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430? \u043a\u0430\u043a\u0430\u044f \u0438\u043c\u0435\u043d\u043d\u043e? \u043f\u043e\u0447\u0435\u043c\u0443?</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0410\u043d\u0430\u043b\u0438\u0437 \u0444\u0430\u043d\u0442\u043e\u043c\u043d\u043e\u0433\u043e \u0447\u0442\u0435\u043d\u0438\u044f","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443:</p> <pre><code>orders (id SERIAL, total NUMERIC);\n</code></pre> <p>\u0412 \u0434\u0432\u0443\u0445 \u0441\u0435\u0441\u0441\u0438\u044f\u0445:</p> <ul> <li>\u043e\u0434\u043d\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 &gt; 1000</li> <li>\u0434\u0440\u0443\u0433\u0430\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u0438:</p> <ul> <li>Read Committed</li> <li>Repeatable Read</li> </ul> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442:</p> <ul> <li> <p>\u0434\u0432\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u044e\u0442 \u043e\u0434\u043d\u0443 \u0438 \u0442\u0443 \u0436\u0435 \u0441\u0442\u0440\u043e\u043a\u0443</p> </li> <li> <p>\u043d\u0435 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0441\u0440\u0430\u0437\u0443</p> </li> </ul> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442? \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430? \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 deadlock?</p>"},{"location":"Chapter_5/5.2-Isolation-levels/#_7","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438?</li> <li>\u041a\u0430\u043a\u0438\u0435 \u0443\u0440\u043e\u0432\u043d\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 PostgreSQL?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 Dirty Read \u0438 \u043f\u043e\u0447\u0435\u043c\u0443 \u0432 PostgreSQL \u043e\u043d \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d?</li> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 Read Committed \u0438 Repeatable Read?</li> <li>\u041a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c MVCC?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 Serializable \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u043e\u0439?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 snapshot \u0434\u0430\u043d\u043d\u044b\u0445?</li> <li>\u041a\u0430\u043a \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c?</li> <li>\u0412 \u043a\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Serializable?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u043e \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u0440\u0435\u0434\u0435\u043d?</li> </ol>"},{"location":"Chapter_5/5.3-indexes/","title":"\u0418\u043d\u0434\u0435\u043a\u0441\u044b","text":"<p>\u0422\u0438\u043f: \u043b\u0435\u043a\u0446\u0438\u044f</p>"},{"location":"Chapter_5/5.3-indexes/#1","title":"1. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0438\u043d\u0434\u0435\u043a\u0441","text":"<p>\u0418\u043d\u0434\u0435\u043a\u0441 \u2014 \u044d\u0442\u043e \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0430\u044f \u0434\u043b\u044f \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0441\u0442\u0440\u043e\u043a \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.</p> <p>\u0410\u043d\u0430\u043b\u043e\u0433\u0438\u044f: \u0438\u043d\u0434\u0435\u043a\u0441 \u0432 \u0411\u0414 \u2014 \u044d\u0442\u043e \u043a\u0430\u043a \u043e\u0433\u043b\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u043a\u043d\u0438\u0433\u0435.</p> <p>\u0411\u0435\u0437 \u0438\u043d\u0434\u0435\u043a\u0441\u0430:</p> <ul> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0436\u0434\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430</li> </ul> <p>\u0421 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u043c:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0438\u043d\u0434\u0435\u043a\u0441\u043d\u043e\u0435 \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043b\u044e\u0447\u0443</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#2","title":"2. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b \u0438\u043d\u0434\u0435\u043a\u0441\u044b","text":"<p>\u0418\u043d\u0434\u0435\u043a\u0441\u044b \u0443\u0441\u043a\u043e\u0440\u044f\u044e\u0442:</p> <ul> <li>WHERE</li> <li>JOIN</li> <li>ORDER BY</li> <li>GROUP BY</li> <li>DISTINCT</li> </ul> <p>\u041d\u043e \u0437\u0430\u043c\u0435\u0434\u043b\u044f\u044e\u0442:</p> <ul> <li>INSERT</li> <li>UPDATE</li> <li>DELETE</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#3","title":"3. \u041a\u0430\u043a \u0441\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u0438\u043d\u0434\u0435\u043a\u0441","text":"<pre><code>CREATE INDEX index_name\nON table_name (column_name);\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>CREATE INDEX idx_employees_salary\nON employees (salary);\n</code></pre>"},{"location":"Chapter_5/5.3-indexes/#4","title":"4. \u041f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447 \u0438 \u0438\u043d\u0434\u0435\u043a\u0441","text":"<p><code>PRIMARY KEY</code></p> <p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u0451\u0442:</p> <ul> <li>\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441</li> <li>\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#5-postgresql","title":"5. \u0422\u0438\u043f\u044b \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0432 PostgreSQL","text":"<p>PostgreSQL \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0438\u043f\u043e\u0432:</p> <ul> <li>B-Tree (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e)</li> <li>Hash</li> <li>GIN</li> <li>GiST</li> <li>BRIN</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#6-b-tree","title":"6. B-Tree","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.</p> <p>\u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f:</p> <ul> <li><code>=</code></li> <li><code>&lt;</code>, <code>&gt;</code></li> <li><code>BETWEEN</code></li> <li><code>ORDER BY</code></li> </ul> <p>\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u0438 \u0441\u0430\u043c\u044b\u0439 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0442\u0438\u043f.</p>"},{"location":"Chapter_5/5.3-indexes/#7-hash","title":"7. Hash","text":"<p>\u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0440\u0430\u0432\u0435\u043d\u0441\u0442\u0432\u0430 (<code>=</code>)</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0434\u043a\u043e.</p>"},{"location":"Chapter_5/5.3-indexes/#8-gin","title":"8. GIN","text":"<p>\u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f:</p> <ul> <li>\u043c\u0430\u0441\u0441\u0438\u0432\u043e\u0432</li> <li>JSONB</li> <li>\u043f\u043e\u043b\u043d\u043e\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#9-gist","title":"9. GiST","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0433\u0435\u043e\u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u043e\u0432</li> <li>\u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#10-brin","title":"10. BRIN","text":"<p>\u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f:</p> <ul> <li>\u043e\u0447\u0435\u043d\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446</li> <li>\u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u043e\u0439 (\u043f\u043e \u0434\u0430\u0442\u0435, id)</li> </ul> <p>\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u043f\u0440\u0438:</p> <ul> <li>\u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043e\u0431\u044a\u0451\u043c\u0430\u0445</li> <li>\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#11","title":"11. \u0421\u043e\u0441\u0442\u0430\u0432\u043d\u044b\u0435 (\u043c\u0443\u043b\u044c\u0442\u0438\u043a\u043e\u043b\u043e\u043d\u043e\u0447\u043d\u044b\u0435) \u0438\u043d\u0434\u0435\u043a\u0441\u044b","text":"<pre><code>CREATE INDEX idx_orders_client_date\nON orders (client_id, order_date);\n</code></pre> <p>\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432 \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f, \u0435\u0441\u043b\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0441\u0442\u043e\u043b\u0431\u0446\u0430</p>"},{"location":"Chapter_5/5.3-indexes/#12","title":"12. \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b","text":"<pre><code>CREATE UNIQUE INDEX idx_unique_email\nON users (email);\n</code></pre> <p>\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u044e\u0442 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0434\u0443\u0431\u043b\u0438\u043a\u0430\u0442\u043e\u0432.</p>"},{"location":"Chapter_5/5.3-indexes/#13","title":"13. \u0427\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b","text":"<p>\u0421\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u0438 \u0441\u0442\u0440\u043e\u043a:</p> <pre><code>CREATE INDEX idx_active_clients\nON clients (city)\nWHERE status = 'active';\n</code></pre> <p>\u0423\u0441\u043a\u043e\u0440\u044f\u044e\u0442 \u0432\u044b\u0431\u043e\u0440\u043a\u0438 \u043f\u043e \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c.</p>"},{"location":"Chapter_5/5.3-indexes/#14-explain","title":"14. \u0418\u043d\u0434\u0435\u043a\u0441\u044b \u0438 EXPLAIN","text":"<p>\u0414\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f:</p> <pre><code>EXPLAIN ANALYZE SELECT ...\n</code></pre> <p>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442:</p> <ul> <li>Seq Scan</li> <li>Index Scan</li> <li>Bitmap Index Scan</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#15","title":"15. \u041a\u043e\u0433\u0434\u0430 \u0438\u043d\u0434\u0435\u043a\u0441 \u041d\u0415 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f","text":"<p>\u0418\u043d\u0434\u0435\u043a\u0441 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f, \u0435\u0441\u043b\u0438:</p> <ul> <li>\u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0430\u044f</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043b\u0431\u0446\u0435</li> <li>\u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043d\u0435 \u0441\u0435\u043b\u0435\u043a\u0442\u0438\u0432\u043d\u043e</li> <li>\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u043b\u0430</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#16","title":"16. \u0418\u043d\u0434\u0435\u043a\u0441\u044b \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u0415\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f:</p> <pre><code>WHERE LOWER(name) = 'ivan'\n</code></pre> <p>\u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442.</p> <p>\u041d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441:</p> <pre><code>CREATE INDEX idx_lower_name\nON users (LOWER(name));\n</code></pre>"},{"location":"Chapter_5/5.3-indexes/#17","title":"17. \u0418\u043d\u0434\u0435\u043a\u0441\u044b \u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0418\u043d\u0434\u0435\u043a\u0441 \u0443\u0441\u043a\u043e\u0440\u044f\u0435\u0442 \u0447\u0442\u0435\u043d\u0438\u0435, \u043d\u043e:</p> <ul> <li>\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0440\u0430\u0437\u043c\u0435\u0440 \u0411\u0414</li> <li>\u0437\u0430\u043c\u0435\u0434\u043b\u044f\u0435\u0442 \u0432\u0441\u0442\u0430\u0432\u043a\u0443 \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#18","title":"18. \u0418\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b","text":"<p>\u041e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438:</p> <ul> <li>\u0434\u0443\u0431\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b</li> <li>\u043d\u0435\u043d\u0443\u0436\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b</li> <li>\u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#19","title":"19. \u041a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441","text":"<p>\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u043a\u0430\u043a\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0447\u0430\u0449\u0435</li> <li>\u043f\u043e \u043a\u0430\u043a\u0438\u043c \u0441\u0442\u043e\u043b\u0431\u0446\u0430\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f</li> <li>\u0441\u0435\u043b\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u043e\u0431\u044a\u0451\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u044b</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#20","title":"20. \u0418\u043d\u0434\u0435\u043a\u0441\u044b \u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<p>\u0418\u043d\u0434\u0435\u043a\u0441\u044b:</p> <ul> <li>\u0443\u0447\u0430\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430\u0445</li> <li>\u043c\u043e\u0433\u0443\u0442 \u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 deadlock</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u043e\u0438\u0441\u043a\u0435 \u0441\u0442\u0440\u043e\u043a \u0434\u043b\u044f UPDATE</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#21","title":"21. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0418\u043d\u0434\u0435\u043a\u0441 \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0418\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u044f\u0434\u043a\u0430 \u0432 \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u043e\u043c \u0438\u043d\u0434\u0435\u043a\u0441\u0435 \u041d\u0435\u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 EXPLAIN \u041d\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0418\u043d\u0434\u0435\u043a\u0441 \u043d\u0430 \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0411\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u043e"},{"location":"Chapter_5/5.3-indexes/#22","title":"22. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u0418\u043d\u0434\u0435\u043a\u0441\u044b:</p> <ul> <li>\u0443\u0441\u043a\u043e\u0440\u044f\u044e\u0442 \u043f\u043e\u0438\u0441\u043a</li> <li>\u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u043e\u0441\u043e\u0437\u043d\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>\u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438</li> <li>\u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> </ul>"},{"location":"Chapter_5/5.3-indexes/#_2","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c:</p> <pre><code>employees (id SERIAL PRIMARY KEY, full_name TEXT, salary NUMERIC, department TEXT);\norders (id SERIAL PRIMARY KEY, client_id INT, order_date DATE, total_amount NUMERIC);\nclients (id SERIAL PRIMARY KEY, full_name TEXT, city TEXT, status TEXT);\n</code></pre> <p>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u0438\u043d\u0438\u043c\u0443\u043c 10 000 \u0441\u0442\u0440\u043e\u043a\u0430\u043c\u0438 (\u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438), \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0418\u0418.</p>"},{"location":"Chapter_5/5.3-indexes/#1-where","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. \u0418\u043d\u0434\u0435\u043a\u0441 \u0438 WHERE","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441:</p> <pre><code>EXPLAIN ANALYZE\nSELECT * FROM employees WHERE salary &gt; 100000;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u043f\u043e salary.</p> <p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c EXPLAIN ANALYZE.</p> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c:</p> <p>-\u0442\u0438\u043f \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</p> <p>-\u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</p> <p>-\u043f\u043b\u0430\u043d \u0437\u0430\u043f\u0440\u043e\u0441\u0430</p>"},{"location":"Chapter_5/5.3-indexes/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. \u0421\u043e\u0441\u0442\u0430\u0432\u043d\u043e\u0439 \u0438\u043d\u0434\u0435\u043a\u0441","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441:</p> <pre><code>SELECT * FROM orders\nWHERE client_id = 10\nAND order_date &gt;= '2024-01-01';\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u043e\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 (client_id, order_date).</p> <p>\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c: \u043f\u043e\u0447\u0435\u043c\u0443 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432 \u0432\u0430\u0436\u0435\u043d.</p>"},{"location":"Chapter_5/5.3-indexes/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u0427\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0434\u043b\u044f:</p> <pre><code>WHERE status = 'active';\n</code></pre> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u0430.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u0432 \u043a\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0432\u044b\u0433\u043e\u0434\u0435\u043d.</p>"},{"location":"Chapter_5/5.3-indexes/#4_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441:</p> <pre><code>SELECT * FROM clients\nWHERE LOWER(full_name) = 'ivan ivanov';\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_5/5.3-indexes/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 (\u0435\u0441\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e).</p> <p>\u041e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u0442\u044c, \u043a\u0430\u043a\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438 \u043f\u043e\u0447\u0435\u043c\u0443.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437 \u043f\u043b\u0430\u043d\u043e\u0432 \u0438 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</p>"},{"location":"Chapter_5/5.3-indexes/#_3","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0438\u043d\u0434\u0435\u043a\u0441 \u0438 \u0437\u0430\u0447\u0435\u043c \u043e\u043d \u043d\u0443\u0436\u0435\u043d?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0438\u043d\u0434\u0435\u043a\u0441 \u0443\u0441\u043a\u043e\u0440\u044f\u0435\u0442 SELECT, \u043d\u043e \u0437\u0430\u043c\u0435\u0434\u043b\u044f\u0435\u0442 INSERT?</li> <li>\u041a\u0430\u043a\u0438\u0435 \u0442\u0438\u043f\u044b \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 PostgreSQL?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f B-Tree \u043e\u0442 Hash?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432 \u0432\u0430\u0436\u0435\u043d \u0432 \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u043e\u043c \u0438\u043d\u0434\u0435\u043a\u0441\u0435?</li> <li>\u041a\u043e\u0433\u0434\u0430 \u0438\u043d\u0434\u0435\u043a\u0441 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0438 \u043a\u043e\u0433\u0434\u0430 \u043e\u043d \u043f\u043e\u043b\u0435\u0437\u0435\u043d?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u0432\u0440\u0435\u0434\u043d\u044b?</li> <li>\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043b\u0438 \u0438\u043d\u0434\u0435\u043a\u0441?</li> </ol>"},{"location":"Chapter_5/5.4-explane-analyze/","title":"EXPLAIN ANALYZE","text":"<p>\u0422\u0438\u043f: \u043b\u0435\u043a\u0446\u0438\u044f</p>"},{"location":"Chapter_5/5.4-explane-analyze/#1-explain","title":"1. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u0435\u043d EXPLAIN","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u0437\u0430\u043f\u0440\u043e\u0441 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e, \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u0432\u043e\u043f\u0440\u043e\u0441:</p> <ul> <li>\u0427\u0442\u043e \u0438\u043c\u0435\u043d\u043d\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0421\u0423\u0411\u0414 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430?</li> </ul> <p>\u041e\u0442\u0432\u0435\u0442: \u041a\u043e\u043c\u0430\u043d\u0434\u0430 EXPLAIN \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u2014 \u0442\u043e \u0435\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e, \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u043c.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#2-explain-vs-explain-analyze","title":"2. EXPLAIN vs EXPLAIN ANALYZE","text":""},{"location":"Chapter_5/5.4-explane-analyze/#explain","title":"EXPLAIN","text":"<pre><code>EXPLAIN SELECT * FROM employees WHERE salary &gt; 100000;\n</code></pre> <ul> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u043c\u044b\u0439 \u043f\u043b\u0430\u043d</li> <li>\u0417\u0430\u043f\u0440\u043e\u0441 \u041d\u0415 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f</li> </ul> <pre><code>EXPLAIN ANALYZE\nEXPLAIN ANALYZE SELECT * FROM employees WHERE salary &gt; 100000;\n</code></pre> <ul> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441</li> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</li> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a</li> </ul> <p>\u0414\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0438\u043c\u0435\u043d\u043d\u043e EXPLAIN ANALYZE.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#3","title":"3. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043f\u043b\u0430\u043d\u0430","text":"<p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>Seq Scan on employees\n  (cost=0.00..431.00 rows=100 width=48)\n  (actual time=0.020..5.120 rows=120 loops=1)\n</code></pre>"},{"location":"Chapter_5/5.4-explane-analyze/#4","title":"4. \u0420\u0430\u0437\u0431\u043e\u0440 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432","text":""},{"location":"Chapter_5/5.4-explane-analyze/#cost","title":"cost","text":"<pre><code>cost=0.00..431.00\n</code></pre> <ul> <li>\u041e\u0446\u0435\u043d\u043a\u0430 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440\u0430</li> <li>\u041d\u0435 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f</li> <li>\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#rows","title":"rows","text":"<pre><code>rows=100\n</code></pre> <p>\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a</p>"},{"location":"Chapter_5/5.4-explane-analyze/#actual-rows","title":"actual rows","text":"<pre><code>actual rows=120\n</code></pre> <p>\u0420\u0435\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a</p> <p>\u0415\u0441\u043b\u0438 \u0441\u0438\u043b\u044c\u043d\u043e \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u2014 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u043b\u0430.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#actual-time","title":"actual time","text":"<pre><code>actual time=0.020..5.120\n</code></pre> <p>\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0438 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</p>"},{"location":"Chapter_5/5.4-explane-analyze/#5","title":"5. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439","text":""},{"location":"Chapter_5/5.4-explane-analyze/#seq-scan-sequential-scan","title":"Seq Scan (Sequential Scan)","text":"<p>\u041f\u043e\u043b\u043d\u043e\u0435 \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p> <pre><code>Seq Scan on employees\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0435\u0441\u043b\u0438:</p> <ul> <li>\u043d\u0435\u0442 \u0438\u043d\u0434\u0435\u043a\u0441\u0430</li> <li>\u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0430\u044f</li> <li>\u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043d\u0435 \u0441\u0435\u043b\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0435</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#index-scan","title":"Index Scan","text":"<p>\u041f\u043e\u0438\u0441\u043a \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0434\u0435\u043a\u0441.</p> <pre><code>Index Scan using idx_salary on employees\n</code></pre> <p>\u0411\u044b\u0441\u0442\u0440\u0435\u0435 \u043f\u0440\u0438 \u0441\u0435\u043b\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#bitmap-index-scan","title":"Bitmap Index Scan","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438:</p> <ul> <li>\u0431\u043e\u043b\u044c\u0448\u043e\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439</li> <li>\u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445</li> </ul> <p>\u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0441:</p> <pre><code>Bitmap Heap Scan\n</code></pre>"},{"location":"Chapter_5/5.4-explane-analyze/#nested-loop","title":"Nested Loop","text":"<p>\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446.</p> <p>\u041f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f:</p> <ul> <li>\u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446</li> <li>\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 JOIN</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#hash-join","title":"Hash Join","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u0445\u0435\u0448-\u0442\u0430\u0431\u043b\u0438\u0446\u0430.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438:</p> <ul> <li>\u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445</li> <li>\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u0438\u043d\u0434\u0435\u043a\u0441\u0430</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#merge-join","title":"Merge Join","text":"<p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0435\u0441\u043b\u0438:</p> <ul> <li>\u0435\u0441\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441\u044b</li> <li>\u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0436\u0435 \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#6","title":"6. \u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0447\u0442\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u043d\u0430","text":"<p>\u041f\u043b\u0430\u043d \u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0441\u043d\u0438\u0437\u0443 \u0432\u0432\u0435\u0440\u0445.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>Nested Loop\n  -&gt; Seq Scan on clients\n  -&gt; Index Scan on orders\n</code></pre> <p>\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0438\u0436\u043d\u044f\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f, \u0437\u0430\u0442\u0435\u043c \u0432\u0435\u0440\u0445\u043d\u044f\u044f.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#7","title":"7. \u041f\u0440\u0438\u043c\u0435\u0440 \u0430\u043d\u0430\u043b\u0438\u0437\u0430","text":"<p>\u0417\u0430\u043f\u0440\u043e\u0441:</p> <pre><code>SELECT *\nFROM orders\nWHERE client_id = 10;\n</code></pre> <p>\u0411\u0435\u0437 \u0438\u043d\u0434\u0435\u043a\u0441\u0430 \u2192 Seq Scan \u0421 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u043c \u2192 Index Scan</p> <p>\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 EXPLAIN ANALYZE \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0440\u0435\u0430\u043b\u044c\u043d\u0443\u044e \u0440\u0430\u0437\u043d\u0438\u0446\u0443.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#8-analyze","title":"8. ANALYZE \u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430","text":"<p>\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u043e\u043f\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443.</p> <p>\u0415\u0441\u043b\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u043b\u0430:</p> <pre><code>ANALYZE table_name;\n</code></pre> <p>\u0438\u043b\u0438</p> <pre><code>VACUUM ANALYZE;\n</code></pre>"},{"location":"Chapter_5/5.4-explane-analyze/#9-buffers","title":"9. BUFFERS","text":"<pre><code>EXPLAIN (ANALYZE, BUFFERS) SELECT ...\n</code></pre> <p>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442:</p> <ul> <li>\u0447\u0442\u0435\u043d\u0438\u044f \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438</li> <li>\u0447\u0442\u0435\u043d\u0438\u044f \u0441 \u0434\u0438\u0441\u043a\u0430</li> </ul> <p>\u041f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0432\u044b\u044f\u0432\u0438\u0442\u044c I/O-\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#10-format-json","title":"10. FORMAT JSON","text":"<pre><code>EXPLAIN (ANALYZE, FORMAT JSON) SELECT ...\n</code></pre> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f:</p> <ul> <li>\u0434\u043b\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0430\u043d\u0430\u043b\u0438\u0437\u0430</li> <li>\u0434\u043b\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043b\u0430\u043d\u0430</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#11","title":"11. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b","text":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 Seq Scan \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u041d\u0435\u0442 \u0438\u043d\u0434\u0435\u043a\u0441\u0430 \u0411\u043e\u043b\u044c\u0448\u043e\u0439 \u0440\u0430\u0437\u0440\u044b\u0432 rows/actual rows \u041f\u043b\u043e\u0445\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 Nested Loop \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0445 \u041d\u0435\u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043b\u0430\u043d \u0414\u043e\u043b\u0433\u0438\u0439 Hash Join \u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0430\u043c\u044f\u0442\u0438"},{"location":"Chapter_5/5.4-explane-analyze/#12-explain-analyze","title":"12. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c EXPLAIN ANALYZE","text":"<ul> <li>\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439 <code>SELECT</code></li> <li>\u0441\u043b\u043e\u0436\u043d\u044b\u0439 <code>JOIN</code></li> <li>GROUP BY</li> <li>\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0438\u043d\u0434\u0435\u043a\u0441\u0430\u043c\u0438</li> <li>\u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#13","title":"13. \u0412\u0430\u0436\u043d\u044b\u0435 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u044b","text":"<ul> <li>\u041d\u0435 \u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 cost</li> <li>\u0421\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c actual rows \u0438 rows</li> <li>\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0438\u043f \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u0430</li> <li>\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441, \u043f\u043e\u0442\u043e\u043c \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#14","title":"14. \u0427\u0430\u0441\u0442\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432","text":"<p>\u041e\u0448\u0438\u0431\u043a\u0430  \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0421\u043c\u043e\u0442\u0440\u044f\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u044e\u0442 \u043f\u043b\u0430\u043d \u041d\u0435 \u043f\u043e\u043d\u0438\u043c\u0430\u044e\u0442 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439    \u0427\u0438\u0442\u0430\u044e\u0442 \u0441\u0432\u0435\u0440\u0445\u0443 \u0432\u043d\u0438\u0437 \u0421\u043e\u0437\u0434\u0430\u044e\u0442 \u0438\u043d\u0434\u0435\u043a\u0441 \u0431\u0435\u0437 \u0430\u043d\u0430\u043b\u0438\u0437\u0430  \u041d\u0435\u0442 \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u0441\u0435\u043b\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u041d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u044e\u0442 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u043b\u0430\u043d\u044b</p>"},{"location":"Chapter_5/5.4-explane-analyze/#15","title":"15. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434","text":"<p>EXPLAIN ANALYZE \u2014 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442:</p> <ul> <li>DBA</li> <li>backend-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430</li> <li>\u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430</li> </ul> <p>\u041e\u043d \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442:</p> <ul> <li>\u043a\u0430\u043a \u0434\u0443\u043c\u0430\u0435\u0442 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440</li> <li>\u043f\u043e\u0447\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439</li> <li>\u0433\u0434\u0435 \u0443\u0437\u043a\u043e\u0435 \u043c\u0435\u0441\u0442\u043e</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#16","title":"16. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>EXPLAIN ANALYZE:</p> <ul> <li>\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</li> <li>\u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0432\u044b\u044f\u0432\u0438\u0442\u044c \u043d\u0435\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> <li>\u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0434\u043b\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0438 JOIN</li> </ul>"},{"location":"Chapter_5/5.4-explane-analyze/#_1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c</p> <pre><code>employees (id SERIAL PRIMARY KEY, full_name TEXT, salary NUMERIC, department TEXT);\nclients (id SERIAL PRIMARY KEY, full_name TEXT, city TEXT, status TEXT);\norders (id SERIAL PRIMARY KEY, client_id INT, order_date DATE, total_amount NUMERIC);\n</code></pre> <p>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u0438\u043d\u0438\u043c\u0443\u043c 20 000 \u0441\u0442\u0440\u043e\u043a \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430</p>"},{"location":"Chapter_5/5.4-explane-analyze/#1-seq-scan-vs-index-scan","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. Seq Scan vs Index Scan","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>EXPLAIN ANALYZE\nSELECT * FROM employees WHERE salary &gt; 100000;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u043f\u043e salary.</p> <p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437.</p> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u043a\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f? \u043a\u0430\u043a \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u0432\u0440\u0435\u043c\u044f? \u043f\u043e\u0447\u0435\u043c\u0443?</p>"},{"location":"Chapter_5/5.4-explane-analyze/#2-join","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. JOIN \u0438 \u0442\u0438\u043f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>EXPLAIN ANALYZE\nSELECT *\nFROM orders o\nJOIN clients c ON c.id = o.client_id;\n</code></pre> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f Nested Loop, Hash Join \u0438\u043b\u0438 Merge Join? \u043f\u043e\u0447\u0435\u043c\u0443 \u0432\u044b\u0431\u0440\u0430\u043d \u0438\u043c\u0435\u043d\u043d\u043e \u044d\u0442\u043e\u0442 \u0442\u0438\u043f? \u043a\u0430\u043a \u043f\u043e\u0432\u043b\u0438\u044f\u0435\u0442 \u0438\u043d\u0434\u0435\u043a\u0441 \u043d\u0430 orders.client_id?</p>"},{"location":"Chapter_5/5.4-explane-analyze/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0446\u0435\u043d\u043a\u0438 \u0441\u0442\u0440\u043e\u043a","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0440\u0435\u0434\u043a\u043e \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0449\u0435\u043c\u0443\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e.</p> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c:</p> <ul> <li>rows</li> <li>actual rows</li> </ul> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>ANALYZE table_name;\n</code></pre> <p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c <code>EXPLAIN ANALYZE</code>.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0432\u043b\u0438\u044f\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#4-bitmap-scan","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. Bitmap Scan","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0441 \u0443\u0441\u043b\u043e\u0432\u0438\u0435\u043c:</p> <pre><code>WHERE salary &gt; 50000 AND department = 'IT';\n</code></pre> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043b\u0438 Bitmap Index Scan? \u043f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435 Index Scan?</p>"},{"location":"Chapter_5/5.4-explane-analyze/#5_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 (\u0441 JOIN + GROUP BY).</p> <p>\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043b\u0430\u043d.</p> <p>\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c:</p> <ul> <li>\u0438\u043d\u0434\u0435\u043a\u0441</li> <li>\u043f\u0435\u0440\u0435\u043f\u0438\u0441\u044b\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430</li> <li>\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b</li> </ul> <p>\u041e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u0431\u043e\u0440.</p>"},{"location":"Chapter_5/5.4-explane-analyze/#_2","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 EXPLAIN \u0438 EXPLAIN ANALYZE?</li> <li>\u0427\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 cost?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0432\u0430\u0436\u043d\u043e \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c rows \u0438 actual rows?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 Seq Scan \u0438 \u043a\u043e\u0433\u0434\u0430 \u043e\u043d \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f Index Scan \u043e\u0442 Bitmap Index Scan?</li> <li>\u041a\u0430\u043a\u043e\u0439 \u0442\u0438\u043f JOIN \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0447\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0442\u0430\u0431\u043b\u0438\u0446?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0442\u043e\u0440 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441?</li> <li>\u041a\u0430\u043a \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043f\u043b\u0430\u043d \u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0441\u043d\u0438\u0437\u0443 \u0432\u0432\u0435\u0440\u0445?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f?</li> </ol>"},{"location":"Chapter_5/practic-12-working-with-transactions/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 12. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438","text":"<p>\u0426\u0435\u043b\u044c: \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0432\u044b\u043a\u0438: \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438 \u0432\u0440\u0443\u0447\u043d\u0443\u044e; \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f SAVEPOINT; \u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u044b\u0445 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432; \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u0430\u043d\u043d\u044b\u0445","text":"<pre><code>accounts (\n    id SERIAL PRIMARY KEY,\n    owner TEXT,\n    balance NUMERIC\n);\n\nemployees (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    salary NUMERIC\n);\n</code></pre> <p>\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#1-commit","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. COMMIT","text":"<ol> <li>\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e:</li> </ol> <pre><code>BEGIN;\n</code></pre> <ol> <li> <p>\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430.</p> </li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0432 \u0442\u043e\u0439 \u0436\u0435 \u0441\u0435\u0441\u0441\u0438\u0438.</p> </li> <li> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> </li> </ol> <pre><code>COMMIT;\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0441\u044c \u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#2-rollback","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. ROLLBACK","text":"<ol> <li> <p>\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e.</p> </li> <li> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <code>UPDATE</code>.</p> </li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435.</p> </li> <li> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> </li> </ol> <pre><code>ROLLBACK;\n</code></pre> <p>\u0423\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435 \u0432\u0435\u0440\u043d\u0443\u043b\u0438\u0441\u044c \u043a \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u043c\u0443 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e.</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u0441\u0440\u0435\u0434\u0441\u0442\u0432","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u0435\u0436\u0434\u0443 \u0441\u0447\u0435\u0442\u0430\u043c\u0438:</p> <pre><code>BEGIN;\n\nUPDATE accounts\nSET balance = balance - 1000\nWHERE id = 1;\n\nUPDATE accounts\nSET balance = balance + 1000\nWHERE id = 2;\n\nCOMMIT;\n</code></pre> <p>\u0421\u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0443 \u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ROLLBACK.</p> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c: \u043a\u0430\u043a \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f Atomicity.</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<ol> <li> <p>\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e.</p> </li> <li> <p>\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432.</p> </li> <li> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c:</p> </li> </ol> <pre><code>SAVEPOINT sp1;\n</code></pre> <ol> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u0448\u0438\u0431\u043e\u0447\u043d\u0443\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e.</li> </ol> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>ROLLBACK TO sp1;\n</code></pre> <ol> <li>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 COMMIT.</li> </ol> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 ROLLBACK \u0438 ROLLBACK TO</p> <p>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5. \u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0440\u043e\u043a\u0438</p> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0434\u0432\u0435 \u0441\u0435\u0441\u0441\u0438\u0438 psql.</p> <p>\u0421\u0435\u0441\u0441\u0438\u044f A:</p> <pre><code>BEGIN;\nUPDATE accounts\nSET balance = balance + 500\nWHERE id = 1;\n</code></pre> <p>(\u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c COMMIT)</p> <p>\u0421\u0435\u0441\u0441\u0438\u044f B:</p> <pre><code>UPDATE accounts\nSET balance = balance - 200\nWHERE id = 1;\n</code></pre> <p>\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442? \u041f\u043e\u0447\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441 \u00ab\u0437\u0430\u0432\u0438\u0441\u0430\u0435\u0442\u00bb?</p> <p>\u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <code>COMMIT</code> \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u0441\u0435\u0441\u0441\u0438\u0438.</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6. \u0410\u043d\u0430\u043b\u0438\u0437 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a","text":"<p>\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>SELECT * FROM pg_locks;\n</code></pre> <p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c:</p> <ul> <li>\u0442\u0438\u043f \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438</li> <li>\u043e\u0431\u044a\u0435\u043a\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438</li> </ul>"},{"location":"Chapter_5/practic-12-working-with-transactions/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u0412 \u0434\u0432\u0443\u0445 \u0441\u0435\u0441\u0441\u0438\u044f\u0445:</p> <ul> <li>\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c SELECT</li> <li>\u0437\u0430\u0442\u0435\u043c UPDATE \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0435\u0441\u0441\u0438\u0438</li> <li>\u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c SELECT</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u0438:</p> <pre><code>SET TRANSACTION ISOLATION LEVEL READ COMMITTED;\nSET TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n</code></pre> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f.</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c:</p> <pre><code>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;\n</code></pre> <p>\u0412 \u0434\u0432\u0443\u0445 \u0441\u0435\u0441\u0441\u0438\u044f\u0445 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u0434\u043d\u0443 \u0438 \u0442\u0443 \u0436\u0435 \u0441\u0442\u0440\u043e\u043a\u0443.</p> <p>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0443 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0443.</p>"},{"location":"Chapter_5/practic-12-working-with-transactions/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u0435\u043c\u0438\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u0421\u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u043a\u0430\u0442 \u0447\u0430\u0441\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 SAVEPOINT.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 SERIALIZABLE \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c MVCC \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435.</p>"},{"location":"Chapter_5/practic-13-query-optimization/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 13. \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432","text":"<p>\u0426\u0435\u043b\u044c: \u041d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432: \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c \u0443\u0437\u043a\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445; \u0447\u0438\u0442\u0430\u0442\u044c \u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f; \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u043e\u0441\u043e\u0437\u043d\u0430\u043d\u043d\u043e; \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b; \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u0432\u043b\u0438\u044f\u043d\u0438\u0435 JOIN \u0438 \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0432</p>"},{"location":"Chapter_5/practic-13-query-optimization/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c","text":"<pre><code>clients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    city TEXT,\n    status TEXT\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    client_id INT REFERENCES clients(id),\n    order_date DATE,\n    total_amount NUMERIC\n);\n\norder_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT REFERENCES orders(id),\n    product_name TEXT,\n    quantity INT,\n    price NUMERIC\n);\n</code></pre> <p>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u043c\u0438 20 000 - 50 000 \u0441\u0442\u0440\u043e\u043a</p>"},{"location":"Chapter_5/practic-13-query-optimization/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>EXPLAIN ANALYZE\nSELECT * FROM orders\nWHERE total_amount &gt; 100000;\n</code></pre> <p>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u0442\u0438\u043f \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>\u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a</li> </ul>"},{"location":"Chapter_5/practic-13-query-optimization/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441:</p> <pre><code>CREATE INDEX idx_orders_total\nON orders (total_amount);\n</code></pre> <p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437.</p> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c: Seq Scan vs Index Scan \u0438 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</p>"},{"location":"Chapter_5/practic-13-query-optimization/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>EXPLAIN ANALYZE\nSELECT c.full_name, o.total_amount\nFROM clients c\nJOIN orders o ON o.client_id = c.id\nWHERE c.city = '\u041c\u043e\u0441\u043a\u0432\u0430';\n</code></pre> <p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c:</p> <ul> <li>\u0442\u0438\u043f <code>JOIN</code></li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043b\u0438 \u0438\u043d\u0434\u0435\u043a\u0441</li> </ul>"},{"location":"Chapter_5/practic-13-query-optimization/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u043d\u0430:</p> <pre><code>clients(city);\norders(client_id);\n</code></pre> <p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u043f\u043b\u0430\u043d\u0435.</p>"},{"location":"Chapter_5/practic-13-query-optimization/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u041d\u0435\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441:</p> <pre><code>SELECT *\nFROM clients\nWHERE id IN (\n    SELECT client_id FROM orders\n);\n</code></pre> <p>\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043b\u0430\u043d.</p>"},{"location":"Chapter_5/practic-13-query-optimization/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u041f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 EXISTS:</p> <pre><code>SELECT *\nFROM clients c\nWHERE EXISTS (\n    SELECT 1\n    FROM orders o\n    WHERE o.client_id = c.id\n);\n</code></pre> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u043f\u043b\u0430\u043d\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_5/practic-13-query-optimization/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<pre><code>EXPLAIN ANALYZE\nSELECT client_id, COUNT(*)\nFROM orders\nGROUP BY client_id;\n</code></pre> <p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043b\u0438 \u0438\u043d\u0434\u0435\u043a\u0441</li> <li>\u0442\u0438\u043f \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_5/practic-13-query-optimization/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u043d\u0430 <code>orders(client_id)</code> \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437.</p>"},{"location":"Chapter_5/practic-13-query-optimization/#9","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 9","text":"<pre><code>SELECT * FROM clients\nWHERE LOWER(full_name) = 'ivan ivanov';\n</code></pre> <p>\u041f\u043e\u0447\u0435\u043c\u0443 \u0438\u043d\u0434\u0435\u043a\u0441 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f?</p>"},{"location":"Chapter_5/practic-13-query-optimization/#10","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 10","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441:</p> <pre><code>CREATE INDEX idx_lower_name\nON clients (LOWER(full_name));\n</code></pre> <p>\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437.</p>"},{"location":"Chapter_5/practic-13-query-optimization/#11","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 11","text":"<p>\u041c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441:</p> <pre><code>SELECT c.city, SUM(o.total_amount)\nFROM clients c\nJOIN orders o ON o.client_id = c.id\nGROUP BY c.city\nORDER BY SUM(o.total_amount) DESC;\n</code></pre> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f:</p> <ul> <li>\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043b\u0430\u043d.</li> <li>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0437\u043a\u043e\u0435 \u043c\u0435\u0441\u0442\u043e.</li> </ul> <p>\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c:</p> <ul> <li>\u0438\u043d\u0434\u0435\u043a\u0441\u044b</li> <li>\u043f\u0435\u0440\u0435\u043f\u0438\u0441\u044b\u0432\u0430\u043d\u0438\u0435</li> <li>\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b</li> </ul>"},{"location":"Chapter_5/practic-13-query-optimization/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f (\u043d\u0430 \u043e\u0446\u0435\u043d\u043a\u0443)","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u041d\u0430\u0439\u0442\u0438 \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0430\u043c\u044b\u0439 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0432\u044b\u0431\u043e\u0440 \u0442\u0438\u043f\u0430 JOIN.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0441 GROUP BY.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0432\u043b\u0438\u044f\u043d\u0438\u0435 ORDER BY \u043d\u0430 \u043f\u043b\u0430\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_6/6.1-users-and-roles/","title":"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0438 \u0440\u043e\u043b\u0438","text":""},{"location":"Chapter_6/6.1-users-and-roles/#postgresql","title":"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0438 \u0440\u043e\u043b\u0438 \u0432 PostgreSQL","text":"<p>\u0422\u0438\u043f: \u043b\u0435\u043a\u0446\u0438\u044f</p>"},{"location":"Chapter_6/6.1-users-and-roles/#1-postgresql","title":"1. \u041e\u0441\u043d\u043e\u0432\u044b \u043c\u043e\u0434\u0435\u043b\u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 PostgreSQL","text":"<p>\u0412 PostgreSQL \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u043e\u043b\u0435\u0432\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 (Role-Based Access Control, RBAC).</p> <p>\u041a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u043f\u043e\u043d\u044f\u0442\u0438\u0435:</p> <p>\u0412 PostgreSQL \u043d\u0435\u0442 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u201c\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u201d \u2014 \u0435\u0441\u0442\u044c \u0440\u043e\u043b\u0438.</p> <p>\u0420\u043e\u043b\u044c \u043c\u043e\u0436\u0435\u0442:</p> <ul> <li>\u0432\u0445\u043e\u0434\u0438\u0442\u044c \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443</li> <li>\u0431\u044b\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u043e\u0439 \u0440\u043e\u043b\u0435\u0439</li> <li>\u0432\u043b\u0430\u0434\u0435\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c\u0438</li> <li>\u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> </ul>"},{"location":"Chapter_6/6.1-users-and-roles/#2","title":"2. \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0440\u043e\u043b\u044c","text":"<p>\u0420\u043e\u043b\u044c \u2014 \u044d\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442, \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043c\u043e\u0436\u043d\u043e:</p> <ul> <li>\u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438</li> <li>\u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c\u0438</li> <li> <p>\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u043e \u0432\u0445\u043e\u0434\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443</p> </li> <li> <p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438</p> </li> </ul> <pre><code>CREATE ROLE analyst;\n</code></pre> <p>\u0420\u043e\u043b\u044c \u0431\u0435\u0437 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0432\u0445\u043e\u0434\u0430.</p> <p>\u0420\u043e\u043b\u044c \u0441 \u043f\u0440\u0430\u0432\u043e\u043c \u0432\u0445\u043e\u0434\u0430</p> <pre><code>CREATE ROLE manager\nWITH LOGIN\nPASSWORD 'secure_password';\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u044d\u0442\u043e \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#4","title":"4. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0440\u043e\u043b\u0435\u0439","text":"\u0410\u0442\u0440\u0438\u0431\u0443\u0442 \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 LOGIN \u0420\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 SUPERUSER \u041f\u043e\u043b\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f CREATEDB \u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0411\u0414 CREATEROLE \u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u0438 REPLICATION \u0414\u043b\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438 BYPASSRLS \u041e\u0431\u0445\u043e\u0434 Row Level Security <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>CREATE ROLE admin\nWITH LOGIN\nSUPERUSER;\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#5","title":"5. \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438","text":"<pre><code>ALTER ROLE manager WITH CREATEDB;\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#6","title":"6. \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438","text":"<pre><code>DROP ROLE analyst;\n</code></pre> <p>\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c, \u0435\u0441\u043b\u0438 \u043e\u043d\u0430 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c\u0438.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#7","title":"7. \u0412\u043b\u0430\u0434\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c\u0438","text":"<p>\u041a\u0430\u0436\u0434\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u0411\u0414 \u0438\u043c\u0435\u0435\u0442 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430.</p> <pre><code>ALTER TABLE employees OWNER TO manager;\n</code></pre> <p>\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043c\u043e\u0436\u0435\u0442:</p> <ul> <li>\u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443</li> <li>\u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442</li> <li> <p>\u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430</p> </li> <li> <p>\u041f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438 (GRANT)</p> </li> </ul> <p>\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430:</p> <pre><code>GRANT privilege\nON object\nTO role;\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#_1","title":"\u041f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443","text":"\u041f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u044f \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 SELECT \u0427\u0442\u0435\u043d\u0438\u0435 INSERT \u0412\u0441\u0442\u0430\u0432\u043a\u0430 UPDATE \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 DELETE \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 TRUNCATE \u041e\u0447\u0438\u0441\u0442\u043a\u0430 REFERENCES \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 FK TRIGGER \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u0432 <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>GRANT SELECT ON employees TO analyst;\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#_2","title":"\u041f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0432\u0441\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441\u0445\u0435\u043c\u044b","text":"<pre><code>GRANT SELECT ON ALL TABLES IN SCHEMA public TO analyst;\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#9-revoke","title":"9. REVOKE","text":"<p>\u041e\u0442\u0437\u044b\u0432 \u043f\u0440\u0430\u0432:</p> <pre><code>REVOKE SELECT ON employees FROM analyst;\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#10","title":"10. \u0413\u0440\u0443\u043f\u043f\u043e\u0432\u044b\u0435 \u0440\u043e\u043b\u0438","text":"<p>\u041c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u044c-\u0433\u0440\u0443\u043f\u043f\u0443:</p> <pre><code>CREATE ROLE developers;\n</code></pre> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0433\u0440\u0443\u043f\u043f\u0443:</p> <pre><code>GRANT developers TO manager;\n</code></pre> <p>\u0423\u0434\u043e\u0431\u043d\u043e \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#11-public","title":"11. PUBLIC","text":"<p>PUBLIC \u2014 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u043e\u043b\u044c.</p> <p>\u041f\u0440\u0430\u0432\u0430, \u0432\u044b\u0434\u0430\u043d\u043d\u044b\u0435 PUBLIC, \u043f\u043e\u043b\u0443\u0447\u0430\u044e\u0442 \u0432\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438.</p> <p>\u0427\u0430\u0441\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c PUBLIC.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#12","title":"12. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e","text":"<p>\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li>\u0434\u043e\u0441\u0442\u0443\u043f \u0435\u0441\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0443 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430</li> <li>PUBLIC \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0430\u0437\u043e\u0432\u044b\u0435 \u043f\u0440\u0430\u0432\u0430</li> </ul> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f:</p> <pre><code>REVOKE ALL ON SCHEMA public FROM PUBLIC;\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#13-row-level-security-rls","title":"13. Row Level Security (RLS)","text":"<p>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0442\u0440\u043e\u043a\u0430\u043c \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p> <p>\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435:</p> <pre><code>ALTER TABLE employees ENABLE ROW LEVEL SECURITY;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438:</p> <pre><code>CREATE POLICY employee_policy\nON employees\nFOR SELECT\nUSING (department = current_user);\n</code></pre> <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u0438\u0434\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u0434\u0430\u043d\u043d\u044b\u0435.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#14","title":"14. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0430\u0432","text":"<p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u043e\u043b\u0438:</p> <pre><code>\\du\n</code></pre> <p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443:</p> <pre><code>\\z table_name\n</code></pre>"},{"location":"Chapter_6/6.1-users-and-roles/#15","title":"15. \u041f\u0440\u0438\u043d\u0446\u0438\u043f \u043d\u0430\u0438\u043c\u0435\u043d\u044c\u0448\u0438\u0445 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439","text":"<p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u043f\u0440\u0430\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0435\u043c\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b.</p> <p>\u042d\u0442\u043e \u0441\u043d\u0438\u0436\u0430\u0435\u0442 \u0440\u0438\u0441\u043a:</p> <ul> <li>\u0443\u0442\u0435\u0447\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f</li> <li>\u0437\u043b\u043e\u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c</li> </ul>"},{"location":"Chapter_6/6.1-users-and-roles/#16","title":"16. \u0422\u0438\u043f\u0438\u0447\u043d\u0430\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0440\u043e\u043b\u0435\u0439","text":"<p>\u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f:</p> <ul> <li>admin \u2014 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>app_user \u2014 \u0434\u043e\u0441\u0442\u0443\u043f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e</li> <li>analyst \u2014 \u0442\u043e\u043b\u044c\u043a\u043e SELECT</li> <li>readonly \u2014 \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u0435\u043d\u0438\u0435</li> </ul>"},{"location":"Chapter_6/6.1-users-and-roles/#17","title":"17. \u0427\u0430\u0441\u0442\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"<p>|\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 |\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 SUPERUSER    \u041e\u043f\u0430\u0441\u043d\u043e |\u041f\u0440\u0430\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 PUBLIC \u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 |\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u044b\u0445 \u0440\u043e\u043b\u0435\u0439 \u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f |\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 RLS  \u0423\u0442\u0435\u0447\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</p>"},{"location":"Chapter_6/6.1-users-and-roles/#18","title":"18. \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u041c\u043e\u0436\u043d\u043e \u0434\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0442\u043e\u043b\u044c\u043a\u043e \u043a \u0444\u0443\u043d\u043a\u0446\u0438\u0438:</p> <pre><code>GRANT EXECUTE ON FUNCTION get_client_total(INT) TO analyst;\n</code></pre> <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043d\u0435 \u0438\u043c\u0435\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0435.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#19","title":"19. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u0420\u043e\u043b\u0438 \u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438:</p> <ul> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0442 \u043c\u043e\u0434\u0435\u043b\u044c RBAC</li> <li>\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 CREATE ROLE / GRANT / REVOKE</li> <li>\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0438\u0435\u0440\u0430\u0440\u0445\u0438\u044e</li> <li>\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c \u0438 \u0441\u0442\u0440\u043e\u043a\u0430\u043c</li> <li>\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043e\u0441\u043d\u043e\u0432\u043e\u0439 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u0411\u0414</li> </ul>"},{"location":"Chapter_6/6.1-users-and-roles/#_3","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c:</p> <ul> <li>employees</li> <li>clients</li> <li>orders</li> </ul>"},{"location":"Chapter_6/6.1-users-and-roles/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0435\u0439","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u0438:</p> <ul> <li>admin_role</li> <li>analyst_role</li> <li>app_user_role</li> </ul> <p>\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c:</p> <ul> <li>admin_role \u2192 LOGIN, CREATEDB</li> <li>analyst_role \u2192 \u0431\u0435\u0437 LOGIN</li> <li>app_user_role \u2192 LOGIN</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0440\u043e\u043b\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 <code>\\du</code>.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. \u0413\u0440\u0443\u043f\u043f\u043e\u0432\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ivan \u0432 \u0440\u043e\u043b\u044c analyst_role.</p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f app_service \u0432 app_user_role.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c: \u0437\u0430\u0447\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u044b\u0435 \u0440\u043e\u043b\u0438</p>"},{"location":"Chapter_6/6.1-users-and-roles/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439","text":"<p>\u0414\u0430\u0442\u044c <code>analyst_role</code> \u043f\u0440\u0430\u0432\u0430:</p> <pre><code>SELECT\n</code></pre> <p>\u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <ul> <li><code>employees</code></li> <li><code>clients</code></li> <li><code>orders</code></li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043f\u043e\u0434 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c ivan.</p> <p>\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c INSERT \u2014 \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0443.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#4_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0443 PUBLIC \u0432\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0441\u0445\u0435\u043c\u0443 public.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0447\u0442\u043e \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0431\u0435\u0437 GRANT.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043f\u0440\u0438\u043d\u0446\u0438\u043f \u043d\u0430\u0438\u043c\u0435\u043d\u044c\u0448\u0438\u0445 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#5_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5. \u0412\u043b\u0430\u0434\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c\u0438","text":"<p>\u041f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0435\u0439 <code>orders</code> \u0440\u043e\u043b\u0438 <code>admin_role</code>.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u043a\u0442\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u043c.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u043c \u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 <code>SELECT</code>.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#6-execute","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6. EXECUTE \u0434\u043b\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>get_total_orders()</code>.</p> <p>\u0414\u0430\u0442\u044c <code>analyst_role</code> \u043f\u0440\u0430\u0432\u043e <code>EXECUTE</code>.</p> <p>\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u043f\u0440\u044f\u043c\u043e\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0435 <code>orders</code>.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u043c\u043e\u0436\u0435\u0442 \u043b\u0438 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e.</p>"},{"location":"Chapter_6/6.1-users-and-roles/#7_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c RLS \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b employees.</p> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0443:</p> <ul> <li>\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u0438\u0434\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u0441\u0432\u043e\u0435\u0433\u043e \u043e\u0442\u0434\u0435\u043b\u0430.</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <pre><code>ENABLE ROW LEVEL SECURITY;\nCREATE POLICY ...\n</code></pre> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u043a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0441\u0442\u0440\u043e\u043a.</p>"},{"location":"Chapter_6/6.2-access-rights/","title":"\u041f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u0422\u0438\u043f: \u043b\u0435\u043a\u0446\u0438\u044f</p>"},{"location":"Chapter_6/6.2-access-rights/#1","title":"1. \u041e\u0431\u0449\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0440\u0430\u0437\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u0412 PostgreSQL \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u043b\u044c RBAC (Role-Based Access Control):</p> <ul> <li>\u0434\u043e\u0441\u0442\u0443\u043f \u0432\u044b\u0434\u0430\u0451\u0442\u0441\u044f \u0440\u043e\u043b\u044f\u043c</li> <li>\u0440\u043e\u043b\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438 \u0438\u043b\u0438 \u0433\u0440\u0443\u043f\u043f\u0430\u043c\u0438</li> <li>\u043f\u0440\u0430\u0432\u0430 \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u044b</li> </ul> <p>\u0411\u0435\u0437 \u0432\u044b\u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u043c.</p>"},{"location":"Chapter_6/6.2-access-rights/#2","title":"2. \u041e\u0431\u044a\u0435\u043a\u0442\u044b, \u043a \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u043f\u0440\u0430\u0432\u0430","text":"<p>\u041f\u0440\u0430\u0432\u0430 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0442\u044c \u043d\u0430:</p> <ul> <li>\u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0441\u0445\u0435\u043c\u044b</li> <li>\u0442\u0430\u0431\u043b\u0438\u0446\u044b</li> <li>\u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f</li> <li>\u0444\u0443\u043d\u043a\u0446\u0438\u0438</li> <li>\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438</li> <li>\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b</li> </ul>"},{"location":"Chapter_6/6.2-access-rights/#3","title":"3. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439","text":""},{"location":"Chapter_6/6.2-access-rights/#_2","title":"\u0414\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446","text":"<ol> <li>SELECT - \u0447\u0442\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>INSERT - \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a</li> <li>UPDATE - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a</li> <li>DELETE - \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a</li> <li>TRUNCATE - \u043e\u0447\u0438\u0441\u0442\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b</li> <li>REFERENCES - \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u043a\u043b\u044e\u0447\u0435\u0439</li> <li>TRIGGER - \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u043e\u0432</li> </ol>"},{"location":"Chapter_6/6.2-access-rights/#_3","title":"\u0414\u043b\u044f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445","text":"\u041f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u044f \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 CONNECT \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0411\u0414 CREATE \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 TEMPORARY \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446"},{"location":"Chapter_6/6.2-access-rights/#_4","title":"\u0414\u043b\u044f \u0441\u0445\u0435\u043c\u044b","text":"\u041f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u044f \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 USAGE \u0414\u043e\u0441\u0442\u0443\u043f \u043a \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c \u0441\u0445\u0435\u043c\u044b CREATE \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"},{"location":"Chapter_6/6.2-access-rights/#_5","title":"\u0414\u043b\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0439","text":"<ol> <li>EXECUTE - \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438</li> </ol>"},{"location":"Chapter_6/6.2-access-rights/#4-grant","title":"4. \u041a\u043e\u043c\u0430\u043d\u0434\u0430 GRANT","text":""},{"location":"Chapter_6/6.2-access-rights/#_6","title":"\u041e\u0431\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441:","text":"<pre><code>GRANT privilege\nON object\nTO role;\n</code></pre>"},{"location":"Chapter_6/6.2-access-rights/#_7","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b","text":"<pre><code>GRANT SELECT ON employees TO analyst;\n</code></pre>"},{"location":"Chapter_6/6.2-access-rights/#_8","title":"\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0430\u0432","text":"<p>GRANT SELECT, INSERT, UPDATE ON employees TO manager;</p>"},{"location":"Chapter_6/6.2-access-rights/#5-revoke","title":"5. REVOKE \u2014 \u043e\u0442\u0437\u044b\u0432 \u043f\u0440\u0430\u0432","text":"<pre><code>REVOKE INSERT ON employees FROM analyst;\n</code></pre> <p>\u041c\u043e\u0436\u043d\u043e \u043e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u043f\u0440\u0430\u0432\u0430:</p> <pre><code>REVOKE ALL ON employees FROM analyst;\n</code></pre>"},{"location":"Chapter_6/6.2-access-rights/#6","title":"6. \u041f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0432\u0441\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0441\u0445\u0435\u043c\u044b","text":"<pre><code>GRANT SELECT\nON ALL TABLES IN SCHEMA public\nTO analyst;\n</code></pre> <p>\u042d\u0442\u043e \u043d\u0435 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430 \u0431\u0443\u0434\u0443\u0449\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p>"},{"location":"Chapter_6/6.2-access-rights/#7","title":"7. \u041f\u0440\u0430\u0432\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e","text":"<p>\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u0430\u0432\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u0431\u0443\u0434\u0443\u0449\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b:</p> <pre><code>ALTER DEFAULT PRIVILEGES\nIN SCHEMA public\nGRANT SELECT ON TABLES TO analyst;\n</code></pre>"},{"location":"Chapter_6/6.2-access-rights/#8-public","title":"8. PUBLIC","text":"<p>PUBLIC \u2014 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u043e\u043b\u044c, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0430\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</p> <p>\u0415\u0441\u043b\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <code>GRANT SELECT ON employees TO PUBLIC;</code></p> <p>\u0412\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0442 \u0434\u043e\u0441\u0442\u0443\u043f.</p> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c <code>PUBLIC</code>:</p> <pre><code>REVOKE ALL ON SCHEMA public FROM PUBLIC;\n</code></pre>"},{"location":"Chapter_6/6.2-access-rights/#9","title":"9. \u0412\u043b\u0430\u0434\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c\u0438","text":"<p>\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446:</p> <ul> <li>\u0438\u043c\u0435\u0435\u0442 \u043f\u043e\u043b\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c</li> <li>\u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430</li> <li>\u043c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442</li> </ul> <p>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430:</p> <pre><code>ALTER TABLE employees OWNER TO admin_role;\n</code></pre>"},{"location":"Chapter_6/6.2-access-rights/#10-with-grant-option","title":"10. WITH GRANT OPTION","text":"<p>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u043e \u0434\u0430\u043b\u044c\u0448\u0435:</p> <pre><code>GRANT SELECT ON employees\nTO analyst\nWITH GRANT OPTION;\n</code></pre> <p>\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u0443\u044e \u0438\u0435\u0440\u0430\u0440\u0445\u0438\u044e \u043f\u0440\u0430\u0432.</p>"},{"location":"Chapter_6/6.2-access-rights/#11","title":"11. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0430\u0432","text":"<p>\u0412 psql:</p> <pre><code>\\z employees\n</code></pre> <p>\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u043e\u043b\u0438:</p> <pre><code>\\du\n</code></pre>"},{"location":"Chapter_6/6.2-access-rights/#12","title":"12. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a</p> <ul> <li>SELECT</li> <li>EXECUTE \u0444\u0443\u043d\u043a\u0446\u0438\u0439</li> </ul> <p>\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435</p> <ul> <li>SELECT</li> <li>INSERT</li> <li>UPDATE</li> </ul> <p>\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440</p> <ul> <li>ALL PRIVILEGES</li> <li>CREATEDB</li> <li>CREATEROLE</li> </ul>"},{"location":"Chapter_6/6.2-access-rights/#13","title":"13. \u041f\u0440\u0438\u043d\u0446\u0438\u043f \u043d\u0430\u0438\u043c\u0435\u043d\u044c\u0448\u0438\u0445 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439","text":"<p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f.</p> <p>\u042d\u0442\u043e \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u0435\u0442:</p> <ul> <li>\u0443\u0442\u0435\u0447\u043a\u0438</li> <li>\u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</li> <li>\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul>"},{"location":"Chapter_6/6.2-access-rights/#14","title":"14. \u0427\u0430\u0441\u0442\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 SUPERUSER \u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u041f\u0440\u0430\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 PUBLIC \u041f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0443\u0442\u0435\u0447\u043a\u0430 \u0412\u044b\u0434\u0430\u0447\u0430 ALL PRIVILEGES \u0418\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 DEFAULT PRIVILEGES \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043d\u043e\u0432\u044b\u043c\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c\u0438"},{"location":"Chapter_6/6.2-access-rights/#15","title":"15. \u041f\u0440\u0430\u0432\u0430 \u0438 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f","text":"<p>\u041c\u043e\u0436\u043d\u043e: - \u0434\u0430\u0442\u044c SELECT \u043d\u0430 VIEW - \u043d\u0435 \u0434\u0430\u0432\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435</p> <p>\u042d\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0438 \u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438.</p>"},{"location":"Chapter_6/6.2-access-rights/#16","title":"16. \u041f\u0440\u0430\u0432\u0430 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u041c\u043e\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c EXECUTE \u0431\u0435\u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u043c.</p> <p>\u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043a\u0440\u044b\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0434\u0430\u043d\u043d\u044b\u0445.</p>"},{"location":"Chapter_6/6.2-access-rights/#17-rls","title":"17. \u041f\u0440\u0430\u0432\u0430 \u0438 RLS","text":"<p>\u0414\u0430\u0436\u0435 \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 SELECT, RLS \u043c\u043e\u0436\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0438.</p> <p>RLS \u2014 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0437\u0430\u0449\u0438\u0442\u044b.</p>"},{"location":"Chapter_6/6.2-access-rights/#18","title":"18. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434","text":"<p>\u041f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430:</p> <ul> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0442 \u0440\u0430\u0437\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438</li> <li>\u0437\u0430\u0449\u0438\u0449\u0430\u044e\u0442 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0443\u044e \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0443</li> <li> <p>\u0434\u043e\u043b\u0436\u043d\u044b \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0437\u0430\u0440\u0430\u043d\u0435\u0435</p> </li> <li> <p>\u0412\u044b\u0432\u043e\u0434\u044b</p> </li> </ul> <p>\u041f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430:</p> <ul> <li>\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 GRANT / REVOKE</li> <li>\u043d\u0430\u0437\u043d\u0430\u0447\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b</li> <li>\u0434\u043e\u043b\u0436\u043d\u044b \u0432\u044b\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u043e \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0443 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438</li> <li>\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043e\u0441\u043d\u043e\u0432\u043e\u0439 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u0411\u0414</li> </ul>"},{"location":"Chapter_6/6.2-access-rights/#_9","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c:  - employees - clients - orders</p>"},{"location":"Chapter_6/6.2-access-rights/#1_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. \u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u044c analyst_role.</p> <p>\u0414\u0430\u0442\u044c \u0435\u0439 \u043f\u0440\u0430\u0432\u043e:</p> <ul> <li>SELECT</li> <li>\u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b employees, clients, orders.</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c:</p> <ul> <li>\u0447\u0442\u043e SELECT \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442</li> <li>\u0447\u0442\u043e INSERT \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443</li> </ul> <p>\u0417\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0443 \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0443.</p>"},{"location":"Chapter_6/6.2-access-rights/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. \u0427\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f","text":"<p>\u0414\u0430\u0442\u044c \u0440\u043e\u043b\u0438 <code>app_user_role</code> \u043f\u0440\u0430\u0432\u0430:</p> <p><code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 orders.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a employees.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043f\u0440\u0438\u043d\u0446\u0438\u043f \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439.</p>"},{"location":"Chapter_6/6.2-access-rights/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441\u043e \u0441\u0445\u0435\u043c\u043e\u0439","text":"<p>\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0443 PUBLIC \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0441\u0445\u0435\u043c\u0443 public.</p> <p>\u0414\u0430\u0442\u044c <code>analyst_role</code> \u043f\u0440\u0430\u0432\u043e USAGE \u043d\u0430 \u0441\u0445\u0435\u043c\u0443.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443:</p> <ul> <li>USAGE</li> <li>SELECT</li> </ul>"},{"location":"Chapter_6/6.2-access-rights/#4-with-grant-option","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. WITH GRANT OPTION","text":"<p>\u0412\u044b\u0434\u0430\u0442\u044c:</p> <pre><code>GRANT SELECT ON employees TO analyst_role WITH GRANT OPTION;\n</code></pre> <p>\u041f\u043e\u0434 \u0440\u043e\u043b\u044c\u044e \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u043e \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0446\u0435\u043f\u043e\u0447\u043a\u0443 \u043f\u0440\u0430\u0432.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0438\u0441\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f GRANT OPTION.</p>"},{"location":"Chapter_6/6.2-access-rights/#5-default-privileges","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5. DEFAULT PRIVILEGES","text":"<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c:</p> <pre><code>ALTER DEFAULT PRIVILEGES\nIN SCHEMA public\nGRANT SELECT ON TABLES TO analyst_role;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043b\u0438 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a \u0434\u043e\u0441\u0442\u0443\u043f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u0437\u0430\u0447\u0435\u043c \u044d\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u043f\u0440\u043e\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u0440\u0435\u0434\u0435.</p>"},{"location":"Chapter_6/6.2-access-rights/#6_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c <code>VIEW</code> \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u043e\u0432.</p> <p>\u0414\u0430\u0442\u044c <code>SELECT</code> \u043d\u0430 <code>VIEW</code>.</p> <p>\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0447\u0442\u043e \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0434\u0430\u043d\u043d\u044b\u043c \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u043e\u0435 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e \u0442\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0430.</p>"},{"location":"Chapter_6/6.2-access-rights/#_10","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 \u0440\u043e\u043b\u044c\u044e \u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c?</li> <li>\u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u0430\u0432\u0430 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0434\u0430\u0442\u044c \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f USAGE \u043d\u0430 \u0441\u0445\u0435\u043c\u0443 \u043e\u0442 SELECT \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443?</li> <li>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 REVOKE?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 WITH GRANT OPTION \u0438 \u0447\u0435\u043c \u043e\u043d \u043e\u043f\u0430\u0441\u0435\u043d?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 DEFAULT PRIVILEGES?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c SUPERUSER \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438?</li> <li>\u041a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438 \u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 PUBLIC \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0433\u0440\u043e\u0437\u043e\u0439 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438?</li> <li>\u0412 \u0447\u0451\u043c \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043d\u0446\u0438\u043f \u043d\u0430\u0438\u043c\u0435\u043d\u044c\u0448\u0438\u0445 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439?</li> </ol>"},{"location":"Chapter_6/6.3-backup/","title":"\u0420\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 PostgreSQL","text":"<p>\u0422\u0438\u043f: \u043b\u0435\u043a\u0446\u0438\u044f</p>"},{"location":"Chapter_6/6.3-backup/#1","title":"1. \u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<p>\u0420\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (Backup) \u2014 \u044d\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043f\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u0438\u0445 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u0441\u043b\u0443\u0447\u0430\u0435:</p> <ul> <li>\u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u0441\u0431\u043e\u044f</li> <li>\u043e\u0448\u0438\u0431\u043a\u0438 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430</li> <li>\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> <li>\u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0430\u0442\u0430\u043a\u0438 \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f</li> </ul> <p>\u0411\u044d\u043a\u0430\u043f \u2014 \u043e\u0441\u043d\u043e\u0432\u0430 \u043d\u0430\u0434\u0451\u0436\u043d\u043e\u0441\u0442\u0438 \u0411\u0414.</p>"},{"location":"Chapter_6/6.3-backup/#2","title":"2. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0446\u0435\u043b\u0438 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0433\u043e \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u0434\u0432\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430:</p> <ul> <li>RPO (Recovery Point Objective) \u2014 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430\u044f \u043f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>RTO (Recovery Time Objective) \u2014 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_6/6.3-backup/#3","title":"3. \u0422\u0438\u043f\u044b \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0433\u043e \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u0412 PostgreSQL \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f:</p> <ul> <li>\u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f</li> <li>\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f</li> <li>\u041d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u043e\u0435 \u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (WAL)</li> </ul>"},{"location":"Chapter_6/6.3-backup/#4-pg_dump","title":"4. \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f (pg_dump)","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 SQL-\u0434\u0430\u043c\u043f \u0438\u043b\u0438 \u0430\u0440\u0445\u0438\u0432.</p> <p>\u041a\u043e\u043c\u0430\u043d\u0434\u0430:</p> <pre><code>pg_dump -U user -d database_name &gt; backup.sql\n</code></pre> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0444\u043e\u0440\u043c\u0430\u0442\u0430:</p> \u0424\u043e\u0440\u043c\u0430\u0442 \u041a\u043b\u044e\u0447 \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 Plain SQL (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e) \u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b Custom -Fc \u0414\u043b\u044f pg_restore Directory -Fd \u041c\u043d\u043e\u0433\u043e\u0444\u0430\u0439\u043b\u043e\u0432\u044b\u0439 \u0430\u0440\u0445\u0438\u0432 Tar -Ft \u0410\u0440\u0445\u0438\u0432 tar <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>pg_dump -U postgres -Fc mydb -f backup.dump\n</code></pre>"},{"location":"Chapter_6/6.3-backup/#5","title":"5. \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0431\u044d\u043a\u0430\u043f\u0430","text":"<p>\u0418\u0437 SQL-\u0444\u0430\u0439\u043b\u0430:</p> <pre><code>psql -U postgres -d mydb &lt; backup.sql\n</code></pre> <p>\u0418\u0437 custom-\u0444\u043e\u0440\u043c\u0430\u0442\u0430:</p> <pre><code>pg_restore -U postgres -d mydb backup.dump\n</code></pre>"},{"location":"Chapter_6/6.3-backup/#6","title":"6. \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0431\u044d\u043a\u0430\u043f\u0430","text":"<p>\u041f\u043b\u044e\u0441\u044b:</p> <ul> <li>\u041f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u043c \u043c\u0435\u0436\u0434\u0443 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438</li> <li>\u041c\u043e\u0436\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443</li> <li>\u0427\u0438\u0442\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442</li> </ul> <p>\u041c\u0438\u043d\u0443\u0441\u044b: </p> <ul> <li>\u041c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435 \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0411\u0414</li> <li>\u041d\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a</li> </ul>"},{"location":"Chapter_6/6.3-backup/#7","title":"7. \u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0444\u0430\u0439\u043b\u043e\u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 PostgreSQL.</p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442:</p> <p><code>pg_basebackup</code></p> <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>pg_basebackup -U postgres -D /backup_directory -Fp -Xs -P\n</code></pre> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:</p> <p>-D \u2014 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f -Fp \u2014 \u0444\u043e\u0440\u043c\u0430\u0442 plain -Xs \u2014 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c WAL -P \u2014 \u043f\u0440\u043e\u0433\u0440\u0435\u0441\u0441</p>"},{"location":"Chapter_6/6.3-backup/#8-wal-write-ahead-log","title":"8. WAL (Write-Ahead Log)","text":"<p>PostgreSQL \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0436\u0443\u0440\u043d\u0430\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435.</p> <p>\u0412\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 WAL \u0434\u043e \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443.</p> <p>WAL \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442:</p> <ul> <li>Durability (\u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c)</li> <li>\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0441\u043b\u0435 \u0441\u0431\u043e\u044f</li> </ul>"},{"location":"Chapter_6/6.3-backup/#9-wal","title":"9. \u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 WAL","text":"<p>\u0414\u043b\u044f \u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f:</p> <pre><code>archive_mode = on\narchive_command = 'cp %p /archive/%f'\n</code></pre> <p>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c Point-In-Time Recovery (PITR) \u2014 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u043c\u043e\u043c\u0435\u043d\u0442\u0443 \u0432\u0440\u0435\u043c\u0435\u043d\u0438.</p>"},{"location":"Chapter_6/6.3-backup/#10","title":"10. \u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0433\u043e \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"Chapter_6/6.3-backup/#101","title":"10.1 \u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f","text":"<ul> <li>\u043a\u043e\u043f\u0438\u044f \u0432\u0441\u0435\u0439 \u0411\u0414</li> <li>\u043e\u0431\u044b\u0447\u043d\u043e \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e</li> </ul>"},{"location":"Chapter_6/6.3-backup/#102","title":"10.2 \u0418\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f","text":"<ul> <li>\u043a\u043e\u043f\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</li> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 WAL</li> </ul>"},{"location":"Chapter_6/6.3-backup/#103","title":"10.3 \u0414\u0438\u0444\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439","text":"<ul> <li>\u043a\u043e\u043f\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u043f\u043e\u043b\u043d\u043e\u0433\u043e \u0431\u044d\u043a\u0430\u043f\u0430</li> </ul>"},{"location":"Chapter_6/6.3-backup/#11","title":"11. \u0413\u043e\u0440\u044f\u0447\u0438\u0439 \u0438 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f","text":"\u0422\u0438\u043f \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c Cold Backup \u0411\u0414 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430 Hot Backup \u0411\u0414 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 <p>PostgreSQL \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0433\u043e\u0440\u044f\u0447\u0435\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435.</p>"},{"location":"Chapter_6/6.3-backup/#12","title":"12. \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0431\u044d\u043a\u0430\u043f\u0430","text":"<p>\u0411\u044d\u043a\u0430\u043f \u0431\u0435\u0437 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u2014 \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u0435\u043d.</p> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f:</p> <ul> <li>\u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435</li> <li>\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043f\u0438\u0438 \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0441\u0443\u043c\u043c\u044b</li> </ul>"},{"location":"Chapter_6/6.3-backup/#13","title":"13. \u0420\u043e\u0442\u0430\u0446\u0438\u044f \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u044b\u0445 \u043a\u043e\u043f\u0438\u0439","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0441\u0445\u0435\u043c\u044b:</p> <ul> <li>7 \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0445</li> <li>4 \u043d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0445</li> <li>12 \u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0445</li> </ul> <p>\u042d\u0442\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f GFS (Grandfather-Father-Son).</p>"},{"location":"Chapter_6/6.3-backup/#14","title":"14. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u041d\u0435\u0442 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0433\u043e \u0431\u044d\u043a\u0430\u043f\u0430 \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 \u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u0442\u043e\u043c \u0436\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0420\u0438\u0441\u043a \u043f\u043e\u0442\u0435\u0440\u0438 \u041d\u0435\u0442 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u041b\u043e\u0436\u043d\u043e\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u043e \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u041d\u0435\u0442 \u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f WAL \u041f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0436\u0434\u0443 \u0431\u044d\u043a\u0430\u043f\u0430\u043c\u0438"},{"location":"Chapter_6/6.3-backup/#15","title":"15. \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0436\u0434\u044b\u0439 \u0442\u0438\u043f","text":"\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u041c\u0430\u043b\u0435\u043d\u044c\u043a\u0430\u044f \u0411\u0414 pg_dump \u0411\u043e\u043b\u044c\u0448\u0430\u044f \u0411\u0414 pg_basebackup \u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 Base backup + WAL \u041c\u0438\u0433\u0440\u0430\u0446\u0438\u044f \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0434\u0430\u043c\u043f"},{"location":"Chapter_6/6.3-backup/#16","title":"16. \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434","text":"<p>\u0420\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u2014 \u044d\u0442\u043e \u043d\u0435 \u0440\u0430\u0437\u043e\u0432\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0430 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u0430\u044f \u0441 RPO \u0438 RTO \u0442\u0440\u0435\u0431\u0443\u044e\u0449\u0430\u044f \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</p>"},{"location":"Chapter_6/6.3-backup/#17","title":"17. \u0412\u044b\u0432\u043e\u0434\u044b","text":"<p>\u0420\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 PostgreSQL:</p> <ul> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 pg_dump \u0438 pg_basebackup</li> <li>\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 PITR \u0447\u0435\u0440\u0435\u0437 WAL</li> <li>\u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u0440\u043e\u0434\u0443\u043c\u0430\u043d\u043d\u043e\u0439 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f</li> <li>\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0430\u0436\u043d\u044b\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u043c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> </ul>"},{"location":"Chapter_6/6.3-backup/#_1","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":""},{"location":"Chapter_6/6.3-backup/#1-pg_dump","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f (pg_dump)","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f \u0432\u0441\u0435\u0439 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 SQL.</p> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u044d\u043a\u0430\u043f \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 custom (-Fc).</p> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u043e\u0432.</p> <p>\u041e\u043f\u0438\u0441\u0430\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u043e\u0432.</p> <p>\u0412 \u043e\u0442\u0447\u0451\u0442\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b.</p>"},{"location":"Chapter_6/6.3-backup/#2_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043f\u0443\u0441\u0442\u0443\u044e \u0431\u0430\u0437\u0443 <code>company_restore</code>.</p> <p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435:</p> <ul> <li>\u0438\u0437 SQL-\u0444\u0430\u0439\u043b\u0430</li> <li>\u0438\u0437 custom-\u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 pg_restore.</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f (\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u0430\u0431\u043b\u0438\u0446, \u0441\u0442\u0440\u043e\u043a).</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 psql &lt; file.sql \u0438 pg_restore.</p>"},{"location":"Chapter_6/6.3-backup/#3_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u0427\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u044d\u043a\u0430\u043f \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b <code>employees</code>.</p> <p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0435\u0451 \u0432 \u043d\u043e\u0432\u0443\u044e \u0411\u0414.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u0432 \u043a\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u0443\u0434\u043e\u0431\u043d\u043e.</p>"},{"location":"Chapter_6/6.3-backup/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0410\u043d\u0430\u043b\u0438\u0437 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438","text":"<p>\u0421\u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e:</p> <ul> <li>\u0411\u0414 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c 200 \u0413\u0411</li> <li>24/7 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430</li> <li>\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430\u044f \u043f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u2014 5 \u043c\u0438\u043d\u0443\u0442</li> </ul> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c:</p> <ul> <li>\u043a\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0431\u044d\u043a\u0430\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c?</li> <li>\u043d\u0443\u0436\u043d\u043e \u043b\u0438 \u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 WAL?</li> <li>\u043a\u0430\u043a \u0447\u0430\u0441\u0442\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f?</li> </ul>"},{"location":"Chapter_6/6.3-backup/#5_1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0433\u043e \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f:</p> <ul> <li>\u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430</li> <li>\u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0441\u043a\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b</li> <li>\u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0443\u0447\u0435\u0431\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430</li> </ul> <p>\u0423\u043a\u0430\u0437\u0430\u0442\u044c:</p> <ul> <li>\u0442\u0438\u043f \u0431\u044d\u043a\u0430\u043f\u0430</li> <li>\u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u043d\u043e\u0441\u0442\u044c</li> <li>RPO</li> <li>RTO</li> </ul>"},{"location":"Chapter_6/6.3-backup/#_2","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b","text":"<ol> <li>\u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0438 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0431\u044d\u043a\u0430\u043f\u043e\u043c?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 WAL \u0438 \u043a\u0430\u043a\u0443\u044e \u0440\u043e\u043b\u044c \u043e\u043d \u0438\u0433\u0440\u0430\u0435\u0442?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 Point-In-Time Recovery (PITR)?</li> <li>\u0427\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f pg_dump \u043e\u0442 pg_basebackup?</li> <li>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0433\u043e\u0440\u044f\u0447\u0438\u0439 \u0438 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0439 \u0431\u044d\u043a\u0430\u043f?</li> <li>\u0427\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0442 RPO \u0438 RTO?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0431\u044d\u043a\u0430\u043f \u043d\u0430 \u0442\u043e\u043c \u0436\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u2014 \u043f\u043b\u043e\u0445\u0430\u044f \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430?</li> <li>\u041f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435?</li> <li>\u041c\u043e\u0436\u043d\u043e \u043b\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0434\u043d\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438\u0437 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0431\u044d\u043a\u0430\u043f\u0430?</li> <li>\u0412 \u043a\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0438\u0442\u0435\u043b\u0435\u043d \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f?</li> </ol>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 14. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430","text":"<p>\u0426\u0435\u043b\u044c: \u043d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u0438 \u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438, \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441\u043e \u0441\u0445\u0435\u043c\u0430\u043c\u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u043d\u0446\u0438\u043f \u043d\u0430\u0438\u043c\u0435\u043d\u044c\u0448\u0438\u0445 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0447\u0435\u0440\u0435\u0437 VIEW \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#_1","title":"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u0430\u043d\u043d\u044b\u0445","text":"<pre><code>employees (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    salary NUMERIC,\n    department TEXT\n);\n\nclients (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT,\n    city TEXT,\n    status TEXT\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    client_id INT,\n    total_amount NUMERIC\n);\n</code></pre>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u0438:</p> <ul> <li>admin_role (LOGIN, CREATEDB)</li> <li>analyst_role (\u0431\u0435\u0437 LOGIN)</li> <li>app_user_role (LOGIN)</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0440\u043e\u043b\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \\du.</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#2","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:</p> <ul> <li>ivan</li> <li>app_service</li> </ul> <p>\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c:</p> <ul> <li>GRANT analyst_role TO ivan;</li> <li>GRANT app_user_role TO app_service;</li> </ul> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0447\u043b\u0435\u043d\u0441\u0442\u0432\u043e \u0440\u043e\u043b\u0435\u0439.</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#3","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3","text":"<p>\u0414\u0430\u0442\u044c analyst_role:</p> <pre><code>GRANT SELECT ON employees, clients, orders TO analyst_role;\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0434 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c ivan:</p> <pre><code>SELECT \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\n\nINSERT \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443\n</code></pre>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4","text":"<p>\u0414\u0430\u0442\u044c app_user_role:</p> <pre><code>GRANT SELECT, INSERT, UPDATE ON orders TO app_user_role;\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a employees.</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u0443 PUBLIC:</p> <pre><code>REVOKE ALL ON SCHEMA public FROM PUBLIC;\n</code></pre> <p>\u0414\u0430\u0442\u044c <code>USAGE</code> \u043d\u0430 \u0441\u0445\u0435\u043c\u0443 <code>public</code> \u0440\u043e\u043b\u0438 <code>analyst_role</code>.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f.</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432:</p> <pre><code>ALTER DEFAULT PRIVILEGES\nIN SCHEMA public\nGRANT SELECT ON TABLES TO analyst_role;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043b\u0438 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a \u0434\u043e\u0441\u0442\u0443\u043f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c VIEW:</p> <pre><code>CREATE VIEW employee_public AS\nSELECT id, full_name, department\nFROM employees;\n</code></pre> <p>\u0414\u0430\u0442\u044c <code>SELECT</code> \u043d\u0430 <code>VIEW</code>.</p> <p>\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c <code>SELECT</code> \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 <code>employees</code>.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c:</p> <ul> <li>\u0434\u043e\u0441\u0442\u0443\u043f \u043a VIEW \u0435\u0441\u0442\u044c</li> <li>\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d</li> </ul>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e:</p> <pre><code>CREATE FUNCTION get_total_orders()\nRETURNS NUMERIC\nLANGUAGE SQL\nAS $$\nSELECT SUM(total_amount) FROM orders;\n$$;\n</code></pre> <p>\u0414\u0430\u0442\u044c:</p> <pre><code>GRANT EXECUTE ON FUNCTION get_total_orders() TO analyst_role;\n</code></pre> <p>\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u043f\u0440\u044f\u043c\u043e\u0439 <code>SELECT</code> \u043d\u0430 <code>orders</code>.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#9","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 9","text":"<p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c:</p> <ul> <li>\u043a\u0430\u043a\u0438\u0435 \u043f\u0440\u0430\u0432\u0430 \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b</li> <li>\u043a\u0430\u043a\u0438\u0435 \u0440\u043e\u043b\u0438 \u0438\u043c\u0435\u044e\u0442 \u0447\u0440\u0435\u0437\u043c\u0435\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438</li> <li>\u043a\u0430\u043a\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b PUBLIC</li> </ul> <p>\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e.</p>"},{"location":"Chapter_6/practic-14-setting-up-access-rights/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0440\u043e\u043b\u0438 <code>readonly_user</code>.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u043e\u043b\u044c, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043c\u043e\u0436\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e <code>orders</code>.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043d\u0430\u0431\u043e\u0440 \u043f\u0440\u0430\u0432 \u0434\u043b\u044f web-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u0421\u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0440\u043e\u043b\u0435\u0439 \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0438\u0437 3 \u043e\u0442\u0434\u0435\u043b\u043e\u0432.</p>"},{"location":"Chapter_6/practic-15-backup-and-recovery/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 15. \u0411\u044d\u043a\u0430\u043f \u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435","text":"<p>\u0426\u0435\u043b\u044c: \u043d\u0430\u0443\u0447\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0431\u0430\u0437\u0443 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e, \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u044b \u0431\u044d\u043a\u0430\u043f\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u0435 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0438 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0431\u044d\u043a\u0430\u043f\u0430</p>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#_1","title":"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442\u043e\u0432\u0443\u044e \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445:</p> <pre><code>createdb company_db\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u043c\u0438:</p> <ul> <li>employees</li> <li>clients</li> <li>orders</li> </ul> <p>\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 1000 \u0441\u0442\u0440\u043e\u043a.</p>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#1-sql-","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. SQL-\u0444\u043e\u0440\u043c\u0430\u0442","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>pg_dump -U postgres company_db &gt; company_backup.sql\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c:</p> <ul> <li>\u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430</li> <li>\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c (\u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0432 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435)</li> </ul>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#2-custom-","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. Custom-\u0444\u043e\u0440\u043c\u0430\u0442","text":"<pre><code>pg_dump -U postgres -Fc company_db -f company_backup.dump\n</code></pre> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c:</p> <ul> <li>\u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430</li> <li>\u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 (\u043d\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442)</li> </ul>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#3-sql","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u0437 SQL","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0411\u0414:</p> <pre><code>createdb company_restore\n</code></pre> <p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c:</p> <pre><code>psql -U postgres -d company_restore &lt; company_backup.sql\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c:</p> <ul> <li>\u0441\u043f\u0438\u0441\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446</li> <li>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a</li> </ul>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#4-pg_restore","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 pg_restore","text":"<p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0430\u0437\u0443 \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e.</p> <pre><code>pg_restore -U postgres -d company_restore company_backup.dump\n</code></pre> <p>\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u044d\u043a\u0430\u043f \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u044b employees:</p> <pre><code>pg_dump -U postgres -t employees company_db &gt; employees_backup.sql\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0411\u0414 \u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u044d\u0442\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0443.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0438 \u0434\u0430\u043d\u043d\u044b\u0435.</p>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6","text":"<p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 <code>orders</code>.</p> <p>\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0435\u0451 \u0438\u0437 \u0431\u044d\u043a\u0430\u043f\u0430.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.</p> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043f\u043e\u0447\u0435\u043c\u0443 \u0432\u0430\u0436\u043d\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435.</p>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c:</p> <pre><code>pg_basebackup -U postgres -D /tmp/basebackup -Fp -Xs -P\n</code></pre> <p>\u041e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c:</p> <ul> <li>\u0447\u0442\u043e \u043a\u043e\u043f\u0438\u0440\u0443\u0435\u0442\u0441\u044f</li> <li>\u0437\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b WAL</li> <li>\u0447\u0435\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 pg_dump</li> </ul>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#8","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 8","text":"<p>\u0421\u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e:</p> <ul> <li>\u0431\u0430\u0437\u0430 100 \u0413\u0411</li> <li>24/7 \u0440\u0430\u0431\u043e\u0442\u0430</li> <li>\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430\u044f \u043f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u2014 10 \u043c\u0438\u043d\u0443\u0442</li> </ul> <p>\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u0438 \u0442\u043e\u043b\u044c\u043a\u043e pg_dump?</li> <li>\u043d\u0443\u0436\u043d\u043e \u043b\u0438 \u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 WAL?</li> <li>\u043a\u0430\u043a \u0447\u0430\u0441\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c base backup?</li> </ul>"},{"location":"Chapter_6/practic-15-backup-and-recovery/#_2","title":"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442 \u0431\u044d\u043a\u0430\u043f\u0430.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u043e\u0442\u0430\u0446\u0438\u044e \u0444\u0430\u0439\u043b\u043e\u0432 (\u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435 \u043a\u043e\u043f\u0438\u0438).</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3. \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0430\u0437\u0443 \u0432 \u043d\u043e\u0432\u0443\u044e \u0441\u0440\u0435\u0434\u0443.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430.</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 5. \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c RPO \u0438 RTO \u0434\u043b\u044f \u0443\u0447\u0435\u0431\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b.</p>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 16","text":"<p>\u0426\u0435\u043b\u044c: \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0443\u043c\u0435\u043d\u0438\u0435 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0411\u0414; \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438; \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0438\u043b\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u044b; \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0442\u044c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c (\u0440\u043e\u043b\u0438 \u0438 \u043f\u0440\u0430\u0432\u0430); \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</p>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#_1","title":"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c","text":"<p>\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0411\u0414 \u0434\u043b\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430.</p> <p>\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. \u041f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <p>users:</p> <ul> <li>id (PK)</li> <li>full_name</li> <li>email (UNIQUE)</li> <li>role</li> <li>created_at</li> </ul> <p>products</p> <ul> <li>id (PK)</li> <li>name</li> <li>price</li> <li>stock_quantity</li> <li>category</li> </ul> <p>orders:</p> <ul> <li>id (PK)</li> <li>user_id (FK)</li> <li>order_date</li> <li>total_amount</li> <li>status</li> </ul> <p>order_items</p> <ul> <li>id (PK)</li> <li>order_id (FK)</li> <li>product_id (FK)</li> <li>quantity</li> <li>price</li> </ul> <p>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f:</p> <ul> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c PRIMARY KEY</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c FOREIGN KEY</li> <li>\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ON DELETE CASCADE</li> <li>\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c CHECK (price &gt; 0, quantity &gt; 0)</li> <li>\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c NOT NULL \u0433\u0434\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e</li> </ul>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#2-","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. \u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430","text":"<p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u0437 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432:</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 A (\u0447\u0435\u0440\u0435\u0437 \u0442\u0440\u0438\u0433\u0433\u0435\u0440). \u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 <code>order_items</code> \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c orders.total_amount</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 B (\u0447\u0435\u0440\u0435\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u044e). \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>calculate_order_total(order_id INT)</code> \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0430.</p> <p>\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c PL/pgSQL.</p>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#3-sql-","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u044b","text":"<p>\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438 \u043f\u0440\u043e\u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</li> <li>\u0422\u043e\u043f-5 \u0441\u0430\u043c\u044b\u0445 \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432</li> <li>\u0421\u0443\u043c\u043c\u0443 \u043f\u0440\u043e\u0434\u0430\u0436 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0430\u043c</li> <li>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0431\u0435\u0437 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JOIN, GROUP BY, \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f","text":"<p>\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0441\u043b\u043e\u0436\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0447\u0435\u0440\u0435\u0437 <code>EXPLAIN ANALYZE</code></p> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0438\u043d\u0434\u0435\u043a\u0441\u0430.</p> <p>\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5. \u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439:</p> <ul> <li>\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430</li> <li>\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432</li> <li>\u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u0435 stock_quantity</li> </ul> <p>\u0412\u0441\u0451 \u0432 \u043e\u0434\u043d\u043e\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438. \u041f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0435 \u2014 \u043e\u0442\u043a\u0430\u0442.</p>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#6","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6. \u0417\u0430\u0449\u0438\u0442\u0430 \u0411\u0414","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u0438:</p> <ul> <li>admin</li> <li>manager</li> <li>analyst_role</li> </ul> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c:</p> \u0420\u043e\u043b\u044c \u041f\u0440\u0430\u0432\u0430 admin ALL manager INSERT/UPDATE/SELECT analyst SELECT <p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044e products.price \u0442\u043e\u043b\u044c\u043a\u043e admin.</p>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#7","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 7. \u0420\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<ul> <li>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0431\u044d\u043a\u0430\u043f \u0431\u0430\u0437\u044b.</li> <li>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0435\u0433\u043e \u0432 \u043d\u043e\u0432\u0443\u044e \u0411\u0414.</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445.</li> </ul>"},{"location":"Chapter_7/practic-16-database-implementation-and-protection/#_2","title":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1: \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c RLS \u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2: \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c SERIALIZABLE \u0434\u043b\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3: \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0446\u0435\u043d</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 17. SQL, \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0438\u043b\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440","text":"<p>\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 17: SQL + \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0438\u043b\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440</p> <p>\u0426\u0435\u043b\u044c: \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b; \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u044b\u0435 SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u044b; \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0443 \u0447\u0435\u0440\u0435\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0438\u043b\u0438 \u0442\u0440\u0438\u0433\u0433\u0435\u0440; \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u0438; \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438; \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#_1","title":"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c","text":"<p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u0447\u0451\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 (\u0443\u043f\u0440\u043e\u0449\u0451\u043d\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f).</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#1","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0411\u0414","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> <pre><code>users (\n    id SERIAL PRIMARY KEY,\n    full_name TEXT NOT NULL,\n    email TEXT UNIQUE NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nproducts (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL,\n    price NUMERIC CHECK (price &gt; 0),\n    stock INT CHECK (stock &gt;= 0)\n);\n\norders (\n    id SERIAL PRIMARY KEY,\n    user_id INT REFERENCES users(id) ON DELETE CASCADE,\n    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    total_amount NUMERIC DEFAULT 0,\n    status TEXT CHECK (status IN ('new','paid','cancelled'))\n);\n\norder_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT REFERENCES orders(id) ON DELETE CASCADE,\n    product_id INT REFERENCES products(id),\n    quantity INT CHECK (quantity &gt; 0),\n    price NUMERIC CHECK (price &gt; 0)\n);\n</code></pre>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#2-sql-","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2. SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u044b (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ol> <li>\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</li> <li>\u041e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443 \u043f\u0440\u043e\u0434\u0430\u0436</li> <li>\u0422\u043e\u043f-3 \u0441\u0430\u043c\u044b\u0445 \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u0430</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0430\u043c</li> <li>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0431\u0435\u0437 \u0437\u0430\u043a\u0430\u0437\u043e\u0432</li> </ol> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c JOIN, GROUP BY, \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#3-","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3. \u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430","text":"<p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0432\u0430\u0440\u0438\u0430\u043d\u0442.</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#a","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 A \u2014 \u0424\u0443\u043d\u043a\u0446\u0438\u044f","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>recalculate_order_total(p_order_id INT)</code></p> <p>\u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430:</p> <ul> <li>\u0441\u0443\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c quantity * price</li> <li>\u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u043f\u043e\u043b\u0435 orders.total_amount</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c PL/pgSQL.</li> </ul> <p>\u041f\u0440\u043e\u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u0437\u043e\u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#b","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 B \u2014 \u0422\u0440\u0438\u0433\u0433\u0435\u0440","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0440\u0438\u0433\u0433\u0435\u0440 <code>AFTER INSERT OR UPDATE OR DELETE ON order_items</code></p> <p>\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0430</p> <p>\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u043f\u0440\u0438:</p> <ul> <li>\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438</li> <li>\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438</li> <li>\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u0437\u0438\u0446\u0438\u0438</li> </ul>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#4","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4. \u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439:</p> <ul> <li>\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430</li> <li>\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 2\u20133 \u0442\u043e\u0432\u0430\u0440\u043e\u0432</li> <li>\u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u0435 stock</li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>BEGIN;</li> <li>COMMIT;</li> <li>ROLLBACK;</li> </ul> <p>\u041f\u0440\u043e\u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u043a\u0430\u0442 \u043f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0435.</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#5","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5. \u0418\u043d\u0434\u0435\u043a\u0441\u0430\u0446\u0438\u044f","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0438\u043d\u0434\u0435\u043a\u0441\u0430:</p> <ul> <li>\u043f\u043e orders.user_id</li> <li>\u043f\u043e order_items.order_id</li> </ul> <p>\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0437\u0430\u043f\u0440\u043e\u0441 \u0447\u0435\u0440\u0435\u0437 <code>EXPLAIN ANALYZE</code></p> <p>\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#6-","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 6. \u041c\u0438\u043d\u0438-\u0437\u0430\u0449\u0438\u0442\u0430","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u044c analyst_role.</p> <p>\u0414\u0430\u0442\u044c <code>GRANT SELECT ON ALL TABLES IN SCHEMA public TO analyst_role;</code></p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c <code>INSERT</code>.</p>"},{"location":"Chapter_7/practic-17-SQL-function%20or%20trigger/#_2","title":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","text":"<ul> <li>\u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u0435\u0442 \u043f\u043e\u043a\u0443\u043f\u043a\u0438 \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u043c stock</li> <li>\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441\u0430</li> <li>\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c SERIALIZABLE \u0434\u043b\u044f \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430</li> </ul>"}]}